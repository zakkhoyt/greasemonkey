(function(q){var r=window.AmazonUIPageJS||window.P,w=r._namespace||r.attributeErrors,h=w?w("QTipsWebLibrary",""):r;h.guardFatal?h.guardFatal(q)(h,window):h.execute(function(){q(h,window)})})(function(q,r,w){(function(){q.when("jQuery","QTipsConstants","ready").register("QTipLibrary",function(h,c){var a={Model:function(a){this.attributes=a||{};this.set(a);this.initialize.apply(this,arguments)}};h.extend(a.Model.prototype,{initialize:function(){},get:function(a){if(this.attributes&&this.attributes.hasOwnProperty(a))return this.attributes[a]},
has:function(a){return null!==this.get(a)&&this.get(a)!==w},set:function(a){for(var c in a)a.hasOwnProperty(c)&&(this.attributes[c]=a[c])},unset:function(a){delete this.attributes[a]},parse:function(a,c){return a},toJson:function(){return this.attributes?JSON.stringify(this.attributes):""}});a.Collection=function(a){this.models=a||{};this.initialize.apply(this,arguments)};h.extend(a.Collection.prototype,{initialize:function(){},at:function(a){if(this.models&&this.models.hasOwnProperty(a))return this.models[a]},
add:function(a){a&&(this.models[this.modelLength()]=a)},remove:function(a){for(var c in this.models)this.models[c]===a&&delete this.models[c]},create:function(a){a=this.parse(a);for(var c in a)a.hasOwnProperty(c)&&this.add(a[c])},_prepareModel:function(e){if(this.model&&e){for(var f in e)if(e.hasOwnProperty(f)){var d=e[f];c.regex.numberRegex.test(d)&&(d=Number(d));e[f]=d}e=new a.Model(e)}return e},set:function(a){this.model=a},modelLength:function(){if(this.models)return Object.keys(this.models).length},
parse:function(a,c){return a},toJson:function(){return JSON.stringify(this.models)}});a.View=function(a){this.tagName=a||"\x3cdiv/\x3e";this.template=this.template||"";this.initialize.apply(this,arguments)};h.extend(a.View.prototype,{events:{},initialize:function(){},render:function(){},remove:function(){},_removeElement:function(a){a=h(a);this.isDefined(a)&&this.isDefined(a[0])&&(a.remove?a.remove():a.parentNode&&a.parentNode.removeChild(a))},setElement:function(a,c){h(a).append(c)},getElement:function(a){if((a=
h(a))&&0<a.length)return a[0].lastChild},add:function(a,c){c=this._createElement(this.template,c);this.setElement(a,c);return c},_createElement:function(a,c){a=this._processTemplate(a,c);return h(this.tagName).html(a)},_processTemplate:function(a,f){var d=a.match(c.regex.templateSpliterRegex);if(d)for(var b=0;b<d.length;b++){var e=d[b].match(/\w+/)[0];f&&f.has(e)&&(a=a.replace(d[b],f.get(e)))}return a},isDefined:function(a){return null!==a&&a!==w}});a.Model.extend=a.Collection.extend=a.View.extend=
function(a,c){var d=this,b=a&&"object"===typeof a&&a.hasOwnProperty("constructor")?a.constructor:function(){return d.apply(this,arguments)};h.extend(b,d,c);c=function(){this.constructor=b};c.prototype=d.prototype;b.prototype=new c;a&&h.extend(b.prototype,a);b.__super__=d.prototype;return b};return a})})();(function(){q.when("A","a-sheet","QTips").execute(function(h,c,a){h.on("a:sheet:beforeShow",function(c){a.view.dismissAndRender()});h.on("a:sheet:afterHide",function(c){a.view.dismissAndRender()})});
q.when("A","a-popover","QTips").execute(function(h,c,a){h.on("a:popover:beforeShow",function(c){a.view.dismissAndRender()});h.on("a:popover:afterHide",function(c){a.view.dismissAndRender()})});q.when("A","all-offers-display-content-loader","QTips").execute(function(h,c,a){h.on("aod-event-opened",function(c){a.view.dismissAndRender()});h.on("aod-event-closed",function(c){a.view.dismissAndRender()})});q.when("A","jQuery","QTipsConstants","QTipLibrary","QTipsStyles","QTipsMetrics","SAConfig","NestedShoppingAidHelper",
"ShoppingAidsGenericUtils","AnchorBasedSAUtils","SAMetricConstants","SAPAttributionHandler","SAFeature","FeatureAttributionConstants","SACommonConstants").register("QTips",function(h,c,a,e,f,d,b,k,g,l,p,m,A,x,y){var n={isDefined:function(a){return g.isDefined(a)},platformCheck:function(){return g.platformCheck()},cleanUpCachingInstrumentation:function(){var a=g.removeFromLocalStorageIfPresent("SAcacheConfig_4");d.incrementCounter("SAcacheConfig_4_"+a)},getCurrentLoP:function(){return g.getCookie(b.cookies.language)||
b.defaultLoP},getPreviousLoP:function(){return g.isMShop()&&g.isAndroidDevice()?g.getQueryParameter("previous_lop"):g.getFromLocalStorage("previous_lop")||b.defaultLoP},saveCurrentLoP:function(){g.setInLocalStorage("current_lop",this.getCurrentLoP())},savePreviousLoP:function(){if(!g.isMShop()||!g.isAndroidDevice()){var a=g.getFromLocalStorage("current_lop");a&&g.setInLocalStorage("previous_lop",a)}},isGuidedTour:function(a){return"guidedtour"===a.get("dismissalType")},updateRetryCount:function(a){var c=
a.get("retryCount");-1<=c&&a.set({retryCount:c-1})}},u={};u.model=new e.Model;u.utils=n;u.addStyles=function(){var a=document.createElement("style");a.innerHTML=f;document.head.appendChild(a)};var L=e.Collection.extend({model:u.model,elementAnchorList:[],invokingEventsMap:{},auiTriggerHandler:{},tipStartTime:0,isSet:!1,registerEvent:function(a,c){if(c){c=a.eventType;var b=a.invokingEventElement;a=this}else c=a.data.eventType,b=a.data.invokingEventElement,a=a.data.self;if(c in a.invokingEventsMap)g.isDefined(a.invokingEventsMap[c])&&
-1===a.invokingEventsMap[c].indexOf(b)&&a.invokingEventsMap[c].push(b);else{var d=[];d.push(b);a.invokingEventsMap[c]=d}},add:function(b){try{if(d.incrementCounter("qtips_add_initiated"),g.isDefined(b)&&g.isDefined(b.get("elementAnchor"))&&(b.get("weblabTriggerOnlyFlag")||g.isDefined(b.get("maxDisplayCount"))&&0<b.get("maxDisplayCount"))){var e=b.get("elementAnchor");var k=isNaN(e)?l.processAnchor(e,a.regex.anchorSpliterRegex):e;b.set({elementAnchor:k});e={};e[b.get("elementAnchor")]=b.get("sequenceNum");
e.schedulingType=b.get("schedulingType");b.set({retryCount:a.view.retryCount});b.get("onDemand")?this.elementAnchorList.unshift(e):this.elementAnchorList.push(e);this.models[b.get("elementAnchor")]=b;var z=b.get("invokingEventElement"),f=b.get("invokingEventType");if(g.isDefined(z)&&0<z.length&&g.isDefined(f)&&0<f.length&&f.toLowerCase()!==a.PartnerEvent)z=l.processAnchor(z,a.regex.anchorSpliterRegex),c(z).bind(f,{eventType:f,invokingEventElement:z,self:this},this.registerEvent);else if(g.isDefined(z)&&
0<z.length&&g.isDefined(f)&&0<f.length){var m=h.on(z,function(){u.collection.registerEvent({eventType:f,invokingEventElement:z},!0)});this.auiTriggerHandler[z]=m}}}catch(C){d.incrementCounter("qtips_model_undefined"),q.log(C,"WARN","QTips")}},parse:function(a,c){if(n.isDefined(a)){var b=this._prepareModel.bind(this);a.forEach(function(c,d,e){a[d]=b(c)});return a}}});u.collection=new L;e=e.View.extend({isDismissInvoked:!0,isToolTipSafeToBeDisplayed:!0,isAnchorDescriptionUpdated:!1,nativeToolTipDisplayBackoffMap:{},
currentSequence:0,qtipsId:"#qtips",highlighterId:"#sa-highlighter",pageAnchor:"body",qtipDismissIcon:"#qtip-dismiss-cross",qtipVideoId:"#qtip-video",popoverClass:a.popOverAnchors.popoverClass,searchSugesstions:a.popOverAnchors.searchSugesstions,searchFilterPage:a.popOverAnchors.searchFilterPage,anchor:"#buyNow",defaultArrowPosition:"topright",qtipThumbnailId:"#qtip-thumbnail",qtipThumbnailTextId:"#qtip-thumbnail-text",identifier:"",dismissalEvent:"",scrollHideToolTipEvent:"scroll.hideToolTip",scrollUpdateCoordinateEvent:"scroll.updateCoordinate",
scrollEndUpdateCoordinateEvent:"scrollend.updateCoordinate",scrollAnimationStopEvent:"scroll.animateStop",collection:u.collection,events:{"touchstart click keyup":"dismissAndRender",scroll:"dismissAndRender",orientationchange:"dismissAndRender","blur focus":"dismissOrRender","visibilitychange webkitvisibilitychange":"visibilityChange"},eventHandlers:{},toolTipVideoPlayed:{},pageType:"unknown",setPageType:function(a){a&&(this.pageType=a)},getPageType:function(){return this.pageType},addStaticToolTipHandlers:function(a){if(a.get("videoSource")){var b=
this,d=a.get("identifier");b.addDismissIconHandlers(a);c(b.qtipsId).bind("click.videoToolTip keypress",{model:a,tipId:d},function(d){if("keypress"!==d.type||13===d.charCode||32===d.charCode)g.isDefined(b.animateIntervalId)&&(clearInterval(b.animateIntervalId),b.animateIntervalId=w),b.animateVideo(a),b.clearFadeOut(),c(b.qtipsId).unbind("click.videoToolTip"),b.addVideoToolTipHandlers(a),b.addDismissIconHandlers(a)})}},addDismissIconHandlers:function(a){var b=this;a=a.get("identifier");c(this.qtipDismissIcon).bind("click.staticToolTip",
{eventType:"dismissalByUser",tipId:a},function(a){var c=a.data.tipId;b.countLogger("dismiss_icon_clicked",c);b.toolTipVideoPlayed&&b.toolTipVideoPlayed[c]?b.countLogger("dismissed_after_video_played",c):b.countLogger("dismissed_before_video_played",c);b.dismissAndRender.call(b,a);a.stopPropagation()})},addVideoToolTipHandlers:function(a){var b=this;a=a.get("identifier");c(this.qtipVideoId).bind("play.videoToolTip",{tipId:a},function(a){a=a.data.tipId;b.toolTipVideoPlayed&&!b.toolTipVideoPlayed[a]&&
(b.toolTipVideoPlayed[a]=b.getVideoPlayedMetricsObject());b.countLogger("video_played",a)});c(this.qtipVideoId).bind("timeupdate.videoToolTip",{tipId:a},h.throttle(function(a){a=a.data.tipId;var d=c(b.qtipVideoId);if(d[0]){d=Math.ceil(4*d[0].currentTime/d[0].duration);var e=b.toolTipVideoPlayed[a];if(b.toolTipVideoPlayed&&e&&1<=d){if(!e.firstQuarterPublished){var g=1;e.firstQuarterPublished=!0}2<=d&&(e.secondQuarterPublished||(g=2,e.secondQuarterPublished=!0),3<=d&&(e.thirdQuartedrublished||(g=3,
e.thirdQuartedrublished=!0),4<=d&&!e.fourthQuarterPublished&&(g=4,e.fourthQuarterPublished=!0)));g&&b.countLogger("video_length_played_"+g,a);b.toolTipVideoPlayed[a]=e}}},1E3));c(this.qtipVideoId).bind("error.videoToolTip",{tipId:a},function(a){b.countLogger("video_failed_to_load",a.data.tipId)})},getVideoPlayedMetricsObject:function(){return{firstQuarterPublished:!1,secondQuarterPublished:!1,thirdQuartedrublished:!1,fourthQuarterPublished:!1}},addAutoDismissalHandlers:function(){for(var a in this.events)this.events.hasOwnProperty(a)&&
!g.isDefined(this.eventHandlers[a])&&(this.eventHandlers[a]=this[this.events[a]].bind(this),c(r).bind(a,this.eventHandlers[a]))},makeToolTipVisible:function(a,b,d){c(u.view.qtipsId).length&&l.isElementVisible(a)&&(u.view.adjustCoordinates(a,d.get("elementArrowPosition")||this.defaultArrowPosition,d.get("offsetX"),d.get("offsetY"),!0),c(u.view.qtipsId).css({visibility:"visible"}),b.isToolTipHidden=!1)},bindScrollHandlers:function(a,b){var d={isToolTipHidden:!1};c(r).bind(u.view.scrollHideToolTipEvent,
function(){!d.isToolTipHidden&&c(u.view.qtipsId).length&&(c(u.view.qtipsId).css({visibility:"hidden"}),d.isToolTipHidden=!0)});if("onscrollend"in r)c(r).bind(u.view.scrollEndUpdateCoordinateEvent,h.throttle(function(){u.view.makeToolTipVisible(a,d,b)},50));else{var e;c(r).bind(u.view.scrollUpdateCoordinateEvent,function(){clearTimeout(e);e=setTimeout(function(){u.view.makeToolTipVisible(a,d,b)},50)})}c(r).bind("visibilitychange webkitvisibilitychange",function(){u.view.visibilityChange();u.view.unbindScrollHandler()})},
unbindScrollHandler:function(){c(r).unbind(u.view.scrollHideToolTipEvent);c(r).unbind(u.view.scrollEndUpdateCoordinateEvent);c(r).unbind(u.view.scrollUpdateCoordinateEvent)},removeStaticToolTipHandlers:function(){c(this.qtipDismissIcon).unbind("click.staticToolTip");c(this.qtipsId).unbind("click.videoToolTip keypress");c(this.qtipVideoId).unbind("play.videoToolTip");c(this.qtipVideoId).unbind("error.videoToolTip");c(this.qtipVideoId).unbind("timeupdate.videoToolTip")},removeAutoDismissalHandlers:function(){for(var a in this.events)this.events.hasOwnProperty(a)&&
g.isDefined(this.eventHandlers[a])&&(c(r).unbind(a,this.eventHandlers[a]),this.eventHandlers[a]=w)},render:function(b){var d=b.get("identifier");c(b.get("elementAnchor")).attr("aria-describedby")||(this.isAnchorDescriptionUpdated=!0,c(b.get("elementAnchor")).attr("aria-describedby","qtips-text"));var e=l.getIndexByAnchor(this.collection.elementAnchorList,this.anchor);if(g.weblabTriggerAndCheck(b))if(g.isShoppingAidForWeblabTesting(d))-1!==e&&this.dismissalHandler(e),this.nextQTip();else{this.fadeOut(this.remove.bind(this));
var k=this.addAndPosition(this.anchor,b);"hidden"!==document.visibilityState&&g.isDefined(k)&&(g.hasNoPopover(this.popoverClass,this.searchSugesstions,this.searchFilterPage)||l.isShoppingAidOverPopoverVisible(b.get("popoverAnchor"),b.get("elementAnchor")))&&(this.animateIn(b),c(this.qtipsId).attr(a.view.saDOMNameAttribute,d),"hotspot"!==b.get("tipType")&&(d=c(".qtips-text").width()+a.view.deltaX,k=c(this.qtipsId).width(),b.get("videoWidth"),d<k&&!b.get("videoSource")&&!u.utils.isGuidedTour(b)&&(c(this.qtipsId).width(d),
a.regex.positionRightRegex.test(b.get("elementArrowPosition"))&&(d=parseInt(c(this.qtipsId).css("left"),10)+(k-d)+a.view.deltaX,c(this.qtipsId).css({left:d}))),d=b.get("elementDuration")||a.timer.defaultAnimationTime,k=b.get("toolTipUXChangeAllocatedTreatment"),!g.isDefined(k)||"C"===k||g.isDefined(b.get("videoSource"))&&""!==b.get("videoSource")||!g.isPlatformSupportedForToolTipUxExperiment())&&(this.fadeTimeoutId=setTimeout(this.fadeOut.bind(this),d,this.nextQTip)),-1!==e&&(this.dismissalTimeoutId=
setTimeout(this.dismissalHandler.bind(this),a.timer.defaultDismissalCallbackTime,e)))}else-1!==e&&this.collection.elementAnchorList.splice(e,1),this.nextQTip()},dismissalHandler:function(b){var c=Object.keys(this.collection.elementAnchorList[b])[0],d=this.collection.elementAnchorList[b][c],e=this.collection.at(c).get("identifier"),k=this.collection.at(c).get("contextAwareIndex"),f=this.collection.at(c).get("schedulingType"),l=this.collection.at(c).get("elementDisplayType"),p=this.collection.at(c).get("maxDisplayCount"),
h=c,z=this.collection.at(c).get("videoSource");g.isDefined(z)||(z=a.EmptyString);var n=this.collection.at(c).get("toolTipUXChangeAllocatedTreatment");g.isDefined(n)||(n=a.EmptyString);g.isDefined(this.collection.at(c).get("featureAttributionAnchor"))&&(h=this.collection.at(c).get("featureAttributionAnchor"));var x=this.collection.at(c).get("onDemand"),u=this.collection.at(c).get("successResponse");this.collection.elementAnchorList.splice(b,1);g.isDefined(this.dismissalCallback)&&(b={identifier:e,
elementAnchor:c,sequenceNum:d,schedulingType:f,onDemand:x,contextAwareIndex:k,successResponse:u,featureAttributionAnchor:h,elementDisplayType:l,maxDisplayCount:p,videoSource:z,toolTipUXChangeAllocatedTreatment:n},this.dismissalCallback(b),c=g.platformCheck(),("html"===l.toLowerCase()||A.androidFeatureAttribution&&c!==y.MSHOP_IPHONE)&&m.enableFeatureAttribution(b))},dismissByUserHandler:function(b){var c=b.get("elementAnchor"),d=b.get("identifier");b=b.get("schedulingType");var e=this.collection.at(c).get("contextAwareIndex"),
g=this.collection.at(c).get("onDemand");c=this.collection.at(c).get("successResponse");d={identifier:d,schedulingType:b,onDemand:g,contextAwareIndex:e,successResponse:c,userEvent:a.userEvent.optOut};n.isDefined(this.dismissalCallback)&&this.dismissalCallback(d)},clickEventHandlerForUserDismissalTip:function(a){c(r).bind("click",function(){u.view.dismissAndRender()})},errorCallbackFunction:function(a,b){u.view.moveToolTipToEndOfList(b);var c=l.getIndexByAnchor(this.collection.elementAnchorList,b.get("elementAnchor"));
b.get("nestedSAList")&&u.utils.isGuidedTour(b)?u.view.handleGuidedTour(b,"Error"):"Class not found"===a&&(d.incrementCounter("ShoppingAids_CordovaRefactoring_PluginNotFound"),this.collection.elementAnchorList.splice(c,1));this.isToolTipSafeToBeDisplayed=!0;this.nativeToolTipDisplayBackoffMap[b.get("identifier")]=!1},successCallbackFunction:function(a,b,c,e){var k=b.get("identifier"),f=b.get("elementAnchor");f=l.getIndexByAnchor(this.collection.elementAnchorList,f);g.isDefined(c)&&g.isDefined(e)&&
(b.set({failureResponse:e}),b.set({successResponse:c}));"displayNativeToolTip"===a?(this.isToolTipSafeToBeDisplayed=!1,this.nativeToolTipDisplayBackoffMap[k]=!0):"NativeTipDisplaySuccessful"===a?(this.setPreviousTipDismissalTime(Date.now()),this.isToolTipSafeToBeDisplayed=!0):"NativeToolTipDisplayStarted"===a?(d.incrementCounter("nativeToolTipShown:".concat(k)),this.dismissalHandler(f)):"NativeTipNotInView"===a?(this.isToolTipSafeToBeDisplayed=!0,"iPhone"===g.platformCheck()?(d.incrementCounter("nativeToolTipNotInView:".concat(k)),
this.collection.elementAnchorList.splice(f,1)):(0<b.get("retryCount")?(this.nativeToolTipDisplayBackoffMap[b.get("identifier")]=!1,u.view.moveToolTipToEndOfList(b)):(d.incrementCounter("nativeToolTipNotInView:".concat(k)),this.collection.elementAnchorList.splice(f,1)),b.get("nestedSAList")&&u.utils.isGuidedTour(b)&&u.view.handleGuidedTour(b,"Success",a))):"NativeTipDismissed"===a?(this.setPreviousTipDismissalTime(Date.now()),d.incrementCounter("nativeToolTipDismissed:".concat(k)),this.isToolTipSafeToBeDisplayed=
!0):"NativeToolTipInvalid"===a||"NativeAnchorNotPresent"===a?(d.incrementCounter(a.charAt(0)+a.slice(1)+":".concat(k)),this.isToolTipSafeToBeDisplayed=!0,this.collection.elementAnchorList.splice(f,1),b.get("nestedSAList")&&u.utils.isGuidedTour(b)&&u.view.handleGuidedTour(b,"Success",a)):"NativeToolTipCrossClick"===a?(this.setPreviousTipDismissalTime(Date.now()),d.incrementCounter("nativeToolTipCrossClicked:".concat(k)),this.isToolTipSafeToBeDisplayed=!0,u.view.logMetricsUserDismissalTip(Date.now(),
b),u.view.dismissByUserHandler(b),u.view.dismissAndRender()):"NativeToolTipCTAClick"===a&&(this.setPreviousTipDismissalTime(Date.now()),this.isToolTipSafeToBeDisplayed=!0,u.view.countLogger("native_tooltip_cta_clicked",b.get("identifier")),b.get("nestedSAList")?u.view.renderNestedSA(b):u.view.logMetricsUserDismissalTip(Date.now(),b),u.view.dismissAndRender())},handleGuidedTour:function(a,b,c){var d=a.get("elementAnchor");d=l.getIndexByAnchor(this.collection.elementAnchorList,d);var e="Error"===b?
"native_tool_tip_error":"native_tool_tip_not_in_view";if("Error"===b||"NativeTipNotInView"===c)this.collection.elementAnchorList.splice(d,1),u.view.countLogger(e,a.get("identifier"));u.view.renderNestedSA(a);u.view.dismissAndRender()},renderNestedSA:function(a){try{var b=JSON.parse(a.get("nestedSAList"));b&&0<b.length&&k.dispatchShoppingAidEvent(b)}catch(G){u.view.countLogger("ShoppingAids_illegal_input_nested_shopping_aid",a.get("identifier"))}},displayNativeToolTip:function(b){var c=this.getPageType(),
d={pageType:c};b.set({shouldIncludeAccessibilityChanges:!0});b.set({elementBackgroundColor:a.DefaultElementBackgroundColor});b.set({elementTextColor:a.DefaultElementTextColor});q.when("com.amazon.mobile.mshop.shoppingaids").execute(function(a){a=r.cordova.require("cordova/exec");var e={};e.ToolTips=[b.attributes];if("iPhone"===g.platformCheck()){if(b.get("onDemand")){var k=b.get("successResponse");var f=b.get("failureResponse");b.unset("failureResponse");b.unset("successResponse")}e=[e,d]}else e.ToolTips[0][x.featureAttribution]=
A.androidFeatureAttribution,e.ToolTips[0].pageType=c;document.hidden?this.isToolTipSafeToBeDisplayed=!0:a(function(a){u.view.successCallbackFunction(a,b,k,f)},function(a){u.view.errorCallbackFunction(a,b)},"MShopShoppingAids","displayNativeToolTip",e)})},moveToolTipToEndOfList:function(a){var b=a.get("elementAnchor"),c=l.getIndexByAnchor(this.collection.elementAnchorList,b);this.collection.elementAnchorList.splice(c,1);c={};c[b]=a.get("sequenceNum");this.collection.elementAnchorList.push(c);u.utils.updateRetryCount(a)},
postQTipRender:function(){if(this.collection.elementAnchorList){var b=this.collection.elementAnchorList;this.clearRender();for(var c=0;c<b.length;c++){var d=l.processAnchor(Object.keys(b[c])[0],a.regex.anchorSpliterRegex);if(!document.hidden){var e=this.collection.at(d);this.identifier=e.get("identifier");l.setDependentElement(e);if(!this.isToolTipTimeGapLessThanThreshold(e)&&this.isToolTipSafeToBeDisplayed)if("NATIVE"===e.get("elementDisplayType")&&!0!==this.nativeToolTipDisplayBackoffMap[e.get("identifier")])this.isToolTipSafeToBeDisplayed=
!1,this.displayNativeToolTip(e);else{var f=e.get("onDemand");if(null!==f&&f&&(f=e.get("failureResponse"))&&"function"===typeof f){var m=a.errorCodes.ALREADY_RENDERED;f(m);e.set({failureResponse:null})}if(e.get("nestedSAList"))try{var y=JSON.parse(e.get("nestedSAList"));if(y&&0<y.length&&!l.isElementPresent(d)){this.remove();this.collection.elementAnchorList.splice(c,1);k.dispatchShoppingAidEvent(y);break}}catch(I){this.countLogger("ShoppingAids_illegal_input_nested_shopping_aid",e.get("identifier"))}e.get("scrollToAnchor")&&
l.isElementPresent(d)&&!l.isElementVisible(d)&&(this.scrollPageToAnchor(d,e.get("anchorScrollOffset")),this.adjustCoordTimeoutId=setTimeout(this.adjustCoordinates.bind(this),a.timer.maxAnchorScrollTime+a.timer.anchorReAdjustTime,d,e.get("elementArrowPosition"),e.get("offsetX"),e.get("offsetY"),!1));this._conditionalRetryUpdate(e,c);if(l.isElementVisible(d)&&this.isEventCheckSatisfied(e)&&l.isDependentCheckSatisfied(e)&&g.isDefined(b[c])){e.get("triggerDependentCheck")&&(e=l.onDemandContextAwareSubstitution(e,
a.ShoppingAidsTooltips));this.currentSequence=b[c][d];this.anchor=d;b=e.get("elementStartOffset");if(isNaN(b)||0>b)b=a.timer.defaultStartOffset;g.hasNoPopover(this.popoverClass,this.searchSugesstions,this.searchFilterPage)||l.isShoppingAidOverPopoverVisible(e.get("popoverAnchor"),e.get("elementAnchor"))?(c=e.get("dismissalType"),y=e.get("toolTipUXChangeAllocatedTreatment"),"hotspot"===e.get("tipType")?this.removeAutoDismissalHandlers():(this._shouldFollowDefaultUXExperience(y,e)||u.view.bindScrollHandlers(d,
e),g.isDefined(c)&&-1!==c.toUpperCase().indexOf("USER")||!this._shouldFollowDefaultUXExperience(y,e)?(this.removeAutoDismissalHandlers(),g.isDefined(c)&&"USER"!==c.toUpperCase()&&this._shouldFollowDefaultUXExperience(y,e)&&u.view.clickEventHandlerForUserDismissalTip(d)):this.addAutoDismissalHandlers()),g.logClientSideWeblabMetrics(e,p.SHOPPINGAIDS_WEBLAB_IN_POST_QTIP_RENDER),this.renderTimeoutId=setTimeout(this.render.bind(this),b,e)):this.renderTimeoutId=setTimeout(this.postQTipRender.bind(this),
b);break}else if(f=e.get("onDemand"),null!==f&&f&&(f=e.get("failureResponse"))&&"function"===typeof f)m=a.errorCodes.UNKNOWN,l.isElementVisible(d)?this.isEventCheckSatisfied(e)?l.isDependentCheckSatisfied(e)||(m=a.errorCodes.DEPENDANT_CHECK_NOT_SATISFIED):m=a.errorCodes.EVENT_CHECK_NOT_SATISFIED:m=a.errorCodes.ELEMENT_NOT_VISIBLE,f(m),e.set({failureResponse:null})}}}g.isDefined(this.renderTimeoutId)||(this.renderTimeoutId=setTimeout(this.postQTipRender.bind(this),a.timer.defaultStartOffset))}},isToolTipTimeGapLessThanThreshold:function(a){if(a.get("invokingEventType")||
a.get("onDemand"))return!1;a=Date.now()-this.previousTipDismissalTime;return 0<a&&a<b.intervalBetweenSuccessiveTips?!0:!1},isEventCheckSatisfied:function(a){var b=a.get("invokingEventType"),c=a.get("invokingEventElement"),d=this.collection.invokingEventsMap[b];if(b&&c&&(!g.isDefined(d)||-1===d.indexOf(c)))return!1;b&&c&&(g.isDefined(d)||-1!==d.indexOf(c))&&(b=a.get("triggerDependentTargeting"),g.isDefined(b)&&(a.set({clientSideTargetting:b}),a.set({triggerDependentCheck:!0})));return!0},dismissAndRender:function(a){var b=
function(){this.clearAdjustCoordinates();this.clearRender();this.fadeOut(function(){this.nextQTip()})};g.isDefined(a)&&g.isDefined(a.type)&&(this.dismissalEvent=a.type);var c=h.throttle(b.bind(this),1E3);a&&a.data&&"dismissalByUser"===a.data.eventType?b.call(this):c.call(this)},dismissWithId:function(b,d,e){var k=c(this.qtipsId)[0];k&&k.getAttribute(a.view.saDOMNameAttribute)===b||g.isDefined(this.renderTimeoutId)&&this.identifier===b?(this._stopToolTips(),d&&"function"===typeof d&&d()):e&&"function"===
typeof e&&e(a.errorCodes.SA_NOT_DISPLAYED)},_stopToolTips:function(){this.clearAdjustCoordinates();this.clearRender();this.fadeOut(this.remove.bind(this))},dismissOrRender:function(a){!this.isBlurSet&&a&&"blur"===a.type?(this.clearRender(),this.clearFadeOut(),this.clearAdjustCoordinates(),this.fadeOut(this.remove.bind(this)),this.isBlurSet=!0,this.isWindowVisible=w):this.isBlurSet&&a&&"focus"===a.type&&(this.isWindowVisible||this.postQTipRender(),this.isBlurSet=!1)},visibilityChange:function(){this.isWindowVisible!==
w&&!0!==this.isWindowVisible||"hidden"!==document.visibilityState?!1===this.isWindowVisible&&"hidden"!==document.visibilityState&&(this.postQTipRender(),this.isWindowVisible=!0):(this.isBlurSet||(this.clearFadeOut(),this.clearRender(),this.clearAdjustCoordinates(),this.fadeOut(this.remove.bind(this))),this.isWindowVisible=!1)},clearRender:function(){g.isDefined(this.renderTimeoutId)&&(clearTimeout(this.renderTimeoutId),delete this.renderTimeoutId);g.isDefined(this.dismissalTimeoutId)&&clearTimeout(this.dismissalTimeoutId);
g.isDefined(this.scrollTimeoutId)&&(clearTimeout(this.scrollTimeoutId),delete this.scrollTimeoutId)},clearAdjustCoordinates:function(){g.isDefined(this.adjustCoordTimeoutId)&&(clearTimeout(this.adjustCoordTimeoutId),delete this.adjustCoordTimeoutId)},clearFadeOut:function(){g.isDefined(this.fadeTimeoutId)&&clearTimeout(this.fadeTimeoutId)},postScrollToPageAnchor:function(a){g.isDefined(this.scrollTimeoutId)||(this.scrollTimeoutId=setTimeout(this.postQTipRender.bind(this),a))},scrollPageToAnchor:function(b,
d){var e=c(b).offset().top-d;e=parseInt(Math.abs(e-r.scrollY),10)*a.timer.scrollTimePerPixel;e=Math.min(a.timer.maxAnchorScrollTime,Math.max(a.timer.minAnchorScrollTime,e));c("html, body").animate({scrollTop:c(b).offset().top-d},{duration:e,start:this.postScrollToPageAnchor(e)})},hasNoPopover:function(){return g.hasNoPopover(this.popoverClass,this.searchSugesstions,this.searchFilterPage)},createUserDismissalOkayGotItToolTip:function(b){var c=this._createElement(a.templates.dismissOkayGotItToolTipTemplate,
b),d=document.createElement("BUTTON");b.get("dismissalButtonText")?d.innerHTML=b.get("dismissalButtonText"):d.innerHTML="OKAY, GOT IT";d.addEventListener("click",function(){u.view.logMetricsUserDismissalTip(Date.now(),b);u.view.dismissByUserHandler(b);u.view.dismissAndRender()});"userOkayGotItBlackBorder"===b.get("dismissalType")?(d.style.cssText="background-color: Transparent; border-width: thin; text-align: center; border-color: black; border-style: solid; display: table-row; float: right;",d.style.color=
b.get("elementTextColor")):(d.style.cssText="background-color: Transparent; border: 0; padding-top: 2.5%; padding-right: 2%; display: table-row; float: right;text-decoration: underline;","userOkayGotItWhiteText"===b.get("dismissalType")?d.style.color="white":d.style.color=b.get("elementTextColor"));c.find(".tooltip-userdismissable").append(d);return c},createUserActionToolTip:function(b){var c=this._createElement(a.templates.userActionToolTipTemplate,b),d=c.find("#qtip-button")[0];b.get("nestedSAList")?
d.addEventListener("click",function(){try{var a=JSON.parse(b.get("nestedSAList"));a&&0<a.length&&k.dispatchShoppingAidEvent(a)}catch(B){u.view.countLogger("ShoppingAids_illegal_input_nested_shopping_aid",b.get("identifier"))}u.view.dismissAndRender()}):d.addEventListener("click",function(){u.view.logMetricsUserDismissalTip(Date.now(),b);u.view.dismissAndRender()});return c},createUpdatedUserActionToolTip:function(b){var c=b.get("highlighter")&&!0===b.get("highlighter")?a.templates.userActionToolTipTemplate_V3:
a.templates.userActionToolTipTemplate_V2;c=this._createElement(c,b);c.find("#qtip-button")[0].addEventListener("click",function(){u.view.countLogger("tooltip_cta_clicked",b.get("identifier"));b.get("nestedSAList")?u.view.renderNestedSA(b):u.view.logMetricsUserDismissalTip(Date.now(),b);u.view.dismissAndRender()});return c},logMetricsUserDismissalTip:function(a,b){a=Math.ceil(4*((a-u.view.tipStartTime)/b.get("elementDuration")));this.countLogger("tooltip_dismissed",b.get("identifier"));this.countLogger("tooltip_dismissal_quarter_"+
a,b.get("identifier"))},_isNullOrControlTreatment:function(a){return!g.isDefined(a)||"C"===a.toUpperCase()},_shouldFollowDefaultUXExperience:function(a,b){return g.isPlatformSupportedForToolTipUxExperiment()?b.get("videoSource")?!0:this._isNullOrControlTreatment(a):!0},_isTreatmentT1:function(a){return g.isDefined(a)&&"T1"===a.toUpperCase()},_replaceToolTipWidth:function(a,b){return a.replace(/<%\s*newUXToolTipWidth\s*%>/,b)},_generateTemplateBasedUponTextDirection:function(b){b=b.get("elementValue");
var c=a.templates.dismissNew36cross36Template;"rtl"===document.dir&&(c=a.templates.dismissNew36cross36TemplateRtl);return g.isDefined(b)?21<b.length?this._replaceToolTipWidth(c,90):17<b.length?this._replaceToolTipWidth(c,85):11<b.length?this._replaceToolTipWidth(c,78):this._replaceToolTipWidth(c,75):this._replaceToolTipWidth(c,78)},addAndPosition:function(b,d){var e,f=d.get("toolTipUXChangeAllocatedTreatment");if(d.get("videoSource")||!g.isPlatformSupportedForToolTipUxExperiment())d.set({elementBackgroundColor:a.DefaultElementBackgroundColor}),
d.set({elementTextColor:a.DefaultElementTextColor}),d.set({elementBorderColor:a.DefaultElementBorderColor});var l=e=d.get("dismissalType")&&u.utils.isGuidedTour(d)?this.createUpdatedUserActionToolTip(d):d.get("elementCTA")?this.createUserActionToolTip(d):"userCross"===d.get("dismissalType")?this._shouldFollowDefaultUXExperience(f,d)?this._createElement(a.templates.dismissCrossToolTipTemplate,d):this._createElement(this._generateTemplateBasedUponTextDirection(d),d):d.get("dismissalType")&&-1!==d.get("dismissalType").indexOf("userOkayGotIt")?
this._shouldFollowDefaultUXExperience(f,d)?this.createUserDismissalOkayGotItToolTip(d):this._createElement(this._generateTemplateBasedUponTextDirection(d),d):"hotspot"===d.get("tipType")&&g.isDefined(d.get("nestedSAList"))?this._createElement(a.templates.hotspotTemplate,d):this._shouldFollowDefaultUXExperience(f,d)?this._createElement(a.templates.defaultTemplate,d):this._createElement(this._generateTemplateBasedUponTextDirection(d),d);if(d.get("videoSource")){d.get("videoThumbnail")||(l=d.get("videoSource").split(","),
d.set({videoThumbnail:l[0].replace(/^\s*/,"").replace(/\s*$/,"")}),1<l.length?d.set({videoSource:l[1].replace(/^\s*/,"").replace(/\s*$/,"")}):d.set({videoSource:""}));l=this._createElement(a.templates.preVideoTemplate,d);var m=this._createElement(a.templates.dismissIconTemplate,d);e.find("span.qtips-text").html(m).append(l);l=e}this.setElement(this.pageAnchor,l);c(this.qtipsId).hide();this.addStaticToolTipHandlers(d);var y=this;("userCross"===d.get("dismissalType")||u.utils.isGuidedTour(d)||g.isDefined(f)&&
this._isTreatmentT1(f))&&c("#tooltip-dismiss-cross").click(function(){u.view.unbindScrollHandler();u.view.logMetricsUserDismissalTip(Date.now(),d);u.view.dismissByUserHandler(d);u.view.dismissAndRender()});c(l).click(function(){if("hotspot"===d.get("tipType"))k.dispatchShoppingAidEvent(JSON.parse(d.get("nestedSAList"))),u.view.dismissAndRender();else if(d&&d.attributes){var a=d.attributes.identifier;g.isDefined(y.terminationCallback)&&y.terminationCallback({identifier:a})}});if(0<c(this.qtipsId).length){f=
c(r).width()*a.view.maxWidthFactor;f=f>=a.view.maxWidth?a.view.maxWidth:f;if(d.get("videoSource")&&d.get("videoWidth")>c(this.qtipsId).width()){m=c(this.qtipsId).width();c(this.qtipsId).width(d.get("videoWidth")+a.view.deltaX);var p=d.get("videoWidth");a.regex.positionRightRegex.test(d.get("elementArrowPosition"))&&(m=parseInt(c(this.qtipsId).css("left"),10)-(p-m)-a.view.deltaX,c(this.qtipsId).css({left:m}))}c(this.qtipsId).width()>f&&(c(this.qtipsId).width(f),d.set({videoWidth:f-a.view.deltaX}));
this.setThumbnailCss(e,d);if(b!==this.pageAnchor)if("hotspot"===d.get("tipType")){if(!this.adjustHotspotPosition(b,d.get("elementPositionY"),d.get("elementPositionX")))return}else if(!this.adjustCoordinates(b,d.get("elementArrowPosition")||this.defaultArrowPosition,d.get("offsetX"),d.get("offsetY"),!1))return;return l}},setThumbnailCss:function(b,e){if(e.get("videoSource")){var g=.25*c(this.qtipsId).width(),f=.15*c(this.qtipsId).width(),k=b.find("i#qtip-dismiss-cross").height();b.find("div#qtip-thumbnail").css({width:g+
"px",height:f+"px"});b.find("img#qtip-thumbnail-image").css({width:g+"px",height:f+"px"});b.find("img#qtip-thumbnail-image").attr("aria-hidden","true");b.find("img#qtip-thumbnail-play").css({width:.64*f+"px",height:.64*f+"px"});var l=c(this.qtipsId).height()>f?c(this.qtipsId).height():f;b.find("img#qtip-thumbnail-play").css({left:(g-.64*f)/2+"px",top:(l-.64*f)/2+"px"});b.find("i#qtip-dismiss-cross").css({position:"relative",right:"0px",top:(l-k)/2+"px"});try{var m=JSON.parse(e.get("tooltipUIStrings")).videoTooltipPlayButtonString}catch(I){d.incrementCounter("invalid_ui_string_input"),
m=a.VideoPlayButtonDefaultAltText}b.find("img#qtip-thumbnail-play").attr("aria-label",m)}},animateIn:function(b){c(this.qtipsId).fadeIn(a.timer.defaultFadeTime);var d=b.get("elementBounceDuration");0<d&&"hotspot"!==b.get("tipType")&&setTimeout(this.bounceAnimate.bind(this),0,d,b)},animateVideo:function(b){var d=this,e=c(d.qtipsId).prop("classList"),g=!1,f;for(f=0;f<e.length;f++)a.regex.positionTopRegex.test(e[f])&&(g=!0);c(d.qtipDismissIcon).css({top:""});e=d._createElement(a.templates.videoTemplate,
b);d._createElement(a.templates.dismissIconTemplate,b);var k=c(d.qtipThumbnailTextId).position();f=c(d.qtipsId).position().top;var l=c(d.qtipsId).height();c(d.qtipThumbnailId).remove();c(d.qtipThumbnailTextId).css({"padding-left":"","padding-bottom":"10px"});var m=c(d.qtipThumbnailTextId).height();c(d.qtipThumbnailTextId).css({position:"absolute",left:k.left+"px",top:k.top+"px"});c(d.qtipsId).find("span.qtips-text").append(e);c(d.qtipThumbnailTextId).animate({left:"-\x3d"+k.left+"px"},{duration:800,
queue:!1,complete:function(){c(d.qtipThumbnailTextId).css({position:"",left:"",top:""})}});c(d.qtipVideoId).removeAttr("controls");g?(g=e.height(),c(d.qtipVideoId).css({height:e.height()}),c(d.qtipVideoId).attr("poster",b.get("videoThumbnail")),e.hide(),e.animate({height:"toggle"},{duration:1E3,queue:!1,complete:function(){c(d.qtipVideoId).attr("controls","")}})):(g=e.height()+m,c(d.qtipVideoId).css({height:e.height()}),c(d.qtipVideoId).attr("poster",b.get("videoThumbnail")),e.hide(),c(d.qtipsId).css({top:f+
l+"px"}),e.animate({height:"toggle"},{duration:800,queue:!1,complete:function(){c(d.qtipVideoId).attr("controls","")}}),c(d.qtipsId).animate({marginTop:-g+"px"},{duration:1E3,queue:!1,complete:function(){}}).css("overflow","visible"))},bounceAnimate:function(b,d){var e=this,g=d.get("toolTipUXChangeAllocatedTreatment"),f=a.bounceParameters.amplitude;this._shouldFollowDefaultUXExperience(g,d)||c(r).bind(u.view.scrollAnimationStopEvent,function(){e.animateIntervalId&&(clearInterval(e.animateIntervalId),
e.animateIntervalId=w);c(r).unbind(u.view.scrollAnimationStopEvent)});this.animate({delay:10,duration:b,delta:function(b){return Math.pow(Math.E,-1*a.bounceParameters.gamma*b)*Math.cos(a.bounceParameters.beta*b-a.bounceParameters.alpha)},anchor:this.qtipsId,basePosition:c(this.qtipsId).position().top,step:function(a){c(this.anchor).css({top:this.basePosition-f*a+"px"})}})},animate:function(a){var b=Date.now();this.tipStartTime=b;this.animateIntervalId&&(clearInterval(this.animateIntervalId),this.animateIntervalId=
w);this.animateIntervalId=setInterval(function(){var c=(Date.now()-b)/a.duration;1<c&&(c=1);var d=a.delta(c);a.step(d);1===c&&(clearInterval(this.animateIntervalId),this.animateIntervalId=w)}.bind(this),a.delay)},fadeOut:function(b){g.isDefined(b)?0<c(this.qtipsId).length?(c(this.qtipsId).fadeOut(a.timer.defaultFadeTime,b.bind(this)),-1!==l.getIndexByAnchor(this.collection.elementAnchorList,this.anchor)?this.setPreviousTipDismissalTime(0):this.setPreviousTipDismissalTime(Date.now())):(b=b.bind(this),
b()):c(this.qtipsId).fadeOut(a.timer.defaultFadeTime);g.isDefined(this.animateIntervalId)&&(clearInterval(this.animateIntervalId),this.animateIntervalId=w)},nextQTip:function(){this.clearFadeOut();this.clearAdjustCoordinates();this.isAnchorDescriptionUpdated&&(c(this.anchor).removeAttr("aria-describedby"),this.isAnchorDescriptionUpdated=!1);g.isDefined(this.collection.elementAnchorList)&&0<this.collection.elementAnchorList.length?(this.remove(),this.postQTipRender()):this.stopQTips()},stopQTips:function(){this.removeAutoDismissalHandlers();
this.removeStaticToolTipHandlers();var b=this.collection.invokingEventsMap,d;for(d in b)if(b.hasOwnProperty(d)&&g.isDefined(b[d]))for(var e=b[d],f=0;f<e.length;f++)d.toLowerCase()===a.PartnerEvent?g.detachTrigger(e[f],this.collection.auiTriggerHandler[e[f]].callback):c(e[f]).unbind(d,this.collection.registerEvent);this.collection.invokingEventsMap={};this.fadeOut(this.remove.bind(this));this.clearRender();this.clearAdjustCoordinates()},removeAllDirectionToolTipArrowClasses:function(){c(this.qtipsId).removeClass("qtips-arrow-topleft");
c(this.qtipsId).removeClass("qtips-arrow-topright");c(this.qtipsId).removeClass("qtips-arrow-topmiddle");c(this.qtipsId).removeClass("qtips-arrow-bottomleft");c(this.qtipsId).removeClass("qtips-arrow-bottomright");c(this.qtipsId).removeClass("qtips-arrow-bottommiddle")},adjustCoordinates:function(b,e,f,g,k){var l=this,m=c(this.qtipsId);if(0>=m.length)return!1;k&&(this.removeAllDirectionToolTipArrowClasses(),k="qtips-arrow-"+e,c(this.qtipsId).hasClass(k)||c(this.qtipsId).addClass(k));k=c(b)[0].getBoundingClientRect();
var y=c(b).offset().top-k.top||0;b=a.view.arrowHeight+a.view.marginFactor*a.view.deltaY;if("topleft"===e){var p=k.left;var A=k.bottom+a.view.arrowHeight+a.view.deltaY}else if("bottomleft"===e)p=k.left,A=k.top-Math.abs(m.height())-b;else if("bottomright"===e)p=k.right-Math.abs(m.width())-a.view.deltaX,A=k.top-Math.abs(m.height())-b;else if("topright"===e)p=k.right-Math.abs(m.width())-a.view.deltaX,A=k.bottom+a.view.arrowHeight+a.view.deltaY;else if("topmiddle"===e){var n=k.right-k.left;p=k.left+parseFloat(((n-
Math.abs(m.width())-a.view.deltaX)/2).toFixed(2));A=k.bottom+a.view.arrowHeight+a.view.deltaY;n=parseFloat((Math.abs(m.width())/2).toFixed(2));this._setClassLeftStyleProperty("qtips-arrow-topmiddle",n+"px");this._setHighlighterClassLeftStyleProperty("sa-highlighter-topmiddle",n+"px")}else if("bottommiddle"===e)n=k.right-k.left,p=k.left+parseFloat(((n-Math.abs(m.width())-a.view.deltaX)/2).toFixed(2)),A=k.top-Math.abs(m.height())-b,n=parseFloat((Math.abs(m.width())/2).toFixed(2)),this._setClassLeftStyleProperty("qtips-arrow-bottommiddle",
n+"px"),this._setHighlighterClassLeftStyleProperty("sa-highlighter-bottommiddle",n+"px");else return!1;f&&(p+=f/100*m.width());g&&(A+=g/100*m.height());f=r.innerHeight||c(r).height();0>A?(A=k.bottom+a.view.arrowHeight+a.view.deltaY,"bottomleft"===e?(c(this.qtipsId).removeClass("qtips-arrow-bottomleft").addClass("qtips-arrow-topleft"),c(this.highlighterId).removeClass("sa-highlighter-bottomleft").addClass("sa-highlighter-topleft")):"bottomright"===e?(c(this.qtipsId).removeClass("qtips-arrow-bottomright").addClass("qtips-arrow-topright"),
c(this.highlighterId).removeClass("sa-highlighter-bottomright").addClass("sa-highlighter-topright")):"bottommiddle"===e&&(c(this.qtipsId).removeClass("qtips-arrow-bottommiddle").addClass("qtips-arrow-topmiddle"),c(this.highlighterId).removeClass("sa-highlighter-bottommiddle").addClass("sa-highlighter-topmiddle"),n=parseFloat((Math.abs(m.width())/2).toFixed(2)),this._setClassLeftStyleProperty("qtips-arrow-topmiddle",n+"px"),this._setHighlighterClassLeftStyleProperty("sa-highlighter-topmiddle",n+"px"))):
k.bottom+Math.abs(m.height())+b>f&&(A=k.top-Math.abs(m.height())-b,"topleft"===e?(c(this.qtipsId).removeClass("qtips-arrow-topleft").addClass("qtips-arrow-bottomleft"),c(this.highlighterId).removeClass("sa-highlighter-topleft").addClass("sa-highlighter-bottomleft")):"topright"===e?(c(this.qtipsId).removeClass("qtips-arrow-topright").addClass("qtips-arrow-bottomright"),c(this.highlighterId).removeClass("sa-highlighter-topright").addClass("sa-highlighter-bottomright")):"topmiddle"===e&&(c(this.qtipsId).removeClass("qtips-arrow-topmiddle").addClass("qtips-arrow-bottommiddle"),
c(this.highlighterId).removeClass("sa-highlighter-topmiddle").addClass("sa-highlighter-bottommiddle"),n=parseFloat((Math.abs(m.width())/2).toFixed(2)),this._setClassLeftStyleProperty("qtips-arrow-bottommiddle",n+"px"),this._setHighlighterClassLeftStyleProperty("sa-highlighter-bottommiddle",n+"px")));A+=y;f=r.innerWidth||c(r).width();0>=p&&k.left+Math.abs(m.width())+a.view.deltaX>=f?(m=Math.abs(m.width())+p,c(this.qtipsId).width(m),p=a.view.deltaX):p+Math.abs(m.width())+a.view.deltaX>=f&&0>=k.right-
Math.abs(m.width())-a.view.deltaX?(e=p+Math.abs(m.width())+a.view.deltaX-f,m=Math.abs(m.width())-e,c(this.qtipsId).width(m)):0>=p?"topright"===e?(p=k.left+a.view.deltaX,c(this.qtipsId).removeClass("qtips-arrow-topright").addClass("qtips-arrow-topleft"),c(this.highlighterId).removeClass("sa-highlighter-topright").addClass("sa-highlighter-topleft")):"bottomright"===e?(p=k.left+a.view.deltaX,c(this.qtipsId).removeClass("qtips-arrow-bottomright").addClass("qtips-arrow-bottomleft"),c(this.highlighterId).removeClass("sa-highlighter-bottomright").addClass("sa-highlighter-bottomleft")):
"topmiddle"==e?(p=k.left+a.view.deltaX,c(this.qtipsId).removeClass("qtips-arrow-topmiddle").addClass("qtips-arrow-topleft"),c(this.highlighterId).removeClass("sa-highlighter-topmiddle").addClass("sa-highlighter-topleft")):"bottommiddle"==e&&(p=k.left+a.view.deltaX,c(this.qtipsId).removeClass("qtips-arrow-bottommiddle").addClass("qtips-arrow-bottomleft"),c(this.highlighterId).removeClass("sa-highlighter-bottommiddle").addClass("sa-highlighter-bottomleft")):p+Math.abs(m.width())+a.view.deltaX>=f&&(f=
k.top-Math.abs(m.height())-b,g&&(f+=g/100*m.height()),"topleft"===e?(p=k.right-Math.abs(m.width())-a.view.deltaX,c(this.qtipsId).removeClass("qtips-arrow-topleft").addClass("qtips-arrow-topright"),c(this.highlighterId).removeClass("sa-highlighter-topleft").addClass("sa-highlighter-topright")):"bottomleft"===e?(p=k.right-Math.abs(m.width())-a.view.deltaX,0>f?(c(this.qtipsId).removeClass("qtips-arrow-topleft").addClass("qtips-arrow-topright"),c(this.highlighterId).removeClass("sa-highlighter-topleft").addClass("sa-highlighter-topright")):
(c(this.qtipsId).removeClass("qtips-arrow-bottomleft").addClass("qtips-arrow-bottomright"),c(this.highlighterId).removeClass("sa-highlighter-bottomleft").addClass("sa-highlighter-bottomright"))):"topmiddle"===e?(p=k.right-Math.abs(m.width())-a.view.deltaX,c(this.qtipsId).removeClass("qtips-arrow-topmiddle").addClass("qtips-arrow-topright"),c(this.highlighterId).removeClass("sa-highlighter-topmiddle").addClass("sa-highlighter-topright")):"bottommiddle"===e&&(p=k.right-Math.abs(m.width())-a.view.deltaX,
0>f?(c(this.qtipsId).removeClass("qtips-arrow-topmiddle").addClass("qtips-arrow-topright"),c(this.highlighterId).removeClass("sa-highlighter-topmiddle").addClass("sa-highlighter-topright")):(c(this.qtipsId).removeClass("qtips-arrow-bottommiddle").addClass("qtips-arrow-bottomright"),c(this.highlighterId).removeClass("sa-highlighter-bottommiddle").addClass("sa-highlighter-bottomright"))));"function"===typeof h.$.withoutRtl?(h.$.withoutRtl(function(){l._setTooltipsAttributesJquery(p,A)}),d.incrementCounter("QTipsWebLibrary:withoutRTL_supported")):
(this._setTooltipsAttributesJavascript(p,A),d.incrementCounter("QTipsWebLibrary:withoutRTL_not_supported"));return!0},adjustHotspotPosition:function(a,b,d){if(0>=c(this.qtipsId).length)return!1;var e=c(a)[0].getBoundingClientRect();a=c(a).offset().top-b;d=e.left+d;c(this.qtipsId).css({left:d+"px",top:a+"px",visibility:"visible"});return!0},_setTooltipsAttributesJquery:function(a,b){c(this.qtipsId).css({left:a+"px",top:b+"px",visibility:"visible"})},_setTooltipsAttributesJavascript:function(a,b){document.getElementById("qtips").style.cssText=
"left:"+a+"px;top:"+b+"px;visibility: visible;"},_setClassLeftStyleProperty:function(a,b){var c=document.createElement("style");document.head.appendChild(c);(c=c.sheet)&&(c.insertRule?c.insertRule("."+a+"::after { left:"+b+" }",0):c.addRule&&c.addRule("."+a+"::after","left:"+b))},_setHighlighterClassLeftStyleProperty:function(a,b){var c=document.createElement("style");document.head.appendChild(c);(c=c.sheet)&&(c.insertRule?c.insertRule("."+a+" { left:"+b+" }",0):c.addRule&&c.addRule("."+a,"left:"+
b))},_conditionalRetryUpdate:function(b,c){this.dismissalEvent===a.ScrollEvent?this.dismissalEvent=a.EmptyString:(u.utils.updateRetryCount(b),this.removeIneligibleQtip(b,c))},remove:function(){c(this.qtipsId)&&c(this.qtipsId)[0]!==w&&this._removeElement(this.qtipsId)},removeIneligibleQtip:function(a,b){0>a.get("retryCount")&&g.isDefined(b)&&(this.collection.elementAnchorList.splice(b,1),this.clearRender())},setDismissalCallback:function(a){this.dismissalCallback=a},setTerminationCallback:function(a){this.terminationCallback=
a},setPreviousTipDismissalTime:function(a){this.previousTipDismissalTime=a},countLogger:function(){},setCountLogger:function(a){this.countLogger=a}});u.view=new e;u.addStyles();return u})})();(function(){q.register("QTipsConstants",function(){return{view:{deltaX:20,deltaY:5,marginFactor:4,arrowHeight:8,maxWidth:300,maxWidthFactor:.8,saDOMNameAttribute:"data-name",retryCount:4},bounceParameters:{alpha:10,beta:25,gamma:1.5,amplitude:7},timer:{defaultStartOffset:3E3,defaultDismissalCallbackTime:800,
defaultAnimationTime:7E3,defaultFadeTime:400,minAnchorScrollTime:400,maxAnchorScrollTime:3E3,anchorReAdjustTime:3E3,scrollTimePerPixel:1,searchSuggestionPollTime:300},regex:{anchorSpliterRegex:/\|/g,templateSpliterRegex:/<%\s*\w*\s*%>/g,numberRegex:/^(\-|\+)?([0-9]+|Infinity)$/,positionRightRegex:/right/,positionTopRegex:/top/},popOverAnchors:{popoverClass:".a-popover",searchSugesstions:".s-suggestion-container",searchFilterPage:".sx-page.sx-filter-page.sx-animable"},templates:{dismissNew36cross36Template:'\x3cdiv id\x3d"qtips" class\x3d"qtips-background qtips-arrow-\x3c% elementArrowPosition %\x3e"\x3e  \x3cstyle\x3e .qtips-background { top: \x3c% elementY %\x3epx; left: \x3c% elementX    %\x3epx; padding : 8px 0px 8px 0px; background-color: \x3c% elementBackgroundColor %\x3e; color: \x3c% elementTextColor %\x3e ; border-radius: 12px;} .qtips-background:after { border-color : \x3c% elementBackgroundColor %\x3e transparent;}\x3c/style\x3e \x3cdiv id \x3d \'tooltip-cross-dismissal\' style\x3d"display: table; width: 100%; padding-left: 12px; padding-right: 0px;"\x3e\x3cspan class\x3d"qtips-text"  style\x3d"display:table-cell; vertical-align: middle;width: \x3c% newUXToolTipWidth %\x3e%; /*margin-bottom: 8px; margin-top: 8px;*/"\x3e \x3c% elementValue %\x3e \x3c/span\x3e \x3cbutton id\x3d"tooltip-dismiss-cross" style\x3d"display: table-cell; text-align: center;  background: \x3c% elementBackgroundColor %\x3e;  border: none; padding: 0px;"\x3e\x3ci class\x3d"a-icon a-icon-close-white" tabindex\x3d"0" aria-label\x3d"Close \x3c% elementValue %\x3e" role\x3d"img" style\x3d"margin:10px 12px 10px 10px;"\x3e\x3c/i\x3e\x3c/button\x3e\x3c/div\x3e\x3c/div\x3e',
dismissNew36cross36TemplateRtl:'\x3cdiv id\x3d"qtips" class\x3d"qtips-background qtips-arrow-\x3c% elementArrowPosition %\x3e"\x3e  \x3cstyle\x3e .qtips-background { top: \x3c% elementY %\x3epx; left: \x3c% elementX    %\x3epx; padding : 8px 0px 8px 0px; background-color: \x3c% elementBackgroundColor %\x3e; color: \x3c% elementTextColor %\x3e ; border-radius: 12px;} .qtips-background:after { border-color : \x3c% elementBackgroundColor %\x3e transparent;}\x3c/style\x3e \x3cdiv id \x3d \'tooltip-cross-dismissal\' style\x3d"display: table; width: 100%; padding-left: 0px; padding-right: 12px;"\x3e\x3cspan class\x3d"qtips-text"  style\x3d"display:table-cell; vertical-align: middle;width: \x3c% newUXToolTipWidth %\x3e%; /*margin-bottom: 8px; margin-top: 8px;*/"\x3e \x3c% elementValue %\x3e \x3c/span\x3e \x3cbutton id\x3d"tooltip-dismiss-cross" style\x3d"display: table-cell; text-align: center;  background: \x3c% elementBackgroundColor %\x3e;  border: none; padding: 0px;"\x3e\x3ci class\x3d"a-icon a-icon-close-white" tabindex\x3d"0" aria-label\x3d"Close \x3c% elementValue %\x3e"  role\x3d"img" style\x3d"margin:10px 10px 10px 12px;"\x3e\x3c/i\x3e\x3c/button\x3e\x3c/div\x3e\x3c/div\x3e',
defaultTemplate:'\x3cdiv id\x3d"qtips" class\x3d"qtips-background qtips-arrow-\x3c% elementArrowPosition %\x3e"\x3e  \x3cstyle\x3e .qtips-background { top: \x3c% elementY %\x3epx; left: \x3c% elementX %\x3epx; background-color: \x3c% elementBackgroundColor %\x3e; color: \x3c% elementTextColor %\x3e; } .qtips-background:after { border-color : \x3c% elementBackgroundColor %\x3e transparent;}\x3c/style\x3e \x3cdiv class\x3d"qtips-textholder aok-relative aok-float-left"\x3e \x3cspan class\x3d"qtips-text"\x3e \x3c% elementValue %\x3e\x3c/span\x3e\x3c/div\x3e \x3c/div\x3e',
dismissCrossToolTipTemplate:'\x3cdiv id\x3d"qtips" class\x3d"qtips-background qtips-arrow-\x3c% elementArrowPosition %\x3e"\x3e  \x3cstyle\x3e .qtips-background { top: \x3c% elementY %\x3epx; left: \x3c% elementX    %\x3epx; background-color: \x3c% elementBackgroundColor %\x3e; color: \x3c% elementTextColor %\x3e; } .qtips-background:after { border-color : \x3c% elementBackgroundColor %\x3e transparent;}\x3c/style\x3e \x3cdiv id \x3d \'tooltip-cross-dismissal\' style\x3d"display: table; width: 100%; padding-left: 2%; padding-right: 0%;"\x3e\x3cspan class\x3d"qtips-text"  style\x3d"display:table-cell; vertical-align: middle;width: 90%; line-height: 1.2;"\x3e \x3c% elementValue %\x3e \x3c/span\x3e \x3cdiv style\x3d"display: table-cell; text-align: center; padding-left: 1%; "\x3e\x3ci id\x3d"tooltip-dismiss-cross" tabindex\x3d"0" aria-label\x3d"Close \x3c% elementValue %\x3e"  class\x3d"a-icon a-icon-close" role\x3d"img" style\x3d"padding-left: 0%; padding-right: 1%;vertical-align: top; "\x3e\x3c/i\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
dismissOkayGotItToolTipTemplate:'\x3cdiv id\x3d"qtips" class\x3d"qtips-background qtips-arrow-\x3c% elementArrowPosition %\x3e"\x3e  \x3cstyle\x3e .qtips-background { top: \x3c% elementY %\x3epx; left: \x3c% elementX      %\x3epx; background-color: \x3c% elementBackgroundColor %\x3e; color: \x3c% elementTextColor %\x3e; } .qtips-background:after { border-color : \x3c% elementBackgroundColor %\x3e transparent;}\x3c/style\x3e \x3cdiv class\x3d"tooltip-userdismissable" style\x3d"padding-left: 2%; padding-right: 2%; display: table; border-collapse: collapse;"\x3e\x3cspan class\x3d"qtips-text"  style\x3d"display:table-row; text-align: left; line-height: 1.2;"\x3e \x3c% elementValue %\x3e \x3c/span\x3e\x3c/div\x3e \x3c/div\x3e',
dismissIconTemplate:'\x3cdiv id\x3d"qtip-dismiss"\x3e\x3ci id\x3d"qtip-dismiss-cross" class\x3d"a-icon a-icon-close" role\x3d"img" style\x3d"float:right; padding-left:5%;padding-bottom:5%;"\x3e\x3c/i\x3e\x3c/div\x3e',preVideoTemplate:'\x3cdiv id\x3d"qtip-thumbnail" style\x3d"text-align: left;display: table-cell; vertical-align: middle; border-style: solid; border-width: 1px; border-color: #FFFFFF; position:relative;"\x3e\x3cimg id\x3d"qtip-thumbnail-image"src\x3d\x3c%videoThumbnail%\x3e style\x3d"vertical-align: middle;position:relative"\x3e\x3cimg id\x3d"qtip-thumbnail-play"src\x3d"https://m.media-amazon.com/images/G/31/shopping-aids/play-icon._CB456863585_.png" tabindex\x3d0 role\x3d"button" style\x3d"vertical-align: middle;position:absolute;left:0"\x3e\x3c/div\x3e\x3cspan id\x3d"qtip-thumbnail-text" style\x3d"text-align: left;padding-left: 5%;display: table-cell;vertical-align: middle;width: 75%; line-height:1.2"\x3e\x3c% elementValue %\x3e\x3c/span\x3e',
videoTemplate:'\x3cvideo id\x3d"qtip-video" width\x3d\x3c%videoWidth%\x3e style\x3d"background-color: black;vertical-align:bottom" controls autoplay controlslist\x3d"nodownload" preload\x3d"metadata"\x3e\x3csource src\x3d\x3c%videoSource%\x3e type\x3d"video/mp4"\x3e\x3c/video\x3e',hotspotTemplate:'\x3cdiv id\x3d"qtips"class\x3d"qtips-background"\x3e\x3cstyle\x3e.qtips-background{ border-color : #EC912D;border-radius: 50%;width: 16px;height: 16px;background-color: #EC912D; position:absolute;display: table-cell;text-align:center;box-shadow: 0 0 0 0 rgba(236, 145, 45, 1);transform: scale(1);animation: pulse 1.5s 0.2s \x3c% elementBounceDuration %\x3e;} .qtips-background:after{ content: none;}\x3c/style\x3e\x3cstyle\x3e @keyframes pulse {0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(236, 145, 45, 0.7); } 70% { transform: scale(1); box-shadow: 0 0 0 12px rgba(236, 145, 45, 0); } 100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(236, 145, 45, 0); }}\x3c/style\x3e\x3cp class\x3d"qtips-text" style \x3d"vertical-align:middle; position:relative;top:-10.5px;right:2.5px;color: white; font-size:15px; font-family: Bookerly;font-style: italic;font-size;font-weight: bold;"\x3ei\x3c/p\x3e\x3c/div\x3e',
userActionToolTipTemplate:'\x3cdiv id\x3d"qtips" class\x3d"qtips-background qtips-arrow-\x3c% elementArrowPosition %\x3e"\x3e  \x3cstyle\x3e .qtips-background { top: \x3c% elementY %\x3epx; left: \x3c% elementX    %\x3epx; background-color: \x3c% elementBackgroundColor %\x3e; color: \x3c% elementTextColor %\x3e; } .qtips-background:after { border-color : \x3c% elementBackgroundColor %\x3e transparent;}\x3c/style\x3e \x3cdiv id \x3d "tooltip-user-action" style\x3d"display: table; width: 100%; padding-left: 2%; padding-right: 2%; border-collapse: collapse;"\x3e\x3cspan class\x3d"qtips-text"  style\x3d"display:table-cell; vertical-align: middle;width: 90%; line-height: 1.2;"\x3e \x3c% elementValue %\x3e \x3c/span\x3e \x3cdiv style\x3d"display: table-cell; text-align: center; padding-left: 1%; "\x3e\x3ci id\x3d"tooltip-dismiss-cross" class\x3d"a-icon a-icon-close" role\x3d"img" style\x3d"padding-left: 0%; padding-right: 1%;vertical-align: top; "\x3e\x3c/i\x3e\x3c/div\x3e\x3cdiv style\x3d"display: table-row;"\x3e\x3cbutton id\x3d"qtip-button" style\x3d"background-color: Transparent; border-width: thin; text-align: right; border-color: black; border-style: solid; display: table-cell; float: right; border-radius: 3px"\x3e \x3c% elementCTA %\x3e \x3c/button\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
userActionToolTipTemplate_V2:'\x3cdiv id\x3d"qtips" class\x3d"qtips-background qtips-arrow-\x3c% elementArrowPosition %\x3e"\x3e  \x3cstyle\x3e .qtips-background {background-color: \x3c% elementBackgroundColor %\x3e; color: \x3c% elementTextColor %\x3e; } .qtips-background:after { border-color : \x3c% elementBorderColor %\x3e transparent;}\x3c/style\x3e \x3cdiv id \x3d "tooltip-user-action" style\x3d"display: table; width: auto; font-family: \'Amazon Ember\'"\x3e\x3cspan class\x3d"qtips-text"  style\x3d"display:table-cell; vertical-align: middle; width: auto; line-height: 20px; font-size: 15px; font-style: normal; font-weight: 400; max-width: 127px"\x3e \x3c% elementValue %\x3e \x3c/span\x3e \x3cdiv id\x3d"tooltip-dismiss-cross" style\x3d"display: table-cell; text-align: right; left:0;right:-0.1%;top:0; bottom: -0.1%; vertical-align: top; padding-left: 20px;"\x3eX\x3c/div\x3e\x3cdiv style\x3d"display: table-row;"\x3e\x3cbutton id\x3d"qtip-button" style\x3d"background-color: Transparent; border-width: 1px; text-align: right; border-color: \x3c% elementTextColor %\x3e; border-style: solid; display: table-cell; color: \x3c% elementTextColor %\x3e; padding: 6px 22px; left: 10px; margin-top: 10px"\x3e \x3c% elementCTA %\x3e \x3c/button\x3e\x3cdiv style\x3d"display: table-cell; text-align: right; margin-top: 10px; padding-left:10px; line-height: 20px; font-size: 15px; font-style: normal; font-weight: 400; vertical-align: bottom;"\x3e \x3c% elementIndex %\x3e \x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
userActionToolTipTemplate_V3:'\x3cdiv id\x3d"qtips" class\x3d"qtips-background qtips-arrow-\x3c% elementArrowPosition %\x3e"\x3e  \x3cstyle\x3e .qtips-background {background-color: \x3c% elementBackgroundColor %\x3e; color: \x3c% elementTextColor %\x3e; } .qtips-background:after { border-color : \x3c% elementBorderColor %\x3e transparent;}\x3c/style\x3e \x3cdiv id \x3d "tooltip-user-action" style\x3d"display: table; width: auto; font-family: \'Amazon Ember\'"\x3e\x3cspan class\x3d"qtips-text"  style\x3d"display:table-cell; vertical-align: middle; width: auto; line-height: 20px; font-size: 15px; font-style: normal; font-weight: 400; max-width: 127px"\x3e \x3c% elementValue %\x3e \x3c/span\x3e \x3cdiv id\x3d"tooltip-dismiss-cross" style\x3d"display: table-cell; text-align: right; left:0;right:-0.1%;top:0; bottom: -0.1%; vertical-align: top; padding-left: 20px;"\x3eX\x3c/div\x3e\x3cdiv style\x3d"display: table-row;"\x3e\x3cbutton id\x3d"qtip-button" style\x3d"background-color: Transparent; border-width: 1px; text-align: right; border-color: \x3c% elementTextColor %\x3e; border-style: solid; display: table-cell; color: \x3c% elementTextColor %\x3e; padding: 6px 22px; left: 10px; margin-top: 10px"\x3e \x3c% elementCTA %\x3e \x3c/button\x3e\x3cdiv style\x3d"display: table-cell; text-align: right; margin-top: 10px; padding-left:10px; line-height: 20px; font-size: 15px; font-style: normal; font-weight: 400; vertical-align: bottom;"\x3e \x3c% elementIndex %\x3e \x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"sa-highlighter" class\x3d"sa-highlighter-background sa-highlighter-\x3c% elementArrowPosition %\x3e"\x3e\x3cstyle\x3e.sa-highlighter-background{ border: 4px solid \x3c% elementBackgroundColor %\x3e;}\x3c/style\x3e\x3c/div\x3e\x3c/div\x3e'},
errorCodes:{ELEMENT_NOT_VISIBLE:"Element not Visible on Viewport",EVENT_CHECK_NOT_SATISFIED:"Event Check not Satisfied",DEPENDANT_CHECK_NOT_SATISFIED:"Dependant Check not Satisfied",API_THROTTLED:"API in Throttled State",AID_NOT_ALLOWLISTED:"Shopping Aid is not Allowlisted",INVALID_VERSION:"Invalid Version",INVALID_SHOPPING_AID_TYPE:"Invalid Shopping Aid Type",SA_NOT_DISPLAYED:"Shopping Aid is not being displayed",BOTTOM_SHEET_IN_VIEW:"Bottom Sheet in View",INVALID_STATE_DATA:"Invalid State Data",
ILLEGAL_INPUT:"Illegal Input",ALREADY_RENDERED:"Already Rendered",SPARKLE_IN_VIEW:"Sparkle in View",UNKNOWN:"Unknown"},userEvent:{optOut:"OPT_OUT",complete:"COMPLETE",optIn:"OPT_IN",yetToOptIn:"YET_TO_OPT_IN"},nativeConstants:{SHOPPING_AIDS:"SHOPPING_AIDS"},contextAwareSADelimiter:":::",secondToMillisecondConversion:1E3,hourToSecondConversion:3600,ShoppingAidsSparkles:"Sparkles",ShoppingAidsTooltips:"ToolTips",PartnerEvent:"partnerevent",SparkleClick:"click.sparkle",TooltipClick:"click.tooltip",ScrollEvent:"scroll",
EmptyString:"",BounceDurationNineSeconds:9E3,DefaultElementBackgroundColor:"#FFA724",DefaultElementTextColor:"#000000",DefaultElementBorderColor:"#FFA724",ToolTipUXMetricForLogImpression:"ToolTip_UX_Change_LogImpression_",ToolTipUXExperimentWeblab:"A2I_SHOPPINGAIDS_TOOLTIP_UX_EXPERIMENT_1099906",VideoPlayButtonDefaultAltText:"Play Video"}})})();(function(){q.register("QTipsStyles",function(){return"#qtips{position:absolute;overflow:initial}.qtips-background{position:fixed;z-index:90000;padding:10px;opacity:1;border-radius:3px;-webkit-box-shadow:0 2px 5px 0 rgba(17,17,17,.25);-moz-box-shadow:0 2px 5px 0 rgba(17,17,17,.25);box-shadow:0 2px 5px 0 rgba(17,17,17,.25);-o-box-shadow:0 2px 5px 0 rgba(17,17,17,.25);-moz-transform-style:preserve-3d;-o-transform-style:preserve-3d;-webkit-transform-style:preserve-3d;transform-style:preserve-3d}.qtips-background:after{position:absolute;display:block;width:0;content:'';border-style:solid;-moz-transform-style:preserve-3d;-o-transform-style:preserve-3d;-webkit-transform-style:preserve-3d;transform-style:preserve-3d}.qtips-arrow-topleft:after,.qtips-arrow-topmiddle:after,.qtips-arrow-topright:after{top:-8px;border-width:0 8px 9px}.qtips-arrow-bottomleft:after,.qtips-arrow-topleft:after{left:14px}.qtips-arrow-bottomright:after,.qtips-arrow-topright:after{right:14px}.qtips-arrow-bottomleft:after,.qtips-arrow-bottommiddle:after,.qtips-arrow-bottomright:after{bottom:-8px;border-width:9px 8px 0;-webkit-box-shadow:0 0 0 -2px rgba(17,17,17,.25);-moz-box-shadow:0 0 0 -2px rgba(17,17,17,.25);box-shadow:0 0 0 -2px rgba(17,17,17,.25);-o-box-shadow:0 0 0 -2px rgba(17,17,17,.25)}.qtips-arrow-left:after{left:-12px; border-width:0 8px 9px;transform:rotate(270deg)}.qtips-arrow-right:after{border-width:0 8px 9px;transform:rotate(90deg)}.qtips-textholder{width:100%;height:100%}.slate-image-video-loader {background: #ffffff;border-radius: 50%;position: absolute;opacity: 0.7;}.slate-image-play-button {margin: auto;position: absolute;border-style: solid;border-color: transparent transparent transparent #ada6a6;} .sa-highlighter-background { z-index: 90000; padding: 10px; width: 10px; height: 10px; background-color: transparent; border-radius: 50%; position: absolute; animation: ring 1.5s linear infinite; }.sa-highlighter-topleft, .sa-highlighter-topmiddle, .sa-highlighter-topright { top: -50px; }.sa-highlighter-topleft, .sa-highlighter-bottomleft { left: 8px; }.sa-highlighter-bottomright, .sa-highlighter-topright { right: 8px; }.sa-highlighter-bottomleft, .sa-highlighter-bottommiddle, .sa-highlighter-bottomright { bottom: -50px; } @keyframes ring { from {opacity: 1;} to {opacity: 0; transform: scale(3);}}"})})();
(function(){q.when("A").register("QTipsMetrics",function(){var h=r.ue;return{incrementCounter:function(c,a,e){a=a||1;h&&h.count&&(h.count(c,(h.count(c)||0)+a),e&&h.count(c+"_"+e,(h.count(c)||0)+a))},recordLatency:function(c,a){h&&h.count&&h.count(c,a)}}})})();(function(){q.register("ShoppingAidsSparklesStyles",function(){var h=JSON.stringify([".sparkle-container {             background: #eaeded;             position: fixed;             bottom: 4px;             left: 0;             right: 0;             margin: 9px;             box-sizing: border-box;             display: table;             border-radius: 10px;             box-shadow: 0px 2px 4px rgba(0, 0, 0, 0.5);             z-index: 99;             opacity: 0.5;             transform: translateY(100%);             transition: transform 0.6s, opacity 0.5s;         }",
".sparkle-content {             display: table-cell;             vertical-align: top;             width: 100%;             padding-top: 13px;             padding-bottom: 13px;             padding-left: 9px;             padding-right: 9px;         }",".sparkle-close {             display: table-cell;             vertical-align: top;             padding: 9px 12px 0 0;             width: 12px;             height: 13px;             font-weight: 700;         }",".sparkle-close-btn {             border: none;             padding: 0;         }",
".sparkle-image-container {             display: table-cell;             vertical-align: top;             width: 34px;             height: 34px;         }",".sparkle-text-container {             display: table-cell;             vertical-align: middle;             padding-left: 15px;         }",".sparkle-text {             display: -webkit-box;             -webkit-line-clamp: 2;             -webkit-box-orient: vertical;             overflow: hidden;             text-overflow: ellipsis;             white-space: normal;         }",
".sparkle-description-container {             display: table-cell;             vertical-align: middle;             padding-left: 7px;             height: 34px;         }",".sparkle-description {             display: -webkit-box;             -webkit-line-clamp: 2;             -webkit-box-orient: vertical;             overflow: hidden;             text-overflow: ellipsis;             white-space: normal;             color: #111;         }",".sparkle-linkText-container {             display: table-cell;             vertical-align: middle;             padding-left: 0;             padding-right: 18px;         }",
".sparkle-linkText {             display: -webkit-box;             -webkit-line-clamp: 2;             -webkit-box-orient: vertical;             overflow: hidden;             text-overflow: ellipsis;             white-space: normal;             color: #0066c0;             font-weight: bold;         }",".sparkle-image, .sparkle-image-loader {             border: none;             height: 34px;             width: 34px;         }",".sparkle-image-loader {             display: none;         }.sparkle-container.sparkle-loading .sparkle-image-loader {             display: block;         }",
".sparkle-container.sparkle-loading .sparkle-image {             display: none;         }",".sparkle-container.sparkle-loading .sparkle-content {             pointer-events: none;         }",".sparkle-container.sparkle-loading .sparkle-linkText-container {             pointer-events: none;         }",".sparkle-container.sparkle-loading .sparkle-text {             color: #aaa;         }",".sparkle-container.sparkle-open {             transform: translateY(0);             opacity: 1;         }",".sparkle-container.sparkle-closing {             transform: translateY(100%);             opacity: 0.5;         }"]),
c=JSON.stringify([".sparkle-container {             background: #eaeded;             position: fixed;             bottom: 4px;             left: 0;             right: 0;             margin: 9px;             box-sizing: border-box;             display: table;             border-radius: 10px;             box-shadow: 0px 2px 4px rgba(0, 0, 0, 0.5);             z-index: 99;             opacity: 0.5;             transform: translateY(100%);             transition: transform 0.6s, opacity 0.5s;         }",
".sparkle-content {             display: table-cell;             vertical-align: top;             width: 100%;             padding-top: 13px;             padding-bottom: 13px;             padding-left: 9px;             padding-right: 9px;         }",".sparkle-close {             display: table-cell;             vertical-align: top;             padding: 9px 0 0 12px;             width: 12px;             height: 13px;             font-weight: 700;         }",".sparkle-close-btn {             border: none;             padding: 0;         }",
".sparkle-image-container {             display: table-cell;             vertical-align: top;             width: 34px;             height: 34px;         }",".sparkle-text-container {             display: table-cell;             vertical-align: middle;             padding-right: 15px;         }",".sparkle-text {             display: -webkit-box;             -webkit-line-clamp: 2;             -webkit-box-orient: vertical;             overflow: hidden;             text-overflow: ellipsis;             white-space: normal;         }",
".sparkle-description-container {             display: table-cell;             vertical-align: middle;             padding-right: 7px;             height: 34px;         }",".sparkle-description {             display: -webkit-box;             -webkit-line-clamp: 2;             -webkit-box-orient: vertical;             overflow: hidden;             text-overflow: ellipsis;             white-space: normal;             color: #111;         }",".sparkle-linkText-container {             display: table-cell;             vertical-align: middle;             padding-right: 0;             padding-left: 18px;         }",
".sparkle-linkText {             display: -webkit-box;             -webkit-line-clamp: 2;             -webkit-box-orient: vertical;             overflow: hidden;             text-overflow: ellipsis;             white-space: normal;             color: #0066c0;             font-weight: bold;         }",".sparkle-image, .sparkle-image-loader {             border: none;             height: 34px;             width: 34px;         }",".sparkle-image-loader {             display: none;         }.sparkle-container.sparkle-loading .sparkle-image-loader {             display: block;         }",
".sparkle-container.sparkle-loading .sparkle-image {             display: none;         }",".sparkle-container.sparkle-loading .sparkle-content {             pointer-events: none;         }",".sparkle-container.sparkle-loading .sparkle-linkText-container {             pointer-events: none;         }",".sparkle-container.sparkle-loading .sparkle-text {             color: #aaa;         }",".sparkle-container.sparkle-open {             transform: translateY(0);             opacity: 1;         }",".sparkle-container.sparkle-closing {             transform: translateY(100%);             opacity: 0.5;         }"]);
return{defaultStyleCSS:h,defaultStyleRTLCSS:c,newStyleCSS:'[\n    ".sparkle-container{background: rgb(0, 130, 150);border: 1px solid rgb(0, 113, 133);width:95%;position:fixed;bottom:4px;left:0;right:0;margin:9px;box-sizing:border-box;display:table;border-radius:4px;box-shadow:0px 2px 4px rgba(0, 0, 0, .25);z-index:99;opacity:.5;transform:translateY(100%);transition:transform .6s,opacity .5s}",\n    ".sparkle-content{display:table-cell;vertical-align:top;width:95%;padding-top:9px;padding-bottom:9px;padding-left:9px;padding-right:9px}",\n    ".sparkle-close{display:table-cell;vertical-align:top;padding:8px 8px 0px 12px;width:12px;height:13px;font-weight:700;color: #FFFFFF}",\n    ".sparkle-image-container{display:table-cell;vertical-align:top;width:30px;height:30px; border-radius: 4px}",\n    ".sparkle-text-container{display:table-cell;vertical-align:middle;padding-left:15px}",\n    ".sparkle-text{color: rgb(255,255,255); font-size:15px; display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;white-space:normal}",\n    ".sparkle-description-container{display:table-cell;vertical-align:middle;padding-left:7px;height:34px}",\n    ".sparkle-description{color: rgb(255, 255, 255);font-size:15px;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;white-space:normal}",\n    ".sparkle-linkText-container{display:table-cell;vertical-align:middle;padding-left:0;padding-right:8px;text-align: center}",\n    ".sparkle-linkText{color:rgb(255, 255, 255);font-weight:normal;font-size:15px;border: 1px solid #FFFFFF;padding: 4px 11px;-webkit-line-clamp: 1;border-radius: 4px;display:-webkit-box;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;white-space:normal}",\n    ".sparkle-image,.sparkle-image-loader{border-radius: 4px;height:30px;width:30px;background: rgb(217, 217, 217)}",\n    ".sparkle-image-loader{display:none}.sparkle-container.sparkle-loading .sparkle-image-loader{display:block}",\n    ".sparkle-container.sparkle-loading .sparkle-image{display:none}",\n    ".sparkle-container.sparkle-loading .sparkle-content{pointer-events:none}",\n    ".sparkle-container.sparkle-loading .sparkle-linkText-container{pointer-events:none}",\n    ".sparkle-container.sparkle-loading .sparkle-text{color:#aaa}",\n    ".sparkle-container.sparkle-open{transform:translateY(0);opacity:1}",\n    ".sparkle-container.sparkle-closing{transform:translateY(100%);opacity:.5}"\n]',
newStyleRTLCSS:'[\n  ".sparkle-container{background: rgb(0, 130, 150);border: 1px solid rgb(0, 113, 133);width:95%;position:fixed;bottom:4px;left:0;right:0;margin:9px;box-sizing:border-box;display:table;border-radius:4px;box-shadow:0px 2px 4px rgba(0, 0, 0, .25);z-index:99;opacity:.5;transform:translateY(100%);transition:transform .6s,opacity .5s}",\n  ".sparkle-content{display:table-cell;vertical-align:top;width:95%;padding-top:9px;padding-bottom:9px;padding-left:9px;padding-right:9px}",\n  ".sparkle-close{display:table-cell;vertical-align:top;padding:8px 12px 0px 8px;width:12px;height:13px;font-weight:700;color: #FFFFFF}",\n  ".sparkle-image-container{display:table-cell;vertical-align:top;width:30px;height:30px; border-radius: 4px}",\n  ".sparkle-text-container{display:table-cell;vertical-align:middle;padding-right:15px}",\n  ".sparkle-text{color: rgb(255,255,255); font-size:15px; display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;white-space:normal}",\n  ".sparkle-description-container{display:table-cell;vertical-align:middle;padding-right:7px;height:34px}",\n  ".sparkle-description{color: rgb(255, 255, 255);font-size:15px;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;white-space:normal}",\n  ".sparkle-linkText-container{display:table-cell;vertical-align:middle;padding-left:0;padding-right:8px;text-align: center}",\n  ".sparkle-linkText-container{display:table-cell;vertical-align:middle;padding-right:0;padding-left:8x; text-align: center}",\n  ".sparkle-linkText{color:rgb(255, 255, 255);font-weight:normal;font-size:15px;border: 1px solid #FFFFFF;padding: 4px 11px;-webkit-line-clamp: 1;border-radius: 4px;display:-webkit-box;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;white-space:normal}",\n  ".sparkle-image,.sparkle-image-loader{border-radius: 4px;height:30px;width:30px;background: rgb(217, 217, 217)}",\n  ".sparkle-image-loader{display:none}.sparkle-container.sparkle-loading .sparkle-image-loader{display:block}",\n  ".sparkle-container.sparkle-loading .sparkle-image{display:none}",\n  ".sparkle-container.sparkle-loading .sparkle-content{pointer-events:none}",\n  ".sparkle-container.sparkle-loading .sparkle-linkText-container{pointer-events:none}",\n  ".sparkle-container.sparkle-loading .sparkle-text{color:#aaa}",\n  ".sparkle-container.sparkle-open{transform:translateY(0);opacity:1}",\n  ".sparkle-container.sparkle-closing{transform:translateY(100%);opacity:.5}"\n]'}})})();
(function(){q.when("A","jQuery","QTipsMetrics","QTipsConstants","QTips","SAEndPointsConfig","NestedShoppingAidHelper","ShoppingAidsGenericUtils","LogImpressionManager","SAFeature","SparkleConfig","SAMetricConstants","ShoppingAidsFilters","ContextAwareSubstitutor","ShoppingAidsSparklesStyles","SparkleConstants").register("ShoppingAidsSparkles",function(h,c,a,e,f,d,b,k,g,l,p,m,A,x,y,n){var u=d.logImpressionEndPoint,L=!1,z=0,K=0,G=0,D=0,B=r.innerHeight,Q=w,C=w,I=w,v={logImpression:function(a,b,c){if(k.isDefined(c)){var d=
c.userEvent;var e=c.successCallback;var f=c.errorCallback;var m=c.contextAwareIndex}l.clientSideCaching?g.handle(a,b,n.shoppingAidsType,Q,c):(a={pageType:Q,shoppingAidsType:n.shoppingAidsType,id:a,schedulingType:b},k.isDefined(d)&&(a.userEvent=d),k.isDefined(m)&&(a.contextAwareIndex=m),h.ajax(u,{method:"GET",contentType:"application/json; charset\x3dutf-8",timeout:6E4,params:a,success:e,error:f}))},logInteraction:function(a,b,c,d){c()},logCounter:function(b,c){a.incrementCounter("shopping_aids_"+
C+"_"+n.shoppingAidsType+b,c);a.incrementCounter("shopping_aids_"+Q+"_"+n.shoppingAidsType+"_"+b,c);a.incrementCounter("shopping_aids_"+n.shoppingAidsType+"_"+b,c)},nestedJsonParser:function(a){try{return JSON.parse(a)}catch(F){v.logCounter("illegal_input_nested_shopping_aid")}},detectUserScroll:function(){var a=r.scrollY;20>=a?document.getElementsByClassName("sparkle-container")[0].style.bottom="46px":document.getElementsByClassName("sparkle-container")[0].style.bottom="4px";z=Math.max(z,a);a<z&&
!K&&(K=1)},_contextAwareModelTransformer:function(a,b){b=a.getState(b);b.clientSideTargetting=a.getClientSideTargetting();b.desiredWeblabTreatment=a.getDesiredWeblabTreatment();b.nestedSAList=a.getNestedSAList();b.identifier=a.getIdentifier();return b},executeContextAwareSubstitution:function(a){var b=a.getEventData().state,c=this._contextAwareModelTransformer(a,b),d=A.getContextTargetingIndex(c);x.substitute(c,d,e.ShoppingAidsSparkles);a.setClientSideTargetting(c.clientSideTargetting);a.setState(b,
c);a.setNestedSAList(c.nestedSAList);k.isDefined(c.contextAwareIndex)&&(a.setTriggerDependentTriggering(w),a.setContextAwareIndex(c.contextAwareIndex));return a},injectStyleToDom:function(a){var b=document.createElement("style");b.innerHTML=JSON.parse(a).join("");document.head.appendChild(b)}},S={create:function(a){var c=a.sparkleType,d=a.identifier,f=a.invokingEventType,k=a.invokingEventElement,g=a.weblabName,m=a.desiredWeblabTreatment,l=a.allocatedWeblabTreatment,p=a.schedulingType,y=a.targetEndpoint,
A=a.typeOfStaticSparkle,x=a.displayIconAltText,u=a.sparkleUIStrings,T=a.nestedSAList,q=a.bottomNavPadding,L=a.backGroundColor,z=a.borderColor,K=a.borderStyle,D=a.descriptionColor,G={},P,J=!1,C=a.successResponse,B=a.failureResponse,N=a.onDemand,Q=a.contextAwareIndex,M=a.triggerDependentTargeting,R,Y;if(c===n.sparkleTypes.dynamic&&k&&f){var H=[];try{H=JSON.parse(a.stateData)}catch(sa){v.logCounter("illegal_input_stateData");(B=this.failureResponse)&&"function"===typeof B&&B(e.INVALID_STATE_DATA);return}H.forEach(function(a){G[a.stateId]=
{id:a.stateId,mode:a.mode,linkText:a.text,icon:a.icon,descText:a.descriptionText}});document.querySelector(k).addEventListener(f,function(a){P=a.detail})}else if(c===n.sparkleTypes.static){G={initial:{id:"initial",mode:"default",linkText:a.displayText,icon:a.displayIcon,descText:a.descriptionText}};var Z={requestUpdate:w,state:"initial",onShow:function(a){this.requestUpdate=a.requestUpdate},onClick:function(){this.requestUpdate({signal:"complete"});var c=v.nestedJsonParser(T);c&&0<c.length?setTimeout(function(){b.dispatchShoppingAidEvent(c)},
n.timer.animationDelay):setTimeout(function(){r.location.href=a.targetEndpoint},n.timer.animationDelay)},onClose:function(){}};k&&f&&f.toLowerCase()===e.PartnerEvent?Y=h.on(k,function(){P=Z}):k&&f?document.querySelector(k).addEventListener(f,function(){P=Z}):P=Z}else{v.logCounter("illegal_input");(B=this.failureResponse)&&"function"===typeof B&&B(e.ILLEGAL_INPUT);return}return{getSparkleType:function(){return c},getIdentifier:function(){return d},getState:function(a){return G[a]},isEligible:function(){return!(!P||
J)},getEventData:function(){return P},isDone:function(){return J},getWeblabName:function(){return g},getDesiredWeblabTreatment:function(){return m},getAllocatedWeblabTreatment:function(){return l},getSchedulingType:function(){return p},getTargetEndpoint:function(){return y},getTypeOfStaticSparkle:function(){return A},getDisplayIconAltText:function(){return x},getSparkleUIStrings:function(){return u},getSuccessResponse:function(){return C},getFailureResponse:function(){return B},getOnDemand:function(){return N},
getContextAwareIndex:function(){return Q},getTriggerDependentTargeting:function(){return M},getNestedSAList:function(){return T},getClientSideTargetting:function(){return R},getAuiEventCallback:function(){return Y},getBackGroundColor:function(){return L},getBorderColor:function(){return z},getBorderStyle:function(){return K},getDescriptionColor:function(){return D},setBottomNavPadding:function(){I="0"!==q?q:w},setClientSideTargetting:function(a){R=a},setState:function(a,b){G[a]=b},setContextAwareIndex:function(a){},
setNestedSAList:function(a){},setTriggerDependentTriggering:function(a){},done:function(){J=!0}}}},ha={create:function(b,d){function f(){!1===H&&(P.parentNode.removeChild(P),X.parentNode.removeChild(X),H=!0)}function g(){!1===Y&&(ca.parentNode.removeChild(ca),P.parentNode.removeChild(P),Y=!0)}function l(){!1===S&&(ka.parentNode.removeChild(ka),ca.parentNode.removeChild(ca),X.parentNode.removeChild(X),S=!0)}function A(){!1===Z&&(ca.parentNode.removeChild(ca),X.parentNode.removeChild(X),Z=!0)}function x(a){ia.style.cssText=
n.widthString+(95-a)+n.percentile;P.style.cssText=n.widthString+a+n.percentile}function u(a){a?O.classList.add("sparkle-loading"):O.classList.remove("sparkle-loading")}function T(a){O.classList.remove("sparkle-mode-warning","sparkle-mode-success","sparkle-mode-error");"loading"===a.mode?u(!0):"default"!==a.mode&&O.classList.add("sparkle-mode-"+a.mode);b.getSparkleType()===n.sparkleTypes.static?b.getTypeOfStaticSparkle()&&"1"!==b.getTypeOfStaticSparkle().toString()?"2"===b.getTypeOfStaticSparkle().toString()?
(M.innerText=a.linkText,V.src=a.icon,f(),v.logCounter(b.getIdentifier()+"type2_static_sparkle")):"3"===b.getTypeOfStaticSparkle().toString()?(N.innerText=a.descText,N.ariaHidden="true",J.ariaLabel=a.descText+"."+a.linkText,J.innerHTML=a.linkText,l(),v.logCounter(b.getIdentifier()+"type3_static_sparkle")):"4"===b.getTypeOfStaticSparkle().toString()?(N.innerText=a.descText,N.ariaHidden="true",J.ariaLabel=a.descText+"."+a.linkText,J.innerHTML=a.linkText,V.src=a.icon,A(),v.logCounter(b.getIdentifier()+
"type4_static_sparkle")):"5"===b.getTypeOfStaticSparkle().toString()?(N.innerText=a.descText,N.ariaHidden="true",J.ariaLabel=a.descText+"."+a.linkText,J.innerHTML=a.linkText,J.style.color=n.whiteColor,x(Math.min(a.linkText.length*n.width.widthFactor+n.width.minCTAWidth,n.width.maxCTAWidth)),l(),v.logCounter(b.getIdentifier()+"type5_static_sparkle")):"6"===b.getTypeOfStaticSparkle().toString()?(N.innerText=a.descText,N.ariaHidden="true",J.ariaLabel=a.descText+"."+a.linkText,J.innerHTML=a.linkText,
J.style.color=n.whiteColor,V.src=a.icon,x(Math.min(a.linkText.length*n.width.widthFactor+n.width.minCTAWidth,n.width.maxCTAWidth)),A(),v.logCounter(b.getIdentifier()+"type6_static_sparkle")):"7"===b.getTypeOfStaticSparkle().toString()?(ja.innerHTML=a.linkText,ja.style.color=n.whiteColor,V.src=a.icon,g(),v.logCounter(b.getIdentifier()+"type7_static_sparkle")):"8"===b.getTypeOfStaticSparkle().toString()&&(M.innerText=a.linkText,M.style.color=n.whiteColor,V.src=a.icon,f(),v.logCounter(b.getIdentifier()+
"type8_static_sparkle")):(ja.innerHTML=a.linkText,V.src=a.icon,g(),v.logCounter(b.getIdentifier()+"type1_static_sparkle")):(J.innerHTML=a.linkText,ja.innerHTML=a.linkText,a.descText!==w&&a.icon!==w?(N.innerText=a.descText,V.src=a.icon,N.ariaHidden="true",J.ariaLabel=a.descText+"."+a.linkText,A()):a.icon!==w&&a.descText===w?(V.src=a.icon,g()):a.icon===w&&(N.innerText=a.descText,N.ariaHidden="true",J.ariaLabel=a.descText+"."+a.linkText,l()));fa=a}function U(a){ha.removeSparkleFromView(O);d.sparkleClosed(b,
a)}function ba(a){if(b.isDone())return!1;switch(a.signal){case "statechange":if(a=b.getState(a.state))return u(!1),T(a),!0;U("client_illegal_state");return!1;case "complete":return d.sparkleComplete(b),(a=b.getState(a.state))?(u(!1),T(a),setTimeout(function(){U("client_complete")},n.timer.autoCloseDelay)):U("client_complete"),!0;case "abort":return U("client_abort"),!0;default:return!1}}function z(b){var d=r.scrollY;"Android"===C&&b?(c(r).bind("scroll",h.throttle(v.detectUserScroll,100)),20>=d&&(document.getElementsByClassName("sparkle-container")[0].style.bottom=
p.andoridBottomPadding_SubnavPresent)):"iPhone"===C&&I&&(q.when("MShopChrome").execute(function(a){a.getBottomBarsHeight({successCallback:function(a){var c=b?a.visibleHeight+p.iOSBottomPadding_SubnavPresent:a.visibleHeight;document.getElementsByClassName("sparkle-container")[0].style.bottom=c+"px";I=a.visibleHeight},failCallback:function(a){v.logCounter("fetchBottomHeight_Failure")}})}),c(r).bind("scroll",h.throttle(function(){var a=document.getElementsByClassName("sparkle-container")[0].style.bottom;
0>=r.scrollY&&b?document.getElementsByClassName("sparkle-container")[0].style.bottom=I+p.iOSBottomPadding_SubnavPresent+"px":0<r.scrollY&&a.slice(0,-2)>I&&b&&(document.getElementsByClassName("sparkle-container")[0].style.bottom=I+"px");a===p.iOSBottomPadding_WhenEndOfPage&&(document.getElementsByClassName("sparkle-container")[0].style.bottom=I+"px");r.innerHeight+r.scrollY>=document.body.scrollHeight&&(document.getElementsByClassName("sparkle-container")[0].style.bottom=p.iOSBottomPadding_WhenEndOfPage)},
100)));a.incrementCounter(m.SPARKLE_BOTTOM_PADDING_PREFIX+Q+"_"+C+"_bottomNav_"+!!I+"_Subnav"+b)}function K(a,c){ba({signal:"statechange",state:a})&&(document.body.appendChild(O),setTimeout(function(){O.classList.add("sparkle-open");d.getMetricsIntersectionObserver();z(c);L=!0;if(b.getAuiEventCallback()){var a=b.getAuiEventCallback();k.detachTrigger(a.event,a.callback)}G=Date.now();D=r.scrollY;d.sparkleShown(b,ba);if(b.getSparkleType()!==n.sparkleTypes.static||b.getSparkleType()===n.sparkleTypes.static&&
(!b.getTypeOfStaticSparkle()||"1"===b.getTypeOfStaticSparkle().toString()||"2"===b.getTypeOfStaticSparkle().toString()||"3"===b.getTypeOfStaticSparkle().toString()||"4"===b.getTypeOfStaticSparkle().toString())){a=document.getElementsByClassName("sparkle-container")[0];var e=a.getElementsByClassName("sparkle-content")[0].getElementsByClassName("sparkle-description-container")[0].getElementsByClassName("sparkle-description")[0];b.getBackGroundColor()!==w&&(a.style.background=b.getBackGroundColor());
b.getBorderColor()!==w&&(a.style.borderColor=b.getBorderColor());b.getBorderStyle()!==w&&(a.style.borderStyle=b.getBorderStyle());b.getDescriptionColor()!==w&&(e.style.color=b.getDescriptionColor())}a=document.getElementsByClassName("sparkle-container")[0];a.removeAttribute("role");a.removeAttribute("aria-live");a.removeAttribute("aria-label");a.removeChild(R)},n.timer.animationDelay))}var F=!1,B=!1;try{var W=JSON.parse(b.getSparkleUIStrings())}catch(ma){v.logCounter("invalid_ui_string_input"),W=
{}}b.getSparkleType()!==n.sparkleTypes.static||!b.getTypeOfStaticSparkle()||"5"!==b.getTypeOfStaticSparkle().toString()&&"6"!==b.getTypeOfStaticSparkle().toString()&&"7"!==b.getTypeOfStaticSparkle().toString()&&"8"!==b.getTypeOfStaticSparkle().toString()||B?F||(B=!1,F=!0,"rtl"===document.dir?v.injectStyleToDom(y.defaultStyleRTLCSS):v.injectStyleToDom(y.defaultStyleCSS)):(B=!0,F=!1,"rtl"===document.dir?v.injectStyleToDom(y.newStyleRTLCSS):v.injectStyleToDom(y.newStyleCSS));var O=document.createElement("div");
O.classList.add("sparkle-container");O.role="alert";O.ariaLive="polite";O.ariaLabel=W.sparkleAnnouncementPrefix?W.sparkleAnnouncementPrefix:n.sparkleAnnouncementPrefix;O.setAttribute(e.view.saDOMNameAttribute,b.getIdentifier());var ia=document.createElement("div");ia.classList.add("sparkle-content");var ka=document.createElement("div");ka.classList.add("sparkle-image-container");F=document.createElement("img");F.classList.add("sparkle-image-loader");F.src=n.spinnerUrl;var V=document.createElement("img");
V.classList.add("sparkle-image");V.alt=b.getDisplayIconAltText()?b.getDisplayIconAltText():n.defaultAltText;ka.appendChild(F);ka.appendChild(V);var P=document.createElement("div");P.classList.add("sparkle-linkText-container");var J=document.createElement("a");J.classList.add("sparkle-linkText");J.href="#";P.appendChild(J);var X=document.createElement("div");X.classList.add("sparkle-text-container");var ja=document.createElement("a");ja.classList.add("sparkle-text");ja.href="#";X.appendChild(ja);F=
document.createElement("div");F.classList.add("sparkle-description-container");var N=document.createElement("a");N.classList.add("sparkle-description");N.innerText=" ";F.appendChild(N);var ca=document.createElement("div");ca.classList.add("sparkle-text-container");var M=document.createElement("p");M.classList.add("sparkle-text");M.innerText=" ";var R=document.createElement("div");R.ariaLabel=W.sparkleAnnouncementSuffix?W.sparkleAnnouncementSuffix:n.sparkleAnnouncementSuffix;R.role="button";ca.appendChild(M);
ia.appendChild(ka);ia.appendChild(X);ia.appendChild(ca);ia.appendChild(F);W=document.createElement("div");W.classList.add("sparkle-close");F=document.createElement("button");F.classList.add("sparkle-close-btn");F.ariaLabel="close";B=document.createElement("i");B.classList.add("a-icon");B.classList.add("a-icon-close");B.classList.add("a-icon-mini");F.appendChild(B);W.appendChild(F);O.appendChild(ia);O.appendChild(P);O.appendChild(W);O.appendChild(R);var Y=!1,H=!1,Z=!1,S=!1,fa;P.addEventListener("click",
function(a){a.preventDefault();u(!0);d.sparkleClicked(b,fa)});X.addEventListener("click",function(a){a.preventDefault();u(!0);d.sparkleClicked(b,fa)});q.when("mash").execute(function(a){"iPhone"===C&&I&&a.addEventListener("bottomBarsUpdate",h.throttle(function(a){a=a.detail.visibleHeight+"px";0<r.scrollY&&(document.getElementsByClassName("sparkle-container")[0].style.bottom=a)},100))});W.addEventListener("click",function(){U("customer_closed")});return{display:function(a){if("Android"===C||"iPhone"===
C){var b=p.shouldAddPaddingForPage(Q);K(a,b)}else K(a)},isSparkleDisplaying:function(){return L}}},removeSparkleFromView:function(a){a&&(a.classList.add("sparkle-closing"),L=!1,setTimeout(function(){c(r).unbind("scroll",v.detectUserScroll());a.remove()},n.timer.animationDelay))}};d={models:{},dismissWithId:function(a,b,c){var d=document.getElementsByClassName("sparkle-container")[0];d&&d.getAttribute(e.view.saDOMNameAttribute)===a?(ha.removeSparkleFromView(d),b&&"function"===typeof b&&b()):c&&"function"===
typeof c&&c(e.errorCodes.SA_NOT_DISPLAYED)},init:function(a){Q=a.page;(C=a.platform)||(C=k.platformCheck());this.models=this.createModels(a.sparkles);this.render()},invokeOnDemandSparkle:function(a){Q=a.page;(C=a.platform)||(C=k.platformCheck());if(a=S.create(a.sparkles))Array.isArray(this.models)?this.models.unshift(a):this.models=[a];this.render()},createModels:function(a){var b=[];a.forEach(function(a){(a=S.create(a))&&b.push(a)});return b},getNextEligible:function(){for(var a=0;a<this.models.length&&
!this.models[a].isEligible();a++);return this.models.splice(a,1)[0]},render:function(){setTimeout(function(){if(f.view.hasNoPopover()){var a=this.getNextEligible();a&&!k.weblabTriggerAndCheck(a,n.shoppingAidsType)&&a.done();if(a){if(k.isDefined(a.getTriggerDependentTargeting())){var b=a.getTriggerDependentTargeting();a.setClientSideTargetting(b);a=v.executeContextAwareSubstitution(a)}b=ha.create(a,this);a.setBottomNavPadding();a.getOnDemand()&&b.isSparkleDisplaying()?(a=a.getFailureResponse())&&"function"===
typeof a&&a(e.errorCodes.SPARKLE_IN_VIEW):b.display(a.getEventData().state)}else 0<this.models.length&&this.render()}else this.render()}.bind(this),n.timer.displayLoopDelay)},sparkleShown:function(a,b){v.logImpression(a.getIdentifier(),a.getSchedulingType(),{successCallback:function(){v.logCounter("logImpression_success");var b=a.getSuccessResponse();b&&"function"===typeof b&&b()},errorCallback:function(){v.logCounter("logImpression_error")},contextAwareIndex:a.getContextAwareIndex()});v.logCounter("sparkleShown");
v.logCounter(a.getIdentifier()+"_sparkleShown");this._scrollDepthMetricLogger(a.getIdentifier(),D,m.SPARKLE_DISPLAY_ATF,m.SPARKLE_DISPLAY_SCROLLED,m.SPARKLE_DISPLAY_DEPTH,m.SPARKLE_DISPLAY_DEPTH_PERCENTAGE);a.getEventData().onShow({requestUpdate:b})},sparkleClicked:function(a,b){a.getEventData().onClick({state:b.id});b=r.scrollY-D;this._scrollDepthMetricLogger(a.getIdentifier(),b,m.SPARKLE_CTA_ATF,m.SPARKLE_CTA_SCROLLED,m.SPARKLE_CTA_DEPTH,m.SPARKLE_CTA_DEPTH_PERCENTAGE,m.SPARKLE_CTA);b=Date.now()-
G;v.logCounter(m.SPARKLE_CTA_TIME,b);v.logCounter(a.getIdentifier()+"_"+m.SPARKLE_CTA_TIME,b);"Android"===C&&(v.logCounter(m.SPARKLE_CTA_MAX_SCROLL_DEPTH,z),v.logCounter(a.getIdentifier()+"_"+m.SPARKLE_CTA_MAX_SCROLL_DEPTH,z),b=Math.ceil(z/B*100),v.logCounter(m.SPARKLE_CTA_MAX_SCROLL_DEPTH_PERCENTAGE,b),v.logCounter(a.getIdentifier()+"_"+m.SPARKLE_CTA_MAX_SCROLL_DEPTH_PERCENTAGE,b),z=0,v.logCounter(m.SPARKLE_CTA_SCROLL_DIRECTION_CHANGE+K),v.logCounter(a.getIdentifier()+"_"+m.SPARKLE_CTA_SCROLL_DIRECTION_CHANGE+
K),K=0)},sparkleClosed:function(a,b){if("customer_closed"===b){v.logImpression(a.getIdentifier(),a.getSchedulingType(),{userEvent:e.userEvent.optOut,successCallback:function(){v.logCounter("logOptOut_success");var b=a.getSuccessResponse();b&&"function"===typeof b&&b()},errorCallback:function(){v.logCounter("logOptOut_error")},contextAwareIndex:a.getContextAwareIndex()});var c=r.scrollY-D;this._scrollDepthMetricLogger(a.getIdentifier(),c,m.SPARKLE_DISMISS_ATF,m.SPARKLE_DISMISS_SCROLLED,m.SPARKLE_DISMISS_DEPTH,
m.SPARKLE_DISMISS_DEPTH_PERCENTAGE,m.SPARKLE_DISMISSED)}v.logCounter("sparkleClosed");v.logCounter("sparkleClosed_"+b);v.logCounter(a.getIdentifier()+"_sparkleClosed");v.logCounter(a.getIdentifier()+"_sparkleClosed_"+b);c=Date.now()-G;v.logCounter(m.SPARKLE_DISPLAY_DURATION,c);v.logCounter(a.getIdentifier()+"_"+m.SPARKLE_DISPLAY_DURATION,c);"Android"===C&&(v.logCounter(m.SPARKLE_DISMISS_MAX_SCROLL_DEPTH,z),v.logCounter(a.getIdentifier()+"_"+m.SPARKLE_DISMISS_MAX_SCROLL_DEPTH,z),c=Math.ceil(z/B*100),
v.logCounter(m.SPARKLE_DISMISS_MAX_SCROLL_DEPTH_PERCENTAGE,c),v.logCounter(a.getIdentifier()+"_"+m.SPARKLE_DISMISS_MAX_SCROLL_DEPTH_PERCENTAGE,c),z=0,v.logCounter(m.SPARKLE_DISMISS_SCROLL_DIRECTION_CHANGE+K),v.logCounter(a.getIdentifier()+"_"+m.SPARKLE_DISMISS_SCROLL_DIRECTION_CHANGE+K),K=0);a.done();a.getEventData().onClose({reason:b});this.render()},sparkleComplete:function(a){v.logInteraction(a.getIdentifier(),a.getSchedulingType,function(){v.logCounter("logInteraction_success");v.logCounter(a.getIdentifier()+
"_logInteraction_success")},function(){v.logCounter("logInteraction_error");v.logCounter(a.getIdentifier()+"_logInteraction_error")})},getMetricsIntersectionObserver:function(){"Android"===C&&(v.logCounter("sparkle_android_user"),r.IntersectionObserver?v.logCounter("sparkle_android_intersectionObserver_supported"):v.logCounter("sparkle_android_intersectionObserver_not_supported"))},_isSparkleATF:function(a){return a<B},_scrollDepthMetricLogger:function(a,b,c,d,e,f,g){var m=Math.ceil(b/B*100);this._isSparkleATF(b)?
(v.logCounter(c),v.logCounter(a+"_"+c)):(v.logCounter(d),v.logCounter(a+"_"+d));k.isDefined(g)&&(v.logCounter(g),v.logCounter(a+"_"+g));v.logCounter(e,b);v.logCounter(a+"_"+e,b);v.logCounter(f,m);v.logCounter(a+"_"+f,m)}};return{init:d.init.bind(d),invokeOnDemandSparkle:d.invokeOnDemandSparkle.bind(d),dismissWithId:d.dismissWithId.bind(d)}})})();(function(){q.register("SparkleConstants",function(){return{timer:{displayLoopDelay:3E3,animationDelay:500,autoCloseDelay:1E4},width:{maxCTAWidth:30,minCTAWidth:10,
widthFactor:2.3},sparkleTypes:{static:"static",dynamic:"dynamic"},sparkleEvent:{displayEvent:"display",closeEvent:"close"},shoppingAidsType:"sparkle",spinnerUrl:"https://m.media-amazon.com/images/G/01/amazonui/loading/loading-4x._V1_.gif",defaultAltText:"Amazon Retail Website logo",whiteColor:"rgb(255,255,255)",widthString:"width: ",sparkleAnnouncementPrefix:"Notification on Screen",sparkleAnnouncementSuffix:"Please go to the end of the page to interact with this notification",percentile:"%;"}})})();
(function(){q.register("NudgeStyles",function(){return{nudgeDefaultCSS:JSON.stringify([".nudge-container {             border: 1px solid transparent;             background: linear-gradient(135deg, #F6E6DF 0%, #FCECDC 26%, #FFF1EA 57%, #FEF2E1 80.5%, #FAF5F5 100%) padding-box, linear-gradient(90deg, #FDD5CD 0%, #FBE8E4 100%) border-box;             position: fixed;             isolation: isolate;             bottom: 0;             left: 0;             right: 0;             margin: 4px;             box-sizing: border-box;             display: flex;             align-items: center;             height: 48px;             border-radius: 8px;             box-shadow: 0px 8px 12px rgba(132, 64, 0, 0.2);             z-index: 999;             opacity: 0.5;             transform: translateY(100%);             transition: transform 0.6s, opacity 0.5s;         }",
".nudge-close {             display: flex;             align-items: center;             justify-content: center;             flex-shrink: 0;             width: 44px;             height: 48px;         }",".nudge-close-btn {             border: 1px solid #FBE7E3;             border-radius: 50%;             padding: 0;             background: white;             width: 30px;             height: 30px;             cursor: pointer;             display: flex;             align-items: center;             justify-content: center;             vertical-align: middle;             margin: 0 auto;         }",
".nudge-close-btn .a-icon {             width: 12px;             height: 12px;             transform: scale(0.67);         }",".nudge-image-container {             display: flex;             align-items: center;             justify-content: center;             flex-shrink: 0;             width: 46px;             height: 46px;             background: white;             border-radius: 8px 0 0 8px;         }",".nudge-text-container {             display: flex;             flex-direction: column;             justify-content: center;             flex-grow: 1;             height: 48px;             padding-left: 8px;             overflow: hidden;         }",
".nudge-header-container {             display: block;         }",".nudge-header {             display: -webkit-box;             -webkit-line-clamp: 2;             -webkit-box-orient: vertical;             overflow: hidden;             text-overflow: ellipsis;             white-space: normal;             word-break: break-word;             color: #0F1111;             font-size: 13px;             font-weight: 400;             margin: 0;             line-height: 18px;         }",".nudge-subheader-container {             display: block;         }",
".nudge-subheader {             display: -webkit-box;             -webkit-line-clamp: 1;             -webkit-box-orient: vertical;             overflow: hidden;             text-overflow: ellipsis;             white-space: normal;             word-break: break-word;             color: #0F1111;             font-size: 11px;             font-weight: 400;             margin: 0;             line-height: 16px;         }",".nudge-linkText-container {             display: flex;             align-items: center;             justify-content: center;             flex-shrink: 0;             min-width: 85px;             max-width: 85px;             height: 48px;             padding-left: 8px;             padding-right: 8px;         }",
".nudge-linkText {             color: #2A4DC8 !important;             font-weight: 400;             font-size: 13px;             line-height: 18px;             text-decoration: none;             display: -webkit-box;             -webkit-line-clamp: 2;             -webkit-box-orient: vertical;             overflow: hidden;             text-overflow: ellipsis;             white-space: normal;             word-break: break-word;         }",".nudge-image, .nudge-image-loader {             height: 46px;             width: 46px;         }",
".nudge-image {             border-radius: 8px 0 0 8px;         }",".nudge-image-loader {             display: none;         }.nudge-container.nudge-loading .nudge-image-loader {             display: block;         }",".nudge-container.nudge-loading .nudge-image {             display: none;         }",".nudge-container.nudge-loading .nudge-content {             pointer-events: none;         }",".nudge-container.nudge-loading .nudge-linkText-container {             pointer-events: none;         }",
".nudge-container.nudge-open {             transform: translateY(0);         }",".nudge-backdrop-blur.nudge-open {             transform: translateY(200px);         }",".nudge-container.nudge-open {             opacity: 0.94;         }",".nudge-backdrop-blur.nudge-open {             opacity: 1;         }",".nudge-container.nudge-minimizing {             transform: translateY(400%);             transition: transform 0.6s;         }",".nudge-backdrop-blur.nudge-minimizing {             transform: translateY(400%) translateY(200px);             transition: transform 0.6s;         }",
".nudge-container.nudge-closing {             transform: translateY(110%);             opacity: 0;         }",".nudge-backdrop-blur.nudge-closing {             transform: translateY(110%) translateY(200px);             opacity: 0;         }",".nudge-backdrop-blur {             position: fixed;             bottom: 0;             left: 0;             right: 0;             margin: 0px 0px 4px 0px;             height: 248px;             -webkit-backdrop-filter: blur(5px);             backdrop-filter: blur(5px);             border-radius: 8px;             z-index: 998;             pointer-events: none;             opacity: 0;             transform: translateY(100%) translateY(200px);             transition: transform 0.6s, opacity 0.5s;         }",
".nudge-container.nudge-no-transition {             transition: none;         }",".nudge-container.nudge-no-transition.nudge-restore-transition {             transition: transform 0.8s, opacity 0.7s;         }",".nudge-container.nudge-restoring, .nudge-backdrop-blur.nudge-restoring {             transition: transform 0.8s;         }"])}})})();(function(){q.when("A","jQuery","QTipsMetrics","QTipsConstants","QTips","SAEndPointsConfig","ShoppingAidsGenericUtils","LogImpressionManager","SAFeature","NudgeConfig",
"SAMetricConstants","NudgeConstants","NudgeStyles").register("ShoppingAidsNudges",function(h,c,a,e,f,d,b,k,g,l,p,m,A){var x=d.logImpressionEndPoint,y=0,n=0,u=0,L=0,z=r.innerHeight,K,G,D,B,Q,C,I,v=!1,S=!1,ha=!1,T=!1,F=null,da=w,E=w,aa=w,t={isMinimizeRestoreEnabled:function(){return!0===m.features.minimizeRestoreEnabled[E]||t.isDismissOnTouchEnabled()||t.isDismissOnMovementEnabled()},isMinimizeUpscrollEnabled:function(){return!0===m.features.minimizeUpscrollEnabled[E]},isDismissOnTouchEnabled:function(){return!0===
m.features.dismissOnTouch[E]},isDismissOnMovementEnabled:function(){return!0===m.features.dismissOnMovement[E]},isDismissPermanentlyEnabled:function(){return!0===m.features.dismissPermanently[E]},logImpression:function(a,c,d){if(b.isDefined(d)){var e=d.userEvent;var f=d.successCallback;var l=d.errorCallback}var p={pageType:da,shoppingAidsType:m.shoppingAidsType,id:a,schedulingType:c};b.isDefined(e)&&(p.userEvent=e);g.clientSideCaching?k.handle(a,c,m.shoppingAidsType,da,d):h.ajax(x,{method:"GET",contentType:"application/json; charset\x3dutf-8",
timeout:6E4,params:p,success:f,error:l})},logCounter:function(b,c){a.incrementCounter("shopping_aids_"+E+"_"+m.shoppingAidsType+b,c);a.incrementCounter("shopping_aids_"+da+"_"+m.shoppingAidsType+"_"+b,c);a.incrementCounter("shopping_aids_"+m.shoppingAidsType+"_"+b,c)},injectStyleToDom:function(){if(!document.getElementById("nudge-styles")){var a=document.createElement("style");a.id="nudge-styles";a.innerHTML=JSON.parse(A.nudgeDefaultCSS).join("");document.head.appendChild(a)}},calculateDynamicPadding:function(){var a=
Math.max(0,r.scrollY);if("true"===b.getQueryParameterValue(m.HW_ENABLED_PARAM)&&t.isAtTopOfPage(m.topOfPageThresholdAndroidPadding)){if("Android"===E)return l.androidBottomPadding_SubnavPresent+l.androidBottomPadding_TopnavPresent;if("iPhone"===E)return l.iOSBottomPadding_SubnavPresent+l.iOSBottomPadding_TopnavPresent}var c="Android"===E?l.androidBottomPadding_SubnavPresent:l.iOSBottomPadding_SubnavPresent;return Math.max(0,c-Math.min(a,c))},isAtEndOfPage:function(){return r.innerHeight+r.scrollY>=
Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)-m.endOfPageThreshold},isAtTopOfPage:function(a){a=a!==w?a:m.topOfPageThreshold;return Math.max(0,r.scrollY)<=a},detectUserScroll:function(a){var b=Math.max(0,r.scrollY);if("Android"===E&&a){var c=t.calculateDynamicPadding();a(c)}y=Math.max(y,b);b<y&&!n&&(n=1)},minimizeNudge:function(a,b,c){t.isMinimizeRestoreEnabled()&&a&&document.contains(a)&&!v&&(D&&(clearTimeout(D),D=null),a.classList.remove("nudge-restoring"),a.classList.add("nudge-minimizing"),
b&&document.contains(b)&&(b.classList.remove("nudge-restoring"),b.classList.add("nudge-minimizing")),v=!0)},restoreNudge:function(a,b,c){t.isMinimizeRestoreEnabled()?v&&a&&document.contains(a)&&(D&&(clearTimeout(D),D=null),G&&(clearTimeout(G),G=null),G=setTimeout(function(){G=null;v=!1;"iPhone"===E&&aa&&c?t.checkAndAdjustPosition(a,b,c,function(){t.startRestoreAnimation(a,b)}):("Android"===E&&c&&t.detectUserScroll(c),t.startRestoreAnimation(a,b))},m.timer.restoreDelay)):"iPhone"===E&&aa&&c&&t.checkAndAdjustPosition(a,
b,c)},startRestoreAnimation:function(a,b){a&&document.contains(a)&&(a.classList.remove("nudge-minimizing"),a.classList.remove("nudge-restoring"),a.classList.add("nudge-restoring"),b&&document.contains(b)&&(b.classList.remove("nudge-minimizing"),b.classList.remove("nudge-restoring"),b.classList.add("nudge-restoring")),D=setTimeout(function(){a&&document.contains(a)&&a.classList.remove("nudge-restoring");b&&document.contains(b)&&b.classList.remove("nudge-restoring");D=null},m.timer.restoreAnimationDelay))},
checkAndAdjustPosition:function(a,b,c,d){a&&document.contains(a)&&"iPhone"===E?v&&t.isMinimizeRestoreEnabled()?d&&d():q.when("MShopChrome").execute(function(b){b.getBottomBarsHeight({successCallback:function(b){var e=b.visibleHeight;t.isAtEndOfPage()&&(e=m.endOfPageVisibleHeight);var f=l.shouldAddPaddingForPage(da);b=parseInt(a.style.bottom);t.isAtTopOfPage(0)&&f&&(f=t.calculateDynamicPadding(),e+=f);e=Math.max(e,l.iOSMinimumBottomHeight);2<=Math.abs(b-e)&&!v&&c(e);d&&setTimeout(d,50)}})}):d&&d()},
copyToClipboard:function(a){return new Promise(function(b,c){navigator.clipboard?navigator.clipboard.writeText(a).then(b).catch(function(c){t.logCounter("clipboard_copy_failed");t.fallbackCopy(a);b()}):(t.fallbackCopy(a),b())})},fallbackCopy:function(a){var b=document.createElement("textarea");b.value=a;b.style.position="fixed";b.style.opacity="0";document.body.appendChild(b);b.focus();b.select();try{document.execCommand("copy")}catch(ra){t.logCounter("fallback_copy_failed")}document.body.removeChild(b)}},
qa={create:function(a){var b=a.identifier,c=a.nudgeDisplayIcon,d=a.nudgeDisplayIconAltText,e=a.nudgeHeaderDisplayText,f=a.nudgeSubheaderDisplayText,k=a.nudgeCtaText,g=a.nudgeCtaURL,l=a.schedulingType,p=a.nudgeType,A=a.nudgeBottomNavPadding,y=a.nudgeBackGroundColor,h=a.nudgeBorderColor,n=a.nudgeBorderStyle,x=a.nudgeDescriptionColor,u=a.nudgeUIStrings,q=!1;var L={requestUpdate:w,state:"initial",onShow:function(a){this.requestUpdate=a.requestUpdate},onClick:function(){this.requestUpdate({signal:"complete"});
p!==m.nudgeTypes.deliveryOTP&&(I=setTimeout(function(){r.location.href=g;I=null},m.timer.animationDelay))},onClose:function(){}};return{getIdentifier:function(){return b},getNudgeDisplayIcon:function(){return c},getNudgeDisplayIconAltText:function(){return d},getNudgeHeaderDisplayText:function(){return e},getNudgeSubheaderDisplayText:function(){return f},getNudgeCtaText:function(){return k},getNudgeCtaURL:function(){return g},getSchedulingType:function(){return l},getNudgeType:function(){return p},
getNudgeBottomNavPadding:function(){return A},getNudgeBackGroundColor:function(){return y},getNudgeBorderColor:function(){return h},getNudgeBorderStyle:function(){return n},getNudgeDescriptionColor:function(){return x},getNudgeUIStrings:function(){return u},getSuccessResponse:function(){return a.successResponse},getFailureResponse:function(){return a.failureResponse},getEventData:function(){return L},isEligible:function(){return!(!L||q)},isDone:function(){return q},done:function(){q=!0},setBottomNavPadding:function(){aa=
"0"!==A?A:w}}}},oa={create:function(b,d){function f(){var a=b.getNudgeHeaderDisplayText()||"",c=b.getNudgeSubheaderDisplayText()||"",d=b.getNudgeCtaText();D.innerHTML=a;ba.textContent=c;D.ariaHidden="true";ba.ariaHidden="true";var e=r.getComputedStyle(D);e=parseInt(e.lineHeight,10);G.style.display=D.clientHeight>e?"none":"block";a=a.replace(/<[^>]*>/g,"");C.ariaLabel=a+(c?". "+c:"")+"."+d;C.textContent=d;U.src=b.getNudgeDisplayIcon();b.getNudgeType()===m.nudgeTypes.deliveryOTP&&t.logCounter("delivery_otp_updateUI")}
function k(a){var b=a=parseInt(a,10);"iPhone"===E&&aa&&(b=Math.max(a,l.iOSMinimumBottomHeight));a=b+"px";v||n.style.bottom===a||(n.style.bottom=a,H&&document.contains(H)&&(H.style.bottom=a))}function g(b){if("Android"===E&&b){var d=t.calculateDynamicPadding();k(d)}else"iPhone"===E&&aa&&q.when("MShopChrome").execute(function(a){a.getBottomBarsHeight({successCallback:function(a){if(b){var d=t.calculateDynamicPadding();d=a.visibleHeight+d}else d=a.visibleHeight;var e=t.isAtEndOfPage();e&&(d=m.endOfPageVisibleHeight);
k(d);la=Math.max(la,e?m.endOfPageVisibleHeight:a.visibleHeight);c(r).bind("scroll",na)},failCallback:function(a){t.logCounter("fetchBottomHeight_Failure")}})});a.incrementCounter(p.NUDGE_BOTTOM_PADDING_PREFIX+da+"_"+E+"_bottomNav_"+!!aa+"_Subnav"+b)}function A(a){a?n.classList.add("nudge-loading"):n.classList.remove("nudge-loading")}function y(a){v=!1;F&&(clearTimeout(F),F=null);oa.removeNudgeFromView(n,H,na,Z,ea,fa,ma);d.nudgeClosed(b,a)}t.injectStyleToDom();var n=document.createElement("div");n.classList.add("nudge-container");
n.setAttribute(e.view.saDOMNameAttribute,b.getIdentifier());n.role="alert";n.ariaLive="polite";n.ariaLabel="Notification on Screen";var x=document.createElement("div");x.classList.add("nudge-image-container");var z=document.createElement("img");z.classList.add("nudge-image-loader");z.src=m.spinnerUrl;var U=document.createElement("img");U.classList.add("nudge-image");U.src=b.getNudgeDisplayIcon();U.alt=b.getNudgeDisplayIconAltText()?b.getNudgeDisplayIconAltText():m.defaultAltText;x.appendChild(z);
x.appendChild(U);z=document.createElement("div");z.classList.add("nudge-header-container");var D=document.createElement("div");D.classList.add("nudge-header");D.innerHTML=" ";z.appendChild(D);var G=document.createElement("div");G.classList.add("nudge-subheader-container");var ba=document.createElement("div");ba.classList.add("nudge-subheader");ba.innerHTML=" ";G.appendChild(ba);var B=document.createElement("div");B.classList.add("nudge-linkText-container");var C=document.createElement("a");C.classList.add("nudge-linkText");
C.href="#";C.textContent=b.getNudgeCtaText();B.appendChild(C);var I=document.createElement("div");I.classList.add("nudge-close");var M=document.createElement("button");M.classList.add("nudge-close-btn");var R=b.getNudgeUIStrings(),Y={};try{Y=R?JSON.parse(R):{}}catch(ta){Y={}}M.ariaLabel=Y.closeButtonLabel?Y.closeButtonLabel:"close";R=document.createElement("i");R.classList.add("a-icon","a-icon-close","a-icon-mini");M.appendChild(R);I.appendChild(M);M=document.createElement("div");M.classList.add("nudge-text-container");
M.appendChild(z);M.appendChild(G);var H=null,Z,ea=null,fa=null,ma=null,pa=r.scrollY,la=0,na=h.throttle(function(){t.detectUserScroll(k);var a=Math.max(0,r.scrollY),b=a<pa;pa=a;ha=t.isAtTopOfPage(m.topOfPageThresholdMinimization[E]);S=t.isAtEndOfPage();a=!v&&!S&&!ha;!t.isMinimizeUpscrollEnabled()&&b&&(a=!1);a&&(t.isDismissOnMovementEnabled()&&(T=!0),t.minimizeNudge(n,H,k));if("iPhone"===E&&aa){var c=l.shouldAddPaddingForPage(da);b=n.style.bottom;a=t.isAtEndOfPage()?m.endOfPageVisibleHeight:la;if(t.isAtTopOfPage(0)&&
c){var d=t.calculateDynamicPadding();d=a+d}else!t.isAtTopOfPage(0)&&parseInt(b,10)>a&&c&&(d=a);d===w||d===parseInt(b,10)||v||k(d)}K&&clearTimeout(K);K=(r.originalSetTimeout||setTimeout)(function(){if(!T||t.isAtTopOfPage(m.topOfPageThresholdRestore))T&&t.isAtTopOfPage(m.topOfPageThresholdRestore)&&(T=!1),t.restoreNudge(n,H,k),K=null},m.timer.scrollRestoreDelay)},m.timer.scrollThrottleDelay);n.appendChild(x);n.appendChild(M);n.appendChild(B);n.appendChild(I);B.addEventListener("click",function(a){a.preventDefault();
if(b.getNudgeType()===m.nudgeTypes.deliveryOTP&&(a=(a=document.querySelector(".nudge-header"))?a.querySelector("b"):null)&&(a=a.textContent.trim())){t.copyToClipboard(a).finally(function(){A(!0);d.nudgeClicked(b)});return}A(!0);d.nudgeClicked(b)});I.addEventListener("click",function(){y("customer_closed")});t.isDismissOnTouchEnabled()&&document.addEventListener("touchstart",function(a){n.contains(a.target)||setTimeout(function(){t.isDismissPermanentlyEnabled()?y("dismiss_touch"):(T=!0,t.minimizeNudge(n,
H,k))},0)});t.isDismissOnMovementEnabled()&&(fa=h.throttle(function(){t.isAtTopOfPage(m.topOfPageThresholdRestore)||(t.isDismissPermanentlyEnabled()?y("dismiss_movement"):(T=!0,t.minimizeNudge(n,H,k)),r.removeEventListener("scroll",fa))},0),r.addEventListener("scroll",fa));return{display:function(){var a=document.querySelector(".nudge-backdrop-blur");a&&a.remove();H=document.createElement("div");H.classList.add("nudge-backdrop-blur");H.style.backdropFilter="";H.style.webkitBackdropFilter="";document.body.appendChild(H);
document.body.appendChild(n);Q=setTimeout(function(){n.classList.add("nudge-open");H.classList.add("nudge-open");b.setBottomNavPadding();"iPhone"===E&&aa||c(r).bind("scroll",na);if("Android"===E||"iPhone"===E){var a=l.shouldAddPaddingForPage(da);g(a)}"Android"===E&&(t.logCounter("nudge_android_user"),r.IntersectionObserver?t.logCounter("nudge_android_intersectionObserver_supported"):t.logCounter("nudge_android_intersectionObserver_not_supported"));u=Date.now();L=r.scrollY;S=t.isAtEndOfPage();f();
b.getNudgeBackGroundColor()&&(n.style.background=b.getNudgeBackGroundColor());b.getNudgeBorderColor()&&(n.style.borderColor=b.getNudgeBorderColor());b.getNudgeBorderStyle()&&(n.style.borderStyle=b.getNudgeBorderStyle());b.getNudgeDescriptionColor()&&(D.style.color=b.getNudgeDescriptionColor(),ba.style.color=b.getNudgeDescriptionColor());ma=function(){setTimeout(f,100)};r.addEventListener("orientationchange",ma);"iPhone"===E&&aa&&(q.when("mash").execute(function(a){Z=h.throttle(function(a){a=a.detail.visibleHeight;
if(S=t.isAtEndOfPage())a=m.endOfPageVisibleHeight;la=Math.max(la,a);0<r.scrollY&&!S&&k(a)},100);a.addEventListener("bottomBarsUpdate",Z)}),ea=setInterval(function(){var a=t.isAtEndOfPage(),b=t.isAtTopOfPage();a||b||t.checkAndAdjustPosition(n,H,k)},250));d.nudgeShown(b,function(a){return"complete"===a.signal?(d.nudgeComplete(b),y("client_complete"),!0):!1});n.removeAttribute("role");n.removeAttribute("aria-live");n.removeAttribute("aria-label");F=setTimeout(function(){y("auto_dismiss")},m.timer.autoCloseDelay);
Q=null},m.timer.animationDelay)}}},removeNudgeFromView:function(a,b,d,e,f,k,g){a&&(a.classList.add("nudge-closing"),b&&(b.classList.remove("nudge-open"),b.classList.add("nudge-closing"),b.style.backdropFilter="none",b.style.webkitBackdropFilter="none"),clearTimeout(K),clearTimeout(G),clearTimeout(D),clearTimeout(B),clearTimeout(Q),clearTimeout(C),clearTimeout(I),clearTimeout(F),f&&(clearInterval(f),f=null),L=u=n=y=0,ha=S=v=!1,B=setTimeout(function(){B=null;d&&(c(r).unbind("scroll",d),d=null);e&&(q.when("mash").execute(function(a){a.removeEventListener("bottomBarsUpdate",
e)}),e=null);k&&(r.removeEventListener("scroll",k),k=null);g&&(r.removeEventListener("orientationchange",g),g=null);ea.throttledRenderRetry&&(r.removeEventListener("scroll",ea.throttledRenderRetry),ea.throttledRenderRetry=null);a&&a.parentNode&&a.remove();b&&b.parentNode&&b.remove()},m.timer.animationDelay))}},ea={models:[],isRendering:!1,throttledRenderRetry:null,init:function(a){da=a.page;E=a.platform||b.platformCheck();this.models=this.createModels(a.nudges);this.render();if(t.isDismissOnTouchEnabled()||
t.isDismissOnMovementEnabled())this.throttledRenderRetry=h.throttle(function(){t.isAtTopOfPage(m.topOfPageThresholdRestore)&&!this.isRendering&&0<this.models.length&&this.render()}.bind(this),100),r.addEventListener("scroll",this.throttledRenderRetry)},createModels:function(a){var b=[];a.forEach(function(a){(a=qa.create(a))&&b.push(a)});return b},getNextEligible:function(){for(var a=0;a<this.models.length;a++)if(this.models[a].isEligible())return this.models.splice(a,1)[0];return w},render:function(){this.isRendering||
(this.isRendering=!0,C=setTimeout(function(){if(f.view.hasNoPopover()){var a=this.getNextEligible();if(a){if((t.isDismissOnTouchEnabled()||t.isDismissOnMovementEnabled())&&!t.isAtTopOfPage(m.topOfPageThresholdRestore)){this.models.unshift(a);this.isRendering=!1;return}oa.create(a,this).display();this.isRendering=!1}else 0<this.models.length?(this.isRendering=!1,this.render()):this.isRendering=!1;C=null}else this.isRendering=!1,this.render()}.bind(this),m.timer.displayLoopDelay))},nudgeShown:function(a,
b){t.logImpression(a.getIdentifier(),a.getSchedulingType(),{successCallback:function(){t.logCounter("logImpression_success");var b=a.getSuccessResponse();b&&"function"===typeof b&&b()},errorCallback:function(){t.logCounter("logImpression_error")}});t.logCounter("nudgeShown");t.logCounter(a.getIdentifier()+"_nudgeShown");a.getNudgeType()===m.nudgeTypes.deliveryOTP&&t.logCounter("delivery_otp_nudge_shown");this._scrollDepthMetricLogger(a.getIdentifier(),L,p.NUDGE_DISPLAY_ATF,p.NUDGE_DISPLAY_SCROLLED,
p.NUDGE_DISPLAY_DEPTH,p.NUDGE_DISPLAY_DEPTH_PERCENTAGE);a.getEventData().onShow({requestUpdate:b})},nudgeClicked:function(a){a.getEventData().onClick();t.logCounter("nudgeClicked");t.logCounter(a.getIdentifier()+"_nudgeClicked");a.getNudgeType()===m.nudgeTypes.deliveryOTP&&t.logCounter("delivery_otp_nudge_clicked");var b=r.scrollY-L;this._scrollDepthMetricLogger(a.getIdentifier(),b,p.NUDGE_CTA_ATF,p.NUDGE_CTA_SCROLLED,p.NUDGE_CTA_DEPTH,p.NUDGE_CTA_DEPTH_PERCENTAGE,p.NUDGE_CTA);b=Date.now()-u;t.logCounter(p.NUDGE_CTA_TIME,
b);t.logCounter(a.getIdentifier()+"_"+p.NUDGE_CTA_TIME,b);t.logCounter(p.NUDGE_CTA_MAX_SCROLL_DEPTH,y);t.logCounter(a.getIdentifier()+"_"+p.NUDGE_CTA_MAX_SCROLL_DEPTH,y);b=Math.ceil(y/z*100);t.logCounter(p.NUDGE_CTA_MAX_SCROLL_DEPTH_PERCENTAGE,b);t.logCounter(a.getIdentifier()+"_"+p.NUDGE_CTA_MAX_SCROLL_DEPTH_PERCENTAGE,b);y=0;t.logCounter(p.NUDGE_CTA_SCROLL_DIRECTION_CHANGE+n);t.logCounter(a.getIdentifier()+"_"+p.NUDGE_CTA_SCROLL_DIRECTION_CHANGE+n);n=0},nudgeClosed:function(a,b){"customer_closed"===
b&&t.logImpression(a.getIdentifier(),a.getSchedulingType(),{userEvent:e.userEvent.optOut,successCallback:function(){t.logCounter("nudgeOptOut_success");var b=a.getSuccessResponse();b&&"function"===typeof b&&b()},errorCallback:function(){t.logCounter("nudgeOptOut_error")}});var c=r.scrollY-L;this._scrollDepthMetricLogger(a.getIdentifier(),c,p.NUDGE_DISMISS_ATF,p.NUDGE_DISMISS_SCROLLED,p.NUDGE_DISMISS_DEPTH,p.NUDGE_DISMISS_DEPTH_PERCENTAGE,p.NUDGE_DISMISSED);t.logCounter("nudgeClosed");t.logCounter("nudgeClosed_"+
b);t.logCounter(a.getIdentifier()+"_nudgeClosed");t.logCounter(a.getIdentifier()+"_nudgeClosed_"+b);a.getNudgeType()===m.nudgeTypes.deliveryOTP&&t.logCounter("delivery_otp_nudge_closed_"+b);b=Date.now()-u;t.logCounter(p.NUDGE_DISPLAY_DURATION,b);t.logCounter(a.getIdentifier()+"_"+p.NUDGE_DISPLAY_DURATION,b);t.logCounter(p.NUDGE_DISMISS_MAX_SCROLL_DEPTH,y);t.logCounter(a.getIdentifier()+"_"+p.NUDGE_DISMISS_MAX_SCROLL_DEPTH,y);b=Math.ceil(y/z*100);t.logCounter(p.NUDGE_DISMISS_MAX_SCROLL_DEPTH_PERCENTAGE,
b);t.logCounter(a.getIdentifier()+"_"+p.NUDGE_DISMISS_MAX_SCROLL_DEPTH_PERCENTAGE,b);y=0;t.logCounter(p.NUDGE_DISMISS_SCROLL_DIRECTION_CHANGE+n);t.logCounter(a.getIdentifier()+"_"+p.NUDGE_DISMISS_SCROLL_DIRECTION_CHANGE+n);n=0;a.done();this.render()},nudgeComplete:function(a){t.logCounter("nudgeComplete");t.logCounter(a.getIdentifier()+"_nudgeComplete");a.getNudgeType()===m.nudgeTypes.deliveryOTP&&t.logCounter("delivery_otp_nudge_complete")},_isNudgeATF:function(a){return a<z},_scrollDepthMetricLogger:function(a,
c,d,e,f,k,g){var m=Math.ceil(c/z*100);this._isNudgeATF(c)?(t.logCounter(d),t.logCounter(a+"_"+d)):(t.logCounter(e),t.logCounter(a+"_"+e));b.isDefined(g)&&(t.logCounter(g),t.logCounter(a+"_"+g));t.logCounter(f,c);t.logCounter(a+"_"+f,c);t.logCounter(k,m);t.logCounter(a+"_"+k,m)}};return{init:ea.init.bind(ea)}})})();(function(){q.when().register("NudgeConstants",function(){return{shoppingAidsType:"nudge",timer:{displayLoopDelay:3E3,animationDelay:500,restoreAnimationDelay:800,autoCloseDelay:2E4,scrollThrottleDelay:100,
scrollRestoreDelay:300},topOfPageThreshold:6,topOfPageThresholdRestore:6,topOfPageThresholdAndroidPadding:6,endOfPageThreshold:10,endOfPageVisibleHeight:0,topOfPageThresholdMinimization:{Android:30,iPhone:1},HW_ENABLED_PARAM:"hw_enabled",defaultAltText:"Nudge notification icon",spinnerUrl:"https://m.media-amazon.com/images/G/01/amazonui/loading/loading-4x._V1_.gif",nudgeTypes:{deliveryOTP:"DELIVERY_OTP"},features:{minimizeRestoreEnabled:{Android:!1,iPhone:!1},minimizeUpscrollEnabled:{Android:!1,iPhone:!1},
dismissOnTouch:{Android:!1,iPhone:!1},dismissOnMovement:{Android:!1,iPhone:!1},dismissPermanently:{Android:!1,iPhone:!1}}}})})();(function(){q.when("A","ValueOfFilter","HTMLFilter","CookieFilter","URLFilter","QTipsMetrics","SAMetricConstants","SAFeature","QTipsConstants","ShoppingAidsGenericUtils","PageResolver").register("ShoppingAidsFilters",function(h,c,a,e,f,d,b,k,g,l,p){return{filteredShoppingAids:{},start:function(a){return this.filterShoppingAids(a)},removeIneligibleAid:function(a,b){a.splice(b,
1)},isShoppingAidEligible:function(a){d.incrementCounter(b.SA_CACHE_PREFIX+b.CLIENTSIDE_FILTER+b.START);return-1!==this.getContextTargetingIndex(a)},getContextTargetingIndex:function(a){if(a.clientSideTargetting&&a.desiredWeblabTreatment&&-1!==a.clientSideTargetting.indexOf(g.contextAwareSADelimiter)&&-1!==a.desiredWeblabTreatment.indexOf(g.contextAwareSADelimiter))return-1;var b=0;a.invokingEventElement&&a.invokingEventType&&!a.triggerDependentCheck&&(a.triggerDependentTargeting=a.clientSideTargetting,
delete a.clientSideTargetting);if(a.clientSideTargetting){b=-1;for(var c=a.clientSideTargetting.split(g.contextAwareSADelimiter),d=0;d<c.length;d++)if(this.excecuteClientSideTargetting(c[d].trim())){b=d;break}}if(0===b&&a.desiredWeblabTreatment&&a.weblabName&&a.allocatedWeblabTreatment)for(c=a.desiredWeblabTreatment.split(g.contextAwareSADelimiter),d=0;d<c.length;d++)if(c[d].trim()===a.allocatedWeblabTreatment.trim()){b=d;break}return b},excecuteClientSideTargetting:function(a){var c=l.parseJSONStringIfValid(a);
if(l.isDefined(c)){if(l.isDefined(c.pages))return a=p.pageAdapter(),c=c.pages[a],l.isDefined(c)?this.startFilteringCriteriaExecutor(c):!0;d.incrementCounter(b.SA_CACHE_PREFIX+b.CLIENTSIDE_FILTER+b.INVALID);return!1}return this.startFilteringCriteriaExecutor(a)},filterShoppingAidsArray:function(a){for(var b=a.length-1;0<=b;b--)this.isShoppingAidEligible(a[b])||this.removeIneligibleAid(a,b)},filterShoppingAids:function(a){var b=a.ShoppingAidsList;b&&(Array.isArray(b.MultiPageShoppingAids)&&this.filterShoppingAidsArray(b.MultiPageShoppingAids),
Array.isArray(b.ToolTips)&&this.filterShoppingAidsArray(b.ToolTips),Array.isArray(b.BottomSheets)&&this.filterShoppingAidsArray(b.BottomSheets),Array.isArray(b.Sparkles)&&this.filterShoppingAidsArray(b.Sparkles),Array.isArray(b.Audiospots)&&this.filterShoppingAidsArray(b.Audiospots),Array.isArray(b.Hotspots)&&this.filterShoppingAidsArray(b.Hotspots),Array.isArray(b.Highlighters)&&this.filterShoppingAidsArray(b.Highlighters));return a},startFilteringCriteriaExecutor:function(a){a=this.splitOrCondition(a);
for(var b,c=0;c<a.length;c++)if(b=this.executeOrCondition(a[c].trim()))return!0;return!1},splitAndCondition:function(a){return a.split("(AND)")},splitOrCondition:function(a){return a.split("(OR)")},executeOrCondition:function(a){if(-1!==a.indexOf("(AND)")){a=this.splitAndCondition(a);for(var b,c=0;c<a.length;c++)if(b=this.executeFilter(a[c].trim()),!b)return!1;return!0}return this.executeFilter(a)},executeFilter:function(b){b=b.split(" ");switch(b[0]){case "url":return f.execute(b);case "cookie":return e.execute(b);
case "html":return a.execute(b);case "valueOf":return c.execute(b);case "valueOfAAPI":return!0;default:return!1}}}})})();(function(){q.when("A").register("CookieFilter",function(h){return{execute:function(c){var a=this.getCookie(),e=c[2];switch(c[1]){case "contains":return-1!==a.indexOf(e);case "not_contains":return-1===a.indexOf(e);case "pattern":return 0<(a.match(e)||[]).length;default:return!1}},getCookie:function(){return document.cookie}}})})();(function(){q.when("A").register("HTMLFilter",function(h){return{execute:function(c){var a=
c[1];switch(c[2]){case "visible":return 0<h.$(a+":visible").length;case "hidden":return 0<h.$(a+":hidden").length;case "disabled":return 0<h.$(a+":disabled").length;case "not_visible":return 0>=h.$(a+":visible").length;case "not_hidden":return 0>=h.$(a+":hidden").length;case "not_disabled":return 0>=h.$(a+":disabled").length;default:return!1}}}})})();(function(){q.when("A").register("URLFilter",function(h){return{getWindowLocationHref:function(){return r.location.href},execute:function(c){var a=this.getWindowLocationHref(),
e=c[2];switch(c[1]){case "contains":return-1!==a.indexOf(e);case "equals":return a.toLowerCase()===e.toLowerCase();case "not_equals":return a.toLowerCase()!==e.toLowerCase();case "pattern":return 0<(a.match(e)||[]).length;default:return!1}}}})})();(function(){q.when("A").register("ValueOfFilter",function(h){return{execute:function(c){for(var a=c[2],e=h.$(c[1]).text().replace(/(\r\n|\n|\r)/gm,""),f="",d=3;d<c.length-1;d++)f=f+c[d]+" ";f+=c[c.length-1];switch(a){case "greater":return Number(e.replace(/(,)/gm,
""))>Number(f);case "less":return Number(e.replace(/(,)/gm,""))>Number(f);case "equals":return e===f;case "not_equals":return e!==f;case "contains":return-1!==e.indexOf(f);case "not_contains":return-1===e.indexOf(f);case "pattern":return 0<(e.match(f)||[]).length;default:return!1}}}})})();(function(){q.when("A","QTipsMetrics").register("NestedShoppingAidHelper",function(h,c){function a(a,c){c=c||{bubbles:!1,cancelable:!1,detail:null};if(r&&r.CustomEvent)var d=new r.CustomEvent(a,{detail:c.detail});
else r&&r.initCustomEvent&&(d=document.createEvent("CustomEvent"),d.initCustomEvent(a,c.bubbles,c.cancelable,c.detail));return d}return{dispatchShoppingAidEvent:function(e){(e=a("SA:InvokeOnDemandSA",{detail:e}))?(document.dispatchEvent(e),c.incrementCounter("nestedShoppingAidHelper:ShoppingAidData:invoked")):c.incrementCounter("nestedShoppingAidHelper:CustomEvent_not_supported")},dispatchDismissShoppingAidEvent:function(e){(e=a("SA:OnDemandDismissSA",{detail:e}))?(document.dispatchEvent(e),c.incrementCounter("nestedShoppingAidHelper:ShoppingAidData:dismissed")):
c.incrementCounter("nestedShoppingAidHelper:CustomEvent_not_supported")}}})})();(function(){q.when("A","jQuery","SAAudiospotConstants","AnchorBasedSAUtils","QTipsMetrics","AudioMetrics").register("AudioStateManager",function(h,c,a,e,f,d){var b=a.metrics.PREFIX,k={playIconId:a.cssConstants.playIconId,pauseIconId:a.cssConstants.pauseIconId,playSVG:a.cssConstants.playSVG,progressBarId:a.cssConstants.progressBarId,fillerCircleId:a.cssConstants.fillerCircleId,circumference:"",elementIdStore:[],cacheElementsid:function(){this.elementIdStore.playIcon=
c(this.playIconId)[0];this.elementIdStore.pauseIcon=c(this.pauseIconId)[0];this.elementIdStore.playSVG=c(this.playSVG)[0];this.elementIdStore.progressBar=c(this.progressBarId);this.elementIdStore.fillerCircle=c(this.fillerCircleId)},_transposePlayIcon:function(){c(this.elementIdStore.playIcon).show();c(this.elementIdStore.pauseIcon).hide();c(this.elementIdStore.fillerCircle)[0].style.fill="#0B8699";c(this.elementIdStore.fillerCircle)[0].r.baseVal.value=16},_transposePauseIcon:function(){c(this.elementIdStore.playIcon).hide();
c(this.elementIdStore.pauseIcon).show();c(this.elementIdStore.fillerCircle)[0].style.fill="#fff";c(this.elementIdStore.fillerCircle)[0].r.baseVal.value=12},_modifyPlayStateCss:function(){c(this.elementIdStore.playSVG).show()},updateVisualTimer:function(a){var b=c(this.elementIdStore.progressBar)[0],d=this.circumference;a=(1-a)*d;b.style.setProperty("--initialStroke",d);b.style.strokeDashoffset=a},_resetTimer:function(){c(this.elementIdStore.progressBar)[0].style.strokeDashoffset=this.circumference},
setCircumference:function(a){a=c(this.elementIdStore.progressBar)[0];this.circumference=2*Math.PI*a.r.baseVal.value}},g={initialState:a.audioStates.INITIAL_STATE,playState:a.audioStates.PLAY_STATE,pauseState:a.audioStates.PAUSE_STATE,completeState:a.audioStates.COMPLETION_STATE,identifier:"",replayed:!1,configureAudio:function(a){g.audio=new Audio;g.audio.src=a.get("audioSource");this.identifier=a.get("identifier");this.setState(this.initialState);this._addAudioEventListeners();d._addMetricEventListeners(g.audio,
this.identifier)},_updateAnimation:function(){switch(g.state){case this.playState:this._togglePlay();break;case this.pauseState:this._togglePause();break;case this.completeState:k._resetTimer(),this._togglePause()}},_togglePlay:function(){g.audio.play();k._transposePauseIcon();k._modifyPlayStateCss();this.replayed?f.incrementCounter(b+a.metrics.REPLAY,1,this.identifier):f.incrementCounter(b+a.metrics.PLAY,1,this.identifier)},_togglePause:function(){g.audio.pause();var c=g.audio.currentTime;g.audio.currentTime=
0;k._transposePlayIcon();f.incrementCounter(b+a.metrics.PAUSE,c,this.identifier)},_addAudioEventListeners:function(){g.audio.addEventListener("ended",function(){g.setState(g.completeState);g.replayed=!0;f.incrementCounter(b+a.metrics.END,1,g.identifier)});g.audio.addEventListener("timeupdate",h.throttle(function(){g.getCurrentState()!==g.completeState&&k.updateVisualTimer(g.audio.currentTime/g.audio.duration)},500))},setState:function(a){a&&(g.state=a,this._updateAnimation())},getCurrentState:function(){return g.state},
cacheElementData:function(){k.cacheElementsid();k.setCircumference()}};return g})})();(function(){q.register("SAConfig",function(){return{cookies:{language:"lc-main"},defaultLoP:"en_US",intervalBetweenSuccessiveTips:3E3}})})();(function(){q.register("SAEndPointsConfig",function(){return{fetchShoppingAidsEndPoint:"/shoppingaids/fetchshoppingaids",logImpressionEndPoint:"/shoppingaids/logimpression"}})})();(function(){q.when("A","jQuery","ShoppingAidsGenericUtils","QTipsMetrics","ShoppingAidsFilters",
"ContextAwareSubstitutor").register("AnchorBasedSAUtils",function(h,c,a,e,f,d){return{metricsPrefix:"SA_AnchorBasedSAUtils_",aPage:"#a-page",processAnchor:function(a,d){d=a.split(d);Array.isArray(d)||(d=[d]);Array.prototype.find||(Array.prototype.find=function(a,b){var c=this.length,d;for(d=0;d<c;d+=1)if(a.call(b,this[d],d,this))return this[d];return w});return d.find(function(a,b,d){return c(a).length})||a},getIndexByAnchor:function(a,c){Array.prototype.findIndex||(Array.prototype.findIndex=function(a,
b){if(null===this)throw new TypeError("Array.prototype.findIndex called on null or undefined");if("function"!==typeof a)throw new TypeError("callback must be a function");for(var c=Object(this),d=c.length,e,f=0;f<d;f++)if(e=c[f],a.call(b,e,f,c))return f;return-1});return a.findIndex(function(a,b,d){return c+""===Object.keys(d[b])[0]},c)},getAUIScrollPageValue:function(){if(0<c(this.aPage).length){var b=parseInt(c(this.aPage).css("top"));return a.isDefined(b)?b:0}return 0},getIndexByIdentifier:function(a,
c){Array.prototype.findIndex||(Array.prototype.findIndex=function(a,b){if(null===this)throw new TypeError("Array.prototype.findIndex called on null or undefined");if("function"!==typeof a)throw new TypeError("callback must be a function");for(var c=Object(this),d=c.length,e,f=0;f<d;f++)if(e=c[f],a.call(b,e,f,c))return f;return-1});return a.findIndex(function(a,b,d){return c+""===d[b].id},c)},isElementPresent:function(b){return c(b).length&&0<c(b).length&&a.isDefined(c(b).offset())&&c(b).is(":visible")},
isElementVisible:function(b){var d=r.scrollY||r.pageYOffset,e=document.documentElement.scrollTop||document.body.scrollTop;d=a.isDefined(d)?d:e;e=d+(r.innerHeight||c(r).height());var f=c(b);f=a.isDefined(f)?f.offset():w;return a.isDefined(f)&&(f=f.top,c(b+":visible")[0]&&d<=f&&f<e)?!0:!1},isShoppingAidOverPopoverVisible:function(a,c){return this.isElementVisible(a)&&this.isElementVisible(c)?!0:!1},setDependentElement:function(a){var b=a.get("popoverAnchor");b&&(b=b.split("::"),b[1]&&"disable"===b[1]&&
a.set({dependentElementAnchor:b[1]}))},_isElementDisabled:function(a){return c(a+":disabled")[0]?!0:!1},isDependentCheckSatisfied:function(a){return(a=a.get("dependentElementAnchor"))?this._isElementDisabled(a):!0},isElementOrParentFixed:function(a){var b=!1,d=c(a);d.add(d.parents()).each(function(){"fixed"===c(this).css("position")&&(b=!0,e.incrementCounter(this.metricsPrefix+"elementOrParentFixed_"+a))});return b},onDemandContextAwareSubstitution:function(b,c){b=h.parseJSON(b.toJson());var e=f.getContextTargetingIndex(b);
if(d.substitute(b,e,c))return a.convertModel(b)},getAidAnchorElement:function(a,c){return(c=this.getAnchorFieldForValidSAType(c))?a[c]:w},getAnchorFieldForValidSAType:function(a){return{tool_tip:"elementAnchor",hotspot:"hotspotAnchor",audiospot:"audiospotAnchor"}[a]}}})})();(function(){q.when("A","jQuery","QTipsMetrics","QTipLibrary","SAMetricConstants","PageResolver","ShoppingAidsCacheData","LocalStorageInterface","SASupportedMarketplaceConfig","SADesktopConfig","SACommonConstants").register("ShoppingAidsGenericUtils",
function(h,c,a,e,f,d,b,k,g,l,p){var m;return{isDefined:function(a){return null!==a&&a!==w},isObjectEmpty:function(a){return h.objectIsEmpty(a)},_getUserAgent:function(){return r.navigator.userAgent.toLowerCase()},_getCookieList:function(){return document.cookie?document.cookie.split(";"):[]},platformCheck:function(){var b=p.UNSUPPORTED_PLATFORM;this.isMobileDevice()?this.isAndroidDevice()?b=this.isMShop()?p.MSHOP_ANDROID:p.MWEB_ANDROID:this.isIOSDevice()&&(b=this.isMShop()?p.MSHOP_IPHONE:p.MWEB_IPHONE):
this.isDesktopDevice()?b=p.DESKTOP:this.isTabletDevice()&&(b=p.TABLET);a.incrementCounter("SA_Platform_"+b);return b},isPlatformSupportedForToolTipUxExperiment:function(){var a=this.platformCheck();return a!==p.UNSUPPORTED_PLATFORM&&a!==p.DESKTOP&&a!==p.TABLET},isAndroidDevice:function(){return!!h.capabilities&&h.capabilities.android},isIOSDevice:function(){return!!h.capabilities&&h.capabilities.ios},isMShop:function(){return!!h.capabilities&&h.capabilities.isAmazonApp},isMobileDevice:function(){return!!h.capabilities&&
h.capabilities.mobile},isDesktopDevice:function(){return!!h.capabilities&&!h.capabilities.mobile&&!h.capabilities.tablet},isTabletDevice:function(){return!!h.capabilities&&h.capabilities.tablet},hasNoPopover:function(a,b,d){a=c(a);for(d=0;d<a.length;d++){var e=a[d].style,f=a[d].className;if(e&&e.display&&"none"!==e.display&&-1===f.indexOf("a-popover-secondary"))return!1}return!c(".a-sheet-content-container").is(":visible")&&!c(b).is(":visible")},weblabTriggerAndCheck:function(b,c){if("sparkle"===
c){c=new e.Model;c.set({allocatedWeblabTreatment:b.getAllocatedWeblabTreatment()});c.set({weblabName:b.getWeblabName()});c.set({desiredWeblabTreatment:b.getDesiredWeblabTreatment()});var d=c}else d=b;if(d){c=d.get("allocatedWeblabTreatment");var g=d.get("weblabName");d=d.get("desiredWeblabTreatment");return g&&c&&d?(r.ue.trigger&&(r.ue.trigger(g,c),a.incrementCounter(f.SHOPPINGAIDS_WEBLAB_TRIGGER+g+"_"+c)),c===d&&!b.get("weblabTriggerOnlyFlag")):!0}return!1},logClientSideWeblabMetricsForSAList:function(b,
c,d){h.each(b,function(b,e){h.each(b,function(b,e){b.allocatedWeblabTreatment&&b.weblabName&&b.desiredWeblabTreatment&&(a.incrementCounter(c+b.weblabName+"_"+b.allocatedWeblabTreatment),d&&a.incrementCounter(f.SHOPPINGAIDS_WEBLAB_AFTER_FETCH_CALL_BACKEND_CALL+b.weblabName+"_"+b.allocatedWeblabTreatment))})})},logClientSideWeblabMetrics:function(b,c){if(b){var d=b.get("allocatedWeblabTreatment"),e=b.get("weblabName");b=b.get("desiredWeblabTreatment");e&&d&&b&&a.incrementCounter(c+e+"_"+d)}},getCookie:function(a){for(var b=
this._getCookieList(),c=0;c<b.length;c++){var d=b[c].trim().split("\x3d"),e=d[0].replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent);if(a===e)return d.slice(1).join("\x3d").replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}},getFromLocalStorage:function(a){if(k.isLocalStorageExposed())return localStorage.getItem(a)},setInLocalStorage:function(a,b){if(k.isLocalStorageExposed())try{localStorage.setItem(a,b)}catch(y){}},removeFromLocalStorage:function(a){if(k.isLocalStorageExposed())return localStorage.removeItem(a)},
removeFromLocalStorageIfPresent:function(a){if(k.isLocalStorageExposed())return localStorage.getItem(a)?(localStorage.removeItem(a),1):0},getWindowLocationPath:function(){return r.location.pathname},getWindowLocationQueryString:function(){return r.location.search},isSADebugRequest:function(){return h.contains(d.getWindowLocationHref(),"isSADebug")&&"1"===this.getQueryParameter("isSADebug")},isMarketplaceRTLEnabled:function(){return"rtl"===document.dir},isShoppingAidForWeblabTesting:function(a){return a&&
-1!==a.indexOf("Weblab_Test")},getQueryParameter:function(a){this.isDefined(m)||(m=this.getQueryParameterMap());return m[a]?m[a]:""},getQueryParameterMap:function(){for(var a={},b=(d.getWindowLocationHref().split("?")[1]||"").split("\x26"),c=0;c<b.length;c++){var e=b[c].split("\x3d"),f=decodeURIComponent(e[0]);e=decodeURIComponent(e[1]);f&&e&&(a[f]=e)}return a},getSAListTypeFromShoppingAidsType:function(a){return{tool_tip:"ToolTips",bottom_sheet:"BottomSheets",sparkle:"Sparkles",nudge:"Nudges",multiPageShoppingAids:"MultiPageShoppingAids",
hotspot:"Hotspots",audiospot:"Audiospots"}[a]},isNonEmptyArray:function(a){return a&&Array.isArray(a)&&a.length},addStyleToHead:function(a){var b=document.createElement("style");b.innerHTML=a;document.head.appendChild(b)},defaultJSONIfUndefined:function(a,b){return a||b},parseJSONStringIfValid:function(a){try{var b=h.parseJSON(a);if(b&&"object"===typeof b)return b}catch(y){}return null},getAsin:function(){var a=(a=r.location.href.match(/\/(?:dp|gp\/product|gp\/aw\/d|gp\/mobile\/udp)\/([a-zA-Z0-9]{10})(?:\/|\?|#|$)/))?
a[1]:void 0;return"undefined"!==typeof a?a:"undefined"!==typeof r.ue_pti?r.ue_pti:""},isTandemDetailPage:function(){return document.getElementById("audibleNarrationTandem")||document.getElementById("audiblesampleplayer_mobile")||document.getElementById("audiblesampleplayer_web")||document.getElementById("audiblesampleplayer_mobileApp")?!0:!1},isDesktopPageRequestSupported:function(){var a=!1;switch(d.pageAdapter()){case "detailpage":a=this.isTandemDetailPage()}return a},getMarketplaceID:function(){return r.ue_mid},
getPageHitRequestID:function(){return r.ue_id?r.ue_id:""},isSupportedMarketplace:function(){return this.getMarketplaceName()?!0:!1},getMarketplaceName:function(){var a=this.getMarketplaceID();return g.supportedMarketplace[a]},minutesBetween:function(a,b){return Math.round(Math.abs(a-b)/6E4)},isMutationObserverSupported:function(){return r&&r.MutationObserver},isInRange:function(a,b,c){return a>=b&&a<=c},isValidCampaignAvailable:function(a){for(var b in a)if(!this.isObjectEmpty(a[b].data))return!0;
return!1},shouldBackOff:function(a){return 0<b.getTTLExpFactorForPageType(a)&&b.cacheExpiryTimeForPage(a)>=Date.now()?!0:!1},dispatchMASHEvent:function(a,b,c){this.isDefined(a)&&this.isDefined(b)&&this.isDefined(c)&&q.when("mash").execute(function(d){d.dispatchEvent({type:"sa_".concat(a.toString(),".",b.toString()),detail:c})})},getAbsoluteHeight:function(a){a="string"===typeof a?document.querySelector(a):a;var b=r.getComputedStyle(a);b=parseFloat(b.marginTop)+parseFloat(b.marginBottom);return Math.ceil(a.offsetHeight+
b)},convertModel:function(a){return a=new e.Model(a)},detachTrigger:function(a,b){this.isDefined(a)&&h.off(a,b)},isAPDNativeEnvironment:function(){return"undefined"!==typeof r.isNativeEnvironment&&r.isNativeEnvironment&&"undefined"!==typeof r.NativeInterface&&r.NativeInterface},dispatchCustomEvent:function(b,c){c=c||{bubbles:!1,cancelable:!1,detail:null};if(r&&r.CustomEvent)var d=new r.CustomEvent(b,{detail:c.detail});else r&&r.initCustomEvent&&(d=document.createEvent("CustomEvent"),d.initCustomEvent(b,
c.bubbles,c.cancelable,c.detail));d?(document.dispatchEvent(d),a.incrementCounter("ShoppingAidGenericUtils:CustomEvent:"+b+":dispatched")):a.incrementCounter("ShoppingAidGenericUtils:CustomEventDispatch:not_supported")},getQueryParameterValue:function(a){return(new r.URLSearchParams(r.location.search)).get(a)}}})})();(function(){var h;q.when("page-detector-current-page").execute(function(c){h=c});q.when("A","jQuery","QTipsMetrics","SAPageMap").register("PageResolver",function(c,a,e,f){return{urlPageTypeMap:f.urlPageTypeMap,
pageMap:f.windowPageTypeMap,subPageTypeMap:f.subPageTypeMap,umbrellaPageTypes:f.umbrellaPageTypes,getWindowLocationHref:function(){return r.location.href},pageAdapter:function(){var a=r.ue_pty;if(a&&(a=a.toLowerCase(),this.pageMap[a])){var b=this.pageMap[a];e.incrementCounter("qtipsWindowUePtyUsed")}b=this.determineSubPageType(b);if(!b){a=this.getWindowLocationHref();for(var c in this.urlPageTypeMap)if(this.urlPageTypeMap.hasOwnProperty(c)&&a.match(new RegExp(c,"i")))return e.incrementCounter("qtipsURLRegexUsed"),
this.urlPageTypeMap[c]}return b},subPageTypeAdapter:function(a){var b;if(a=this.subPageTypeFactory(a))a=a.toLowerCase(),this.subPageTypeMap[a]&&(b=this.subPageTypeMap[a]);return b},subPageTypeFactory:function(a){if("checkoutPipeline"===a)return e.incrementCounter("qtips-checkoutPageDetectorUsed"),h?h.getCurrentPage():null;e.incrementCounter("qtips-WindowUeSPtyUsed");return r.ue_spty},isUmbrellaPageTypes:function(a){return a?this.umbrellaPageTypes[a]?!0:!1:!1},determineSubPageType:function(a){return this.isUmbrellaPageTypes(a)?
this.subPageTypeAdapter(a):a}}})})();(function(){q.when("A").register("SAPageMap",function(h){return{windowPageTypeMap:{"gateway-phone-web":"gateway","gateway-phone-apps":"gateway","exports-gateway-phone-web":"gateway","exports-gateway-phone-apps":"gateway",detailaw:"detailpage",detailwebview:"detailpage",searchaw:"search",checkoutthankyouaw:"thankYou",checkoutthankyouwebview:"thankYou",amazonmoneyamazonapp:"money",shoppingcartaw:"cart",shoppingcartwebview:"cart",amazonmoneymobile:"pay",inprepaidrecharge:"recharge",
inbillpayments:"billPayment",flights:"travel",bustickets:"travel",movies:"entertainment",goldboxaw:"deals",mobiledeals:"deals",spark:"foundIt",landingaw:"browse",highvelocityevent:"event",productlifecyclesupport:"productSupport",freshmerchandisedcontentmobile:"fmc",checkoutpipeline:"checkoutPipeline",livedestination:"live",primelandingpagehorizonte:"prime",searchlessorderpharmacy:"pharmacyPrescriptionUpload",rxmanagementpage:"pharmacyPrescriptionManagement",amazonstores:"amazonStores",gphelp:"help",
searchautocomplete:"autocomplete","amazon-bazaar-gateway-page":"bazaarGateway","amazon-bazaar-account-page":"bazaarAccount","amazon-bazaar-explore-page":"bazaarExplore",lists:"lists",foresight:"contact",yourorders:"yourorder"},urlPageTypeMap:{"/(d|product|dp|reader|detail|ASIN|udp)(/|\\?.\\*ASIN\x3d)([A-Z0-9]{8,13})[$\\/\x26\\?]?":"detailpage","/(search|s)/":"search","/events":"event","/live/":"live","/b\\S+node":"browse","(.amazon.\\[^\\/\\?]+$)|(gp/(homepage.html|aw(?!/(gb|c|d|s|search)))|(exec/obidos/subst/home/home.html)|/{2}.*?/$|/{2}[^/]*?/(ref|sessionID|\\?|#))":"gateway",
"/gp/buy/thankyou/":"thankYou","/gp/buy/addressselect/handlers/display":"checkoutSelectAddress","/gp/buy/addressselect/handlers/edit-address":"checkoutEditAddress","/gp/buy/addressselect/handlers/new":"checkoutNewAddress","/gp/buy/shipoptionselect/handlers/display":"checkoutShipOption","/gp/buy/payselect/handlers/display":"checkoutPayment","/gp/buy/spc/handlers/display":"checkoutConfirmOrder","/gp/buy/billingaddressselect/handlers/display":"checkoutBilling","/gp/buy/pharmacy/handlers/display":"checkoutPharma",
"/gp/(sva(?!(\\?|/dashboard|/$))\\S+)|(payment/statement)":"pay","(/gp/(aw/c|(cart/view)))":"cart","/gp/(sva(/dashboard|\\?|/$|$))|(/amazonpay/home)":"money","/hfc/mobileRecharge":"recharge","/hfc/bill/lpg":"lpg","/hfc/dth":"dth","/hfc/bill/gas":"gas","/hfc/bill/subscriptions":"subscriptions","/hfc/bill/cable_tv":"cableTV","/hfc/bill/water":"water","/hfc/bill/municipal_tax":"municipalTax","/hfc/bill/electricity":"electricity","/hfc/bill/landline":"landline","/hfc/bill/education_fee":"educationFee",
"/hfc/bill/mobile_postpaid":"postpaid","/hfc/bill/credit-cards":"creditCard","/hfc/bill/google_play_recharge":"googlePlay","/hfc/addMoney":"addMoney","/hfc/fastag":"fastag","/bus-tickets":"bus","/flights":"flight","/train":"train","/(movie-tickets)":"entertainment","/gp/(aw/gb)|(mobile/deals)":"deals","/(your-account/order-history|your-orders|progress-tracker/package)":"yourorder","/finds":"foundIt","/spr/returns/confirmation":"onlineReturnsConfirmation","/spr/returns/contract":"onlineReturnsContract",
"/spr/returns":"onlineReturns","/ps/product-support":"productSupport","/(fmc|alm/(storefront|category))":"fmc","/amazonprime":"prime","/prescriptions/quickupload":"pharmacyPrescriptionUpload","/prescriptionmanagement/viewAllRequests":"pharmacyPrescriptionManagement","/stores/page":"amazonStores","/gp/help":"help","/autocomplete":"autocomplete","/amazon-bazaar/store":"bazaarGateway","/amazon-bazaar/my-account":"bazaarAccount","/amazon-bazaar/all-categories":"bazaarExplore","/hz/wishlist/yoursaves":"lists",
"/hz/contact-us":"contact"},subPageTypeMap:{dth:"dth",lpg:"lpg",gas:"gas",subscriptions:"subscriptions",cable_tv:"cableTV",water:"water",municipal_tax:"municipalTax",electricity:"electricity",mobile_postpaid:"postpaid",credit_card_landingpage:"creditCard",landline:"landline",education_fee:"educationFee",google_play_recharge:"googlePlay",fastag:"fastag",add_money:"addMoney",shipaddressselect:"checkoutSelectAddress",editaddress:"checkoutEditAddress",newaddress:"checkoutNewAddress",shipoptionselect:"checkoutShipOption",
payselect:"checkoutPayment",spc:"checkoutConfirmOrder",billingaddressselect:"checkoutBilling",pip:"checkoutInterstitial",rxselect:"checkoutPharma"},umbrellaPageTypes:{billPayment:!0,checkoutPipeline:!0}}})})();(function(){q.register("SACommonConstants",function(){return{MWEB_IPHONE:"mweb_iPhone",MWEB_ANDROID:"mweb_Android",DESKTOP:"Desktop",TABLET:"Tablet",MSHOP_IPHONE:"iPhone",MSHOP_ANDROID:"Android",UNSUPPORTED_PLATFORM:"Unsupported",DEFAULT_PAGE_CACHE_TTL:15}})})();(function(){q.when("A","QTipsMetrics",
"SACommonConfig","SAFeature","SACacheConfig").register("ShoppingAidsCacheData",function(h,c,a,e,f){var d={};return{setSACacheData:function(a){null!==a&&(d=a)},emptySACacheData:function(){d={version:a.cacheVersion,TTL:6E4*a.cacheTTLInMinutes+Date.now(),sessionDayImpressionCount:{},anchorGroups:{}}},getSACacheData:function(a){return d},getSAAnchorGroup:function(){return d.anchorGroups},getVersion:function(){return d.version},setVersion:function(a){d.version=a},getTTL:function(){return d.TTL},setTTL:function(a){d.TTL=
a},getSessionDayImpressionCount:function(){return d.sessionDayImpressionCount},setSessionDayImpressionCount:function(a){d.sessionDayImpressionCount=a},getSessionDayImpressionCountForSAType:function(a){try{return d.sessionDayImpressionCount[this._getDateString()][a]}catch(k){return c.incrementCounter("SA_Cache_Error_1"),0}},setAnchorGroupLastUpdateTime:function(a){try{d.anchorGroups||(d.anchorGroups={}),d.anchorGroups[a]||(d.anchorGroups[a]={}),d.anchorGroups[a].groupLastImpressionTime=Date.now()}catch(k){c.incrementCounter("SA_Cache_Error_1")}},
setSessionDayImpressionCountForSAType:function(a,e){try{d.sessionDayImpressionCount&&d.sessionDayImpressionCount[this._getDateString()]||(d.sessionDayImpressionCount={},d.sessionDayImpressionCount[this._getDateString()]={}),d.sessionDayImpressionCount[this._getDateString()][a]=e}catch(g){c.incrementCounter("SA_Cache_Error_1")}},incrementSessionDayImpressionCountForSAType:function(a){var b=this.getSessionDayImpressionCountForSAType(a);b===w&&(b=0);this.setSessionDayImpressionCountForSAType(a,b+1)},
getDailyImpressionCountForPageType:function(a){try{return d[a].impressionCount[this._getDateString()]}catch(k){return c.incrementCounter("SA_Cache_Error_1"),0}},setDailyImpressionCountForPageType:function(a,e){try{d[a]||(d[a]={}),d[a].impressionCount=e}catch(g){c.incrementCounter("SA_Cache_Error_1")}},incrementDailyImpressionCountForPageType_SAType:function(a,c){var b=this.getDailyImpressionCountForPageType_SAType(a,c);b===w&&(b=0);this.setDailyImpressionCountForPageType_SAType(a,c,b+1)},getDailyImpressionCountForPageType_SAType:function(a,
d){try{return this.getDailyImpressionCountForPageType(a)[d]}catch(g){return c.incrementCounter("SA_Cache_Error_1"),0}},setDailyImpressionCountForPageType_SAType:function(a,e,f){try{d[a]||(d[a]={}),d[a].impressionCount&&d[a].impressionCount[this._getDateString()]||(d[a].impressionCount={},d[a].impressionCount[this._getDateString()]={}),d[a].impressionCount[this._getDateString()][e]=f}catch(l){c.incrementCounter("SA_Cache_Error_1")}},getTTLForPageType:function(a){try{return d[a].TTL}catch(k){return c.incrementCounter("SA_Cache_Error_1"),
0}},getTTLExpFactorForPageType:function(a){try{return d[a].TTL.expFactor}catch(k){return c.incrementCounter("SA_Cache_Error_1"),0}},cacheExpiryTimeForPage:function(a){try{return d[a].TTL.validTill}catch(k){return c.incrementCounter("SA_Cache_Error_1"),0}},setTTLForPageType:function(a,e){try{d[a]||(d[a]={}),d[a].TTL=e}catch(g){c.incrementCounter("SA_Cache_Error_1")}},getSAListForPageType:function(a){try{return d[a].shoppingAidsList}catch(k){return c.incrementCounter("SA_Cache_Error_1"),{}}},setSAListForPageType:function(a,
e){try{d[a]||(d[a]={}),d[a].shoppingAidsList=e}catch(g){c.incrementCounter("SA_Cache_Error_1")}},removeSAListForPageType:function(a){try{delete d[a].shoppingAidsList}catch(k){c.incrementCounter("SA_Cache_Error_1")}},getSAPriorityListForPageType_SAType:function(a,e){try{return d[a].shoppingAidsList[e].priorityList}catch(g){return c.incrementCounter("SA_Cache_Error_1"),[]}},getCaheHitFrequencyForPageType:function(a){try{return d[a].count?d[a].count:0}catch(k){return c.incrementCounter("SA_Cache_Error_1"),
0}},setCaheHitFrequencyForPageType:function(a,e){try{d&&d[a]&&(d[a].count=e)}catch(g){c.incrementCounter("SA_Cache_Error_1")}},setSAPriorityListForPageType_SAType:function(a,e,f){try{d[a]||(d[a]={}),d[a].shoppingAidsList||(d[a].shoppingAidsList={}),d[a].shoppingAidsList[e]||(d[a].shoppingAidsList[e]={data:{},priorityList:[]}),d[a].shoppingAidsList[e].priorityList=f}catch(l){c.incrementCounter("SA_Cache_Error_1")}},removeShoppingAidsFromCache:function(a,e,f,l){try{l?this.removeNestedShoppingAidsFromCache(a,
e,f):this._deleteShoppingAidsFromCache(a,e,f,d)}catch(p){c.incrementCounter("SA_Cache_Error_1")}},removeNestedShoppingAidsFromCache:function(a,e,f){try{var b=this.getShoppingAidsDataForPageType_SAType(a,e,f),g=b.parentIdentity.identifier,k=b.parentIdentity.pageType,A=b.parentIdentity.SAType,x=this.getShoppingAidsDataForPageType_SAType(k,A,g).nestedSAPriorityList;h.each(x,function(a){delete d[a.pageType].shoppingAidsList[a.SAType].data[a.identifier]});this._deleteShoppingAidsFromCache(k,A,g,d)}catch(y){c.incrementCounter("SA_Cache_Error_1")}},
_deleteShoppingAidsFromCache:function(a,c,d,e){var b=this.getSAPriorityListForPageType_SAType(a,c);b.splice(b.indexOf(d),1);delete e[a].shoppingAidsList[c].data[d]},getShoppingAidsDataForPageType_SAType:function(a,e,f){try{return d[a].shoppingAidsList[e].data[f]}catch(l){return c.incrementCounter("SA_Cache_Error_1"),0}},setShoppingAidsDataForPageType_SAType:function(a,e,f,l){try{d[a]||(d[a]={}),d[a].shoppingAidsList||(d[a].shoppingAidsList={}),d[a].shoppingAidsList[e]||(d[a].shoppingAidsList[e]={data:{},
priorityList:[]}),d[a].shoppingAidsList[e].data[f]=l}catch(p){c.incrementCounter("SA_Cache_Error_1")}},_getDateString:function(){var a=new Date;return""+a.getUTCFullYear()+"-"+a.getUTCMonth()+"-"+a.getUTCDate()},getSAContextObject:function(){try{return d.context}catch(b){return c.incrementCounter("SA_Cache_Error_1"),{}}},setSAContextObject:function(a){try{d.context=a}catch(k){c.incrementCounter("SA_Cache_Error_1")}},getSAContextCookies:function(){try{return d.context.cookies}catch(b){return c.incrementCounter("SA_Cache_Error_1"),
{}}},setSAContextCookies:function(a){try{d.context||(d.context={}),d.context.cookies=a}catch(k){c.incrementCounter("SA_Cache_Error_1")}},getBackoffConfig:function(){try{return d.BackoffConfig}catch(b){return c.incrementCounter("SA_Cache_Error_1"),{}}},setBackoffConfig:function(a){try{d.BackoffConfig=a}catch(k){c.incrementCounter("SA_Cache_Error_1")}},removeValidTillForPageType:function(a){if(a)try{delete d[a].TTL.validTill}catch(k){c.incrementCounter("SA_Cache_Error_1")}},setPrefetchSourcePage:function(a,
e){if(a)try{d[a].prefetchSourcePage=e}catch(g){c.incrementCounter("SA_Cache_Error_1")}},removePrefetchSourcePage:function(a){if(a)try{delete d[a].prefetchSourcePage}catch(k){c.incrementCounter("SA_Cache_Error_1")}},getPrefetchSourcePage:function(a){if(a)try{return d[a].prefetchSourcePage}catch(k){return c.incrementCounter("SA_Cache_Error_1"),""}},isCachePrefetchedForPageType:function(a){try{return d[a].hasOwnProperty("prefetchSourcePage")}catch(k){return c.incrementCounter("SA_Cache_Error_1"),!1}}}})})();
(function(){q.when("A","jQuery","QTipsMetrics","SAMetricConstants","LocalStorageInterface","SACommonConfig","ShoppingAidsCacheData","CacheValidator","ShoppingAidsGenericUtils","StatefulSADataStore","SAFeature","StatefulSAEligiblityHelper","AnchorBasedSAUtils").register("CacheManager",function(h,c,a,e,f,d,b,k,g,l,p,m,A){var x=e.SA_CACHE_PREFIX;c={init:function(){if(k.isSACacheDataEmpty()){var a=f.getFromLocalStorage(d.saCacheKey);this.isObjectEmpty(a)?b.emptySACacheData():b.setSACacheData(a)}},invalidateCacheForPage:function(c){b.removeSAListForPageType(c);
b.removeValidTillForPageType(c);b.isCachePrefetchedForPageType(c)&&b.removePrefetchSourcePage(c);this.storeEntireCache();a.incrementCounter(x+e.SA_CACHE_INVALIDATE+c)},isObjectEmpty:function(a){return h.objectIsEmpty(a)},updateCacheAfterLogImpression:function(b){if(b){var c=b.shoppingAidsType,d=!1;h.contains(c,":childSA")&&(c=c.split(":childSA",1),d=!0);g.isDefined(A.getAnchorFieldForValidSAType(c))&&!d&&this.updateAnchorGroupImpressionTime(b.shoppingAidsAnchorGroup);(c=g.getSAListTypeFromShoppingAidsType(c))?
(d||(this.updateSessionDayImpressionCount(c),this.updatePageTypeImpressionCount(b.pageType,c)),this.updateAidsData(b.pageType,c,b.identifier,d),this.storeEntireCache()):a.incrementCounter(x+e.SATYPE_UNDEFINED)}else a.incrementCounter(x+e.IMPRESSIONDATA_UNDEFINED)},updateAnchorGroupImpressionTime:function(a){b.setAnchorGroupLastUpdateTime(a)},updateSessionDayImpressionCount:function(a){b.incrementSessionDayImpressionCountForSAType(a)},updatePageTypeImpressionCount:function(a,c){b.incrementDailyImpressionCountForPageType_SAType(a,
c)},updateAidsData:function(c,f,k,l){try{var m=b.getShoppingAidsDataForPageType_SAType(c,f,k);m.lastImpressionTime=Date.now();m.maxDisplayCount||(m.maxDisplayCount=1);g.isDefined(m.impressionInterval)||(m.impressionInterval=d.defaultImpressionIntervalInHours);--m.maxDisplayCount;var p=m.lastImpressionTime+36E5*m.impressionInterval;if(p>b.cacheExpiryTimeForPage(c)||p>b.getTTL()||0>=m.maxDisplayCount)m.allocatedWeblabTreatment||m.weblabName||m.desiredWeblabTreatment?m.weblabTriggerOnlyFlag=!0:b.removeShoppingAidsFromCache(c,
f,k,l);a.incrementCounter(x+e.LOG_IMPRESSION+e.STATUS_1);a.incrementCounter(x+e.LOG_IMPRESSION+e.STATUS_1_+k);a.incrementCounter(x+e.LOG_IMPRESSION+e.STATUS_1_+f);a.incrementCounter(x+e.LOG_IMPRESSION+e.STATUS_1_+c)}catch(G){a.incrementCounter(x+e.LOG_IMPRESSION+e.STATUS_0),a.incrementCounter(x+e.LOG_IMPRESSION+e.STATUS_0_+k),a.incrementCounter(x+e.LOG_IMPRESSION+e.STATUS_0_+f),a.incrementCounter(x+e.LOG_IMPRESSION+e.STATUS_0_+c)}},getShoppingAidsListForPageFromCache:function(c){var f=this,g={},k=
d.saListParadigms;k&&c?(h.each(k,function(d){var k=[],m=b.getSAPriorityListForPageType_SAType(c,d);m&&h.each(m,function(f){if("string"===typeof f||f instanceof String){var g=b.getShoppingAidsDataForPageType_SAType(c,d,f);g&&(k.push(g),a.incrementCounter(x+e.GET_SHOPPING_AIDS+e.STATUS_1_+f))}},f);g[d]=k},f),a.incrementCounter(x+e.GET_SHOPPING_AIDS+e.STATUS_1_+c)):a.incrementCounter(x+e.GET_SHOPPING_AIDS+e.STATUS_0_+c?c:"unknown");return g},updateShoppingAidsListForPageInCache:function(c,d){c&&d&&!this.isObjectEmpty(d)?
(b.setSAListForPageType(c,d),d=this.constructTTLObjectForPage(c,d),b.setTTLForPageType(c,d),this.storeEntireCache(),a.incrementCounter(x+e.UPDATE_SHOPPING_AIDS+e.STATUS_1),a.incrementCounter(x+e.UPDATE_SHOPPING_AIDS+e.STATUS_1_+c)):(a.incrementCounter(x+e.UPDATE_SHOPPING_AIDS+e.STATUS_0),a.incrementCounter(x+e.UPDATE_SHOPPING_AIDS+e.STATUS_0_+c?c:"unknown"))},updateContextForShoppingAidsCache:function(c){if(!c||this.isObjectEmpty(c.cookies))return a.incrementCounter(x+e.UPDATE_CONTEXT+e.STATUS_0),
!1;var f={};h.each(c.cookies,function(a,b){a&&(b=k.getValueForCookie(a),f[a]=b?b:d.defaultCookieValue)},this);b.setSAContextCookies(f);a.incrementCounter(x+e.UPDATE_CONTEXT+e.STATUS_1)},isShoppingAidsAvailableForPage:function(c,d){if(!c)return!1;d=g.isDefined(d)?d:!1;var f=!k.isSACacheForCurrentContext();f&&l.setInProgressSAs([]);return k.isSACacheDataInvalid(c,d)||f?(a.incrementCounter(x+e.CONTEXT_INVALID),b.emptySACacheData(),!1):k.isCacheExpiredForPage(c)?(a.incrementCounter(x+e.CACHE_EXPIRED+
"_"+c),this.invalidateCacheForPage(c),!1):k.isCacheAvailableForPage(c)},storeEntireCache:function(){try{f.setInLocalStorage(d.saCacheKey,JSON.stringify(b.getSACacheData()))}catch(y){a.incrementCounter(x+e.CACHE_STORAGE+e.STATUS_0)}},getSessionDayImpressionsForSAType:function(a){a=b.getSessionDayImpressionCountForSAType(a);return isNaN(a)?0:a},getPageImpressionsForSAType:function(a,c){a=b.getDailyImpressionCountForPageType_SAType(a,c);return isNaN(a)?0:a},getShoppingAidsDataForPageType_SAType:function(a,
c,d){return b.getShoppingAidsDataForPageType_SAType(a,c,d)},cleanUpCache:function(){f.removeFromLocalStorage(d.saCacheKey)},updateSessionDayImpressionCountObjectInCache:function(a){this.isObjectEmpty(a)||b.setSessionDayImpressionCount(this._getDatedImpressionCountObject(a))},updatePageImpressionCountObjectInCache:function(a,c){this.isObjectEmpty(c)||b.setDailyImpressionCountForPageType(a,this._getDatedImpressionCountObject(c))},updateCacheHitFrequencyInCache:function(a,c){this.isObjectEmpty(a)||(b.setCaheHitFrequencyForPageType(a,
c),this.storeEntireCache())},getCacheHitFrequencyForPage:function(a){if(!this.isObjectEmpty(a))return b.getCaheHitFrequencyForPageType(a)},_getDatedImpressionCountObject:function(a){var c={};c[b._getDateString()]=a;return c},constructTTLObjectForPage:function(a,c){if(!p.backoff)return{expFactor:0,validTill:6E4*d.pageTTLInMinutes(a)+Date.now()};var e=!g.isObjectEmpty(m.getEligibleInProgressSA(a));e=g.isValidCampaignAvailable(c)||e;(c=b.getTTLForPageType(a))||(c={expFactor:0});e?(c.validTill=6E4*d.pageTTLInMinutes(a)+
Date.now(),c.expFactor=0):(a=6E4*d.defaultBackoffConfig.BackoffInterval*Math.pow(d.defaultBackoffConfig.BackoffFactor,c.expFactor),e=6E4*d.defaultBackoffConfig.MaximumBackoff,a<e?(a+=Date.now(),c.validTill=a,c.expFactor+=1):(e+=Date.now(),c.validTill=e));return c},setPrefetchSourcePage:function(a,c){b.setPrefetchSourcePage(a,c)},removePrefetchSourcePage:function(a){b.removePrefetchSourcePage(a)},logMetricsIfNetworkCallSaved:function(c){b.isCachePrefetchedForPageType(c)&&(a.incrementCounter(e.NETWORK_CALL_SAVED+
c+e.DELIMITER+b.getPrefetchSourcePage(c)),this.removePrefetchSourcePage(c))}};c.init();return c})})();(function(){q.when("A","jQuery","QTipsMetrics","CacheManager","SAEndPointsConfig","SAMetricConstants","ShoppingAidsGenericUtils","SAFeature","QTipsConstants").register("LogImpressionManager",function(h,c,a,e,f,d,b,k,g){var l=f.logImpressionEndPoint;return{optionals:w,logImpressionInDynamoDB:function(c){a.incrementCounter(d.SA_CACHE_PREFIX+d.LOG_IMPRESSION+"_"+d.NETWORK_CALL_INITIATED);a.incrementCounter(d.SA_CACHE_PREFIX+
b.platformCheck+"_"+d.LOG_IMPRESSION+"_"+d.NETWORK_CALL_INITIATED);var e=this.buildParamMap(c);h.ajax(l,{method:"GET",contentType:"application/json; charset\x3dutf-8",timeout:6E3,params:e,success:function(e){a.incrementCounter(d.SA_CACHE_PREFIX+d.LOG_IMPRESSION+c.pageType+d.STATUS_1);b.isDefined(c.tooltipAllocatedTreatment)&&c.tooltipAllocatedTreatment!==g.EmptyString&&(r.ue.trigger&&r.ue.trigger(g.ToolTipUXExperimentWeblab,c.tooltipAllocatedTreatment),a.incrementCounter(g.ToolTipUXMetricForLogImpression+
c.tooltipAllocatedTreatment));c.successCallback&&"function"===typeof c.successCallback&&c.successCallback(e)},error:function(e,f){a.incrementCounter(d.SA_CACHE_PREFIX+d.LOG_IMPRESSION+c.pageType+"_"+b.platformCheck+d.STATUS_0);"NotFound"===f&&a.incrementCounter(d.SA_CACHE_PREFIX+d.LOG_IMPRESSION+c.pageType+d.STATUS_0+d.SA_UNKNOWN_ENDPOINT);c.errorCallback&&"function"===typeof c.errorCallback&&c.errorCallback(e)}})},handle:function(b,c,f,g,k){try{if(-1===b.indexOf("NO_GUARD")){var m=this.logImpressionDataBuilder(b,
c,f,g,k);this.logImpressionInDynamoDB(m);e.updateCacheAfterLogImpression(m)}}catch(u){a.incrementCounter(d.SA_CACHE_PREFIX+d.LOG_IMPRESSION+"_"+d.ERROR_CATCHED)}},logImpressionDataBuilder:function(a,c,d,e,f){var g={};g.schedulingType=c;g.shoppingAidsType=d;g.identifier=a;g.pageType=e;b.isDefined(f)&&(g.userEvent=f.userEvent,g.successCallback=f.successCallback,g.errorCallback=f.errorCallback,g.contextAwareIndex=f.contextAwareIndex,b.isDefined(f.shoppingAidsAnchorGroup)&&(g.shoppingAidsAnchorGroup=
f.shoppingAidsAnchorGroup),b.isDefined(f.tooltipAllocatedTreatment)&&(g.tooltipAllocatedTreatment=f.tooltipAllocatedTreatment));return g},buildParamMap:function(a){var c={pageType:a.pageType,shoppingAidsType:a.shoppingAidsType,id:a.identifier,schedulingType:a.schedulingType};b.isDefined(a.userEvent)&&(c.userEvent=a.userEvent);b.isDefined(a.contextAwareIndex)&&(c.contextAwareIndex=a.contextAwareIndex);b.isDefined(a.shoppingAidsAnchorGroup)&&(c.shoppingAidsAnchorGroup=a.shoppingAidsAnchorGroup);return c},
buildOptionalParameter:function(){this.optionals={};return this},withSuccessCallback:function(a){this.optionals.successCallback=a;return this},withErrorCallback:function(a){this.optionals.errorCallback=a;return this},withUserEvent:function(a){this.optionals.userEvent=a;return this},withContextAwareIndex:function(a){this.optionals.contextAwareIndex=a;return this},withShoppingAidsAnchorGroup:function(a){this.optionals.shoppingAidsAnchorGroup=a;return this},withToolTipUxAllocatedTreatmentValue:function(a){this.optionals.tooltipAllocatedTreatment=
a;return this},build:function(){return this.optionals}}})})();(function(){q.when("A","QTipsMetrics").register("LocalStorageInterface",function(h,c){return{sourceName:"ShoppingAidsMWebLibrary_",getFromLocalStorage:function(a){if(this.isLocalStorageExposed())try{return JSON.parse(localStorage.getItem(a))}catch(e){return c.incrementCounter(this.sourceName+"localStorage_parse_0"),{}}},setInLocalStorage:function(a,e){if(this.isLocalStorageExposed())try{localStorage.setItem(a,e)}catch(f){c.incrementCounter(this.sourceName+
"QuotaExceededError")}},removeFromLocalStorage:function(a){if(this.isLocalStorageExposed())return localStorage.removeItem(a)},isLocalStorageExposed:function(){try{if(r.localStorage)return 1}catch(a){return c.incrementCounter(this.sourceName+"LocalStorageNotExposed"),0}}}})})();(function(){q.when("A","SACommonConfig","ShoppingAidsCacheData","ShoppingAidsGenericUtils").register("CacheValidator",function(h,c,a,e){return{isSACacheDataInvalid:function(a,c){return this.isSACacheDataEmpty()||this.isSACacheDataVersionIncorrect(a,
c)||this.isSACacheDataTTLExpired()},isCacheAvailableForPage:function(c){return!h.objectIsEmpty(a.getSAListForPageType(c))},isCacheExpiredForPage:function(c){return a.cacheExpiryTimeForPage(c)<Date.now()},isSACacheDataEmpty:function(){return!a.getSACacheData()||h.objectIsEmpty(a.getSACacheData())},isSACacheDataVersionIncorrect:function(e,d){return d?0===a.getVersion()||a.getVersion()!==c.cacheVersionForPrefetch:0===a.getVersion()||a.getVersion()!==c.cacheVersion},isSACacheDataTTLExpired:function(){return a.getTTL()<
Date.now()},isSACacheForCurrentContext:function(){var e=this,d=a.getSAContextCookies();if(h.objectIsEmpty(d))return!1;var b=!1;h.each(d,function(a,d){b||(d=e.getValueForCookie(d),a===c.defaultCookieValue?h.objectIsEmpty(d)||d===c.defaultCookieValue||(b=!0):d!==a&&(b=!0))},e);return!b},getValueForCookie:function(a){try{var c=a.trim()+"\x3d";return this.getCookie().split(c)[1].split("; ")[0].trim()}catch(b){return""}},getCookie:function(){return document.cookie}}})})();(function(){q.register("SAMetricConstants",
function(){return{SA_CACHE_PREFIX:"SAC_",STATUS_1:"_1",STATUS_0:"_0",STATUS_1_:"_1_",STATUS_0_:"_0_",START:"_st",INVALID:"_inv",NETWORK_CALL_INITIATED:"nci",SERVERD_FROM_CACHE:"sfc",SA_CACHE_VALID:"valid",SA_CACHE_INVALIDATE:"inv_",LOG_IMPRESSION:"log_impr",GET_SHOPPING_AIDS:"getSA",UPDATE_SHOPPING_AIDS:"updateSA",CACHE_STORAGE:"store",UPDATE_CONTEXT:"updateCtxt",UPDATE_BACKOFF:"updateBkof",BACKOFF:"bkof",SA_FETCH_PREFIX:"SA_fetch_",SA_UNKNOWN_ENDPOINT:"unkown_ep",SA_TIMEOUT:"to",SATYPE_UNDEFINED:"undef",
IMPRESSIONDATA_UNDEFINED:"no_impr",CACHE_UPDATE_ERROR:"cue",FETCH_RESPONSE:"fr",SA_PREPROCESSOR:"grf",DEADLINE_FILTER:"dlf",IMPRESSIONINTERVAL_FILTER:"inf",CLIENTSIDE_FILTER:"csf",SESSION_DAY_FILTER:"sdf",CONTEXT_INVALID:"civ",CACHE_EXPIRED:"cae",ERROR_CATCHED:"ec",TIME_TAKEN:"tt",SPARKLE_BOTTOM_PADDING_PREFIX:"SA_sp_bp_",NUDGE_BOTTOM_PADDING_PREFIX:"SA_nudge_bp_",CORDOVA_SUCCESS:"cdv_1",CORDOVA_ERROR:"cdv_0",SHOPPINGAIDS_WEBLAB_TRIGGER:"SA_WL_Tr_",SHOPPINGAIDS_WEBLAB_AFTER_FETCH_CALL:"SA_WL_AFC_",
SHOPPINGAIDS_WEBLAB_AFTER_FILTERING:"SA_WL_AFL_",SHOPPINGAIDS_WEBLAB_IN_POST_QTIP_RENDER:"SA_WL_PQR_",SHOPPINGAIDS_WEBLAB_AFTER_FETCH_CALL_BACKEND_CALL:"SA_WL_AFC_ABC",SA_CONTEXT_AWARE_SUBSTITUTION:"SA_CAS_",FAIL:"_fl",SPARKLE_DISPLAY_MASH_EVENT:"DISP_MASH",SPARKLE_CLOSE_MASH_EVENT:"CLOSE_MASH",SA_FETCH_RATE_LIMITING_PREFIX:"SA_FETCH_RL_",UI_GUARD_RAIL_FILTER:"uigrf",PASS:"_ps",PAGE_LIST_EMPTY:"ple",NETWORK_CALL_SAVED:"ncs_",DELIMITER:":",SPARKLE_CTA:"cta",SPARKLE_CTA_DEPTH:"cta_depth",SPARKLE_CTA_DEPTH_PERCENTAGE:"cta_depth_percentage",
SPARKLE_CTA_TIME:"cta_time",SPARKLE_CTA_SCROLLED:"cta_scrolled",SPARKLE_CTA_SCROLL_DIRECTION_CHANGE:"cta_scroll_dir_change",SPARKLE_CTA_ATF:"cta_atf",SPARKLE_CTA_MAX_SCROLL_DEPTH:"cta_max_depth",SPARKLE_CTA_MAX_SCROLL_DEPTH_PERCENTAGE:"cta_max_depth_percentage",SPARKLE_DISMISSED:"dismiss",SPARKLE_DISMISS_DEPTH:"dismiss_depth",SPARKLE_DISMISS_DEPTH_PERCENTAGE:"dismiss_depth_percentage",SPARKLE_DISPLAY_DURATION:"display_time",SPARKLE_DISMISS_SCROLLED:"dismiss_scrolled",SPARKLE_DISMISS_SCROLL_DIRECTION_CHANGE:"dismiss_scroll_dir_change",
SPARKLE_DISMISS_ATF:"dismiss_atf",SPARKLE_DISMISS_MAX_SCROLL_DEPTH:"dismiss_max_depth",SPARKLE_DISMISS_MAX_SCROLL_DEPTH_PERCENTAGE:"dismiss_max_depth_percentage",SPARKLE_DISPLAY_DEPTH:"display_depth",SPARKLE_DISPLAY_DEPTH_PERCENTAGE:"display_depth_percentage",SPARKLE_DISPLAY_ATF:"display_atf",SPARKLE_DISPLAY_SCROLLED:"display_scrolled",NUDGE_CTA:"nudge_cta",NUDGE_CTA_DEPTH:"nudge_cta_depth",NUDGE_CTA_DEPTH_PERCENTAGE:"nudge_cta_depth_percentage",NUDGE_CTA_TIME:"nudge_cta_time",NUDGE_CTA_SCROLLED:"nudge_cta_scrolled",
NUDGE_CTA_SCROLL_DIRECTION_CHANGE:"nudge_cta_scroll_dir_change",NUDGE_CTA_ATF:"nudge_cta_atf",NUDGE_CTA_MAX_SCROLL_DEPTH:"nudge_cta_max_depth",NUDGE_CTA_MAX_SCROLL_DEPTH_PERCENTAGE:"nudge_cta_max_depth_percentage",NUDGE_DISMISSED:"nudge_dismiss",NUDGE_DISMISS_DEPTH:"nudge_dismiss_depth",NUDGE_DISMISS_DEPTH_PERCENTAGE:"nudge_dismiss_depth_percentage",NUDGE_DISPLAY_DURATION:"nudge_display_time",NUDGE_DISMISS_SCROLLED:"nudge_dismiss_scrolled",NUDGE_DISMISS_SCROLL_DIRECTION_CHANGE:"nudge_dismiss_scroll_dir_change",
NUDGE_DISMISS_ATF:"nudge_dismiss_atf",NUDGE_DISMISS_MAX_SCROLL_DEPTH:"nudge_dismiss_max_depth",NUDGE_DISMISS_MAX_SCROLL_DEPTH_PERCENTAGE:"nudge_dismiss_max_depth_percentage",NUDGE_DISPLAY_DEPTH:"nudge_display_depth",NUDGE_DISPLAY_DEPTH_PERCENTAGE:"nudge_display_depth_percentage",NUDGE_DISPLAY_ATF:"nudge_display_atf",NUDGE_DISPLAY_SCROLLED:"nudge_display_scrolled",ANCHOR_GROUP_FILTERING:"anchor_flt"}})})();(function(){q.when("SACacheConfig").register("SACommonConfig",function(h){return{saListParadigms:"ToolTips BottomSheets Sparkles Nudges Hotspots Audiospots MultiPageShoppingAids".split(" "),
defaultImpressionIntervalInHours:24,defaultBackoffConfig:{BackoffInterval:60,MaximumBackoff:480,BackoffFactor:2},statefulSAStorageKey:"SA_StatefulSA",saCacheKey:"SA_Cache",cacheTTLInMinutes:1440,pageTTLInMinutes:function(c){var a=h.cacheTTL;return a&&a[c]?a[c]:0},cacheVersion:"1.0",cacheVersionForPrefetch:"1.1",defaultCookieValue:"unknown",fatigueConfig:{pageLimits:{ToolTips:3,BottomSheets:3,Sparkles:3,Nudges:1E3,Hotspots:3,Highlighters:3,Audiospots:2,MultiPageShoppingAids:1},sessionDayLimits:{ToolTips:8,
BottomSheets:3,Sparkles:6,Nudges:1E3,Hotspots:8,Highlighters:10,Audiospots:5,MultiPageShoppingAids:1}}}})})();(function(){q.register("SACacheConfig",function(){return{cacheTTL:{gateway:15,search:15,detailpage:0}}})})();(function(){q.when("A").register("SAFeature",function(h){return{clientSideCaching:!0,backoff:!1,androidFeatureAttribution:!1}})})();(function(){q.when("A","DeadlineFilter","SessionDayFilter","ShoppingAidsFilters","ImpressionIntervalFilter","QTipsMetrics","SAMetricConstants","AuthPortalURISubstitute",
"SAFilteringHelper","ContextAwareSubstitutor","UIGuardRailFiltering","HighPrioritySAListProvider","AnchorGroupFiltering").register("SAPreProcessor",function(h,c,a,e,f,d,b,k,g,l,p,m,A){return{preProcessSAList:function(x,y){d.incrementCounter(b.SA_CACHE_PREFIX+b.SA_PREPROCESSOR+b.START);var n={};h.each(x,function(a,b){n[b]=h.filter(a,function(a){var d=-1;return g.isClientSideWeblabTriggerOnlySA(a)||c.filter(a)&&f.filter(a)&&A.filter(a,b)&&-1!==(d=e.getContextTargetingIndex(a))&&k.substitute(a)&&l.substitute(a,
d,b)&&p.isUIGuardRailMet(a)})});n=a.filter(n);n=m.getHighPrioritySAList(n);x={};x.ShoppingAidsList=n;return x},isShoppingAidsListEmpty:function(a){if(a)for(var b in a)if(a.hasOwnProperty(b)&&a[b]&&Array.isArray(a[b])&&0<a[b].length)return!1;return!0}}})})();(function(){q.when("A","QTipsMetrics","SAMetricConstants").register("DeadlineFilter",function(h,c,a){return{filter:function(e){c.incrementCounter(a.SA_CACHE_PREFIX+a.DEADLINE_FILTER+a.START);e.deadline&&Date.now()>parseInt(e.deadline,10)?(c.incrementCounter(a.SA_CACHE_PREFIX+
a.DEADLINE_FILTER+a.STATUS_0),e=!1):e=!0;return e}}})})();(function(){q.when("A","SACommonConfig","CacheManager","SAFilteringHelper","QTipsMetrics","SAMetricConstants").register("SessionDayFilter",function(h,c,a,e,f,d){return{filter:function(b){f.incrementCounter(d.SA_CACHE_PREFIX+d.SESSION_DAY_FILTER+d.START);var k={},g=c.fatigueConfig.sessionDayLimits;h.each(b,function(b,c){var d=(g&&g[c]?g[c]:0)-a.getSessionDayImpressionsForSAType(c);k[c]=e.filterSAListWithQuotaRemaining(b,d)});return k}}})})();
(function(){q.when("A","SACommonConfig","QTipsMetrics","SAMetricConstants","ShoppingAidsGenericUtils").register("ImpressionIntervalFilter",function(h,c,a,e,f){return{filter:function(d){a:{a.incrementCounter(e.SA_CACHE_PREFIX+e.IMPRESSIONINTERVAL_FILTER+e.START);f.isDefined(d.impressionInterval)||(d.impressionInterval=c.defaultImpressionIntervalInHours);if(d.lastImpressionTime&&(d=d.lastImpressionTime+36E5*d.impressionInterval,Date.now()<d)){a.incrementCounter(e.SA_CACHE_PREFIX+e.IMPRESSIONINTERVAL_FILTER+
e.STATUS_0);d=!1;break a}d=!0}return d}}})})();(function(){q.when("A","SACommonConfig","QTipsMetrics","SAMetricConstants","ShoppingAidsGenericUtils","SAFeature","ShoppingAidsCacheData","QTipsConstants").register("AnchorGroupFiltering",function(h,c,a,e,f,d,b,k){return{filter:function(c,d){var g={ToolTips:"elementAnchor",Hotspots:"hotspotAnchor",Audiospots:"audiospotAnchor"};return function(c){a.incrementCounter(e.SA_CACHE_PREFIX+e.ANCHOR_GROUP_FILTERING+e.START);var l=g[d]?!0:!1;if(!l)return!0;if(l=
b.getSAAnchorGroup()){var m=c[g[d]];if(!f.isDefined(l[m])||!f.isDefined(l[m].groupLastImpressionTime))return!0;c=l[m].groupLastImpressionTime+c.anchorGroupImpressionInterval*k.hourToSecondConversion*k.secondToMillisecondConversion;if(Date.now()<c)return a.incrementCounter(e.SA_CACHE_PREFIX+e.ANCHOR_GROUP_FILTERING+e.STATUS_0),!1}return!0}(c)}}})})();(function(){q.when("A").register("SAFilteringHelper",function(h){return{_isNonConditionalSA:function(c){return c&&!c.invokingEventElement&&!c.weblabName},
filterSAListWithQuotaRemaining:function(c,a){var e=[];h.each(c,function(c){this._isNonConditionalSA(c)?0<a&&(e.push(c),a--):e.push(c)}.bind(this));return e},isClientSideWeblabSA:function(c){return c&&c.weblabName&&c.desiredWeblabTreatment&&c.allocatedWeblabTreatment},isClientSideWeblabTriggerOnlySA:function(c){return this.isClientSideWeblabSA(c)&&c.weblabTriggerOnlyFlag&&"true"===c.weblabTriggerOnlyFlag.toString()}}})})();(function(){q.when("A","CacheManager","QTipsMetrics","QTips","SAEndPointsConfig",
"SAPreProcessor","SACommonConfig","SAMetricConstants","3p-promise","ShoppingAidsGenericUtils","PageResolver","SAFeature","SARateLimitingInstrumentationHandler","LoPResolver").register("ShoppingAidsFetcher",function(h,c,a,e,f,d,b,k,g,l,p,m,A,x){return{fetchShoppingAids:function(b,d,e){try{var f=h.now(),g=this;if(l.isSADebugRequest())g.promiseFetchFromBackendForPage(b).then(d,e);else if(m.backoff&&l.shouldBackOff(b))a.incrementCounter(k.SA_CACHE_PREFIX+k.SA_FETCH_PREFIX+k.BACKOFF+b);else if(c.isShoppingAidsAvailableForPage(b)){var p=
c.getCacheHitFrequencyForPage(b);c.updateCacheHitFrequencyInCache(b,p+1);var n=g._generateFinalResponse(f,b);a.incrementCounter(k.SA_CACHE_PREFIX+k.SERVERD_FROM_CACHE);a.incrementCounter(k.SA_CACHE_PREFIX+k.SERVERD_FROM_CACHE+"_"+p);a.incrementCounter(k.SA_CACHE_PREFIX+k.SERVERD_FROM_CACHE+"_"+l.platformCheck);a.incrementCounter(k.SA_CACHE_PREFIX+k.SERVERD_FROM_CACHE+"_"+b);d(n)}else g.promiseFetchFromBackendForPage(b).then(function(a){g._updateShoppingAidsListInCache(b,a);return a}.bind(g)).then(function(a){return g._generateFinalResponse(f,
b,a)}.bind(g)).then(function(a){return d(a)}.bind(g)).catch(e)}catch(D){a.incrementCounter(k.SA_CACHE_PREFIX+k.SA_FETCH_PREFIX+k.ERROR_CATCHED)}},_generateFinalResponse:function(b,e,f){var g=c.getShoppingAidsListForPageFromCache(e);l.logClientSideWeblabMetricsForSAList(g,k.SHOPPINGAIDS_WEBLAB_AFTER_FETCH_CALL,f);e=d.preProcessSAList(g,e);f=this._updateNestedShoppingAidsStructure(e.ShoppingAidsList);e={};e.ShoppingAidsList=f;l.logClientSideWeblabMetricsForSAList(f,k.SHOPPINGAIDS_WEBLAB_AFTER_FILTERING);
b=h.now()-b;a.incrementCounter(k.SA_CACHE_PREFIX+k.TIME_TAKEN,b);a.incrementCounter(k.SA_CACHE_PREFIX+k.SA_FETCH_PREFIX+k.TIME_TAKEN,b);a.incrementCounter(k.SA_CACHE_PREFIX+k.SERVERD_FROM_CACHE+"_"+k.TIME_TAKEN,b);return e},promiseFetchFromBackendForPage:function(a){var b=this;return new g(function(c,d){b.fetchShoppingAidsFromBackend(a,c,d)}.bind(b))},fetchShoppingAidsFromBackend:function(c,d,g){var m=k.SA_FETCH_PREFIX,n=document.referrer,u=/.*\.amazon\..*/g,A="DIRECT";u&&u.test(n)&&(A="INDIRECT");
n=f.fetchShoppingAidsEndPoint;a.incrementCounter(m+k.NETWORK_CALL_INITIATED);a.incrementCounter(m+k.NETWORK_CALL_INITIATED+l.platformCheck);h.ajax(n,{method:"GET",contentType:"application/json; charset\x3dutf-8",timeout:6E4,params:{page:c,url:p.getWindowLocationHref(),trafficType:A,cacheTTL:b.pageTTLInMinutes(c),cacheVersion:b.cacheVersion,previousLop:e.utils.getPreviousLoP(),currentLop:x.getCurrentLoP(),pageHitRequestID:l.getPageHitRequestID()},success:function(b){a.incrementCounter(m+c+k.STATUS_1);
d&&"function"===typeof d&&d(b);return b},error:function(b,d){"Request Timeout"===d?a.incrementCounter(m+c+k.STATUS_0_+k.SA_TIMEOUT):"NotFound"===d&&a.incrementCounter(m+c+k.STATUS_0_+k.SA_UNKNOWN_ENDPOINT);a.incrementCounter(m+c+l.platformCheck+k.STATUS_0);g&&"function"===typeof g&&g(b);return b}})},_updateShoppingAidsListInCache:function(b,d){try{h.objectIsEmpty(d)?a.incrementCounter(k.SA_CACHE_PREFIX+k.FETCH_RESPONSE+k.STATUS_0):(a.incrementCounter(k.SA_CACHE_PREFIX+k.FETCH_RESPONSE+k.STATUS_1),
c.updateContextForShoppingAidsCache(d.Context),c.updateSessionDayImpressionCountObjectInCache(d.SessionDayImpressionCount),c.updatePageImpressionCountObjectInCache(b,d.PageImpressionCount),c.updateShoppingAidsListForPageInCache(b,d.ShoppingAidsList),"detailpage"!==b||m.backoff||A.rateLimitingInstrumentation(Date.now(),l.isValidCampaignAvailable(d.ShoppingAidsList)))}catch(u){a.incrementCounter(k.SA_CACHE_PREFIX+k.CACHE_UPDATE_ERROR)}},_updateNestedShoppingAidsStructure:function(a){h.each(a,function(a,
b){h.each(a,function(a){this._updateNestedStructure(a)},this)},this);return a},_updateNestedStructure:function(a){var b=a.nestedSAPriorityList;if(b){var d=[];h.each(b,function(a){a=c.getShoppingAidsDataForPageType_SAType(a.pageType,a.SAType,a.identifier);d.push(a)});a.nestedSAList=JSON.stringify(d)}return a},cleanUpSACache:function(){c.cleanUpCache()}}})})();(function(){q.when("A","ShoppingAidsGenericUtils","SAMetricConstants","QTipsMetrics").register("AuthPortalURISubstitute",function(h,c,a,e){return{substitute:function(f){if(f.targetEndpoint){var d=
f.targetEndpoint;try{var b=c.getWindowLocationPath()+c.getWindowLocationQueryString();b?"/"!==b.charAt(0)&&(b="/"+b):b="/";var k=encodeURIComponent(b),g=encodeURIComponent(k);var l=d.replace("%2Fsa-request-url",k).replace("%252Fsa-request-url",g);f.targetEndpoint=l}catch(p){return e.incrementCounter(a.SA_CACHE_PREFIX+a.URL_ENCODE_ERR),e.incrementCounter(a.SA_CACHE_PREFIX+a.URL_ENCODE_ERR+"_"+f.identifier),!1}}return!0}}})})();(function(){q.when("A","QTipLibrary","SAHotspotConstants","ShoppingAidsGenericUtils",
"AnchorSACollection").register("SAHotspot",function(h,c,a,e,f){h={};h.model=new c.Model;h.collection=new f;h.collection.identifierList=[];h.collection.setValidSACallback(function(a){var b=a.get("hotspotAnchor"),c=a.get("maxDisplayCount"),d=a.get("nestedSAList");return e.isDefined(a)&&e.isDefined(c)&&e.isDefined(b)&&0<c&&e.isDefined(d)}.bind(this));e.addStyleToHead(a.style.hotspotStyle);return h})})();(function(){q.register("SAHotspotConstants",function(){return{timer:{defaultStartOffset:3E3,defaultHotspotInterval:1E4,
defaultRenderCallbackTime:800},templates:{hotspotTemplate:'\x3cdiv id\x3d"hotspot"class\x3d"hotspot-background"\x3e\x3cstyle\x3e.hotspot-background{ border-color : #EC912D;border-radius: 50%;width: 16px;height: 16px;background-color: #EC912D; position:absolute;display: table-cell;text-align:center;box-shadow: 0 0 0 0 rgba(236, 145, 45, 1);transform: scale(1);animation: pulse 1.5s 0.2s \x3c% pulsatingIteration %\x3e;} .hotspot-background:after{ content: none;}\x3c/style\x3e\x3cstyle\x3e @keyframes pulse {0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(236, 145, 45, 0.7); } 70% { transform: scale(1); box-shadow: 0 0 0 12px rgba(236, 145, 45, 0); } 100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(236, 145, 45, 0); }}\x3c/style\x3e\x3cdiv class\x3d"hotspot-text" style \x3d"vertical-align:middle; position:relative;top:-10.5px;right:2.5px;color: white; font-size:15px; font-family: Bookerly;font-style: italic;font-size;font-weight: bold;"\x3e\x3cp\x3ei\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e'},
style:{hotspotStyle:"#hotspot{position:absolute;overflow:initial}.hotspot-background{position:fixed;z-index:90000;padding:10px;opacity:1;border-radius:3px;-webkit-box-shadow:0 2px 5px 0 rgba(17,17,17,.25);-moz-box-shadow:0 2px 5px 0 rgba(17,17,17,.25);box-shadow:0 2px 5px 0 rgba(17,17,17,.25);-o-box-shadow:0 2px 5px 0 rgba(17,17,17,.25);-moz-transform-style:preserve-3d;-o-transform-style:preserve-3d;-webkit-transform-style:preserve-3d;transform-style:preserve-3d}.hotspot-background:after{position:absolute;display:block;width:0;content:'';border-style:solid;-moz-transform-style:preserve-3d;-o-transform-style:preserve-3d;-webkit-transform-style:preserve-3d;transform-style:preserve-3d}.hotspot-textholder{width:100%;height:100%}"},
Z_indexConstants:{lowerZ_index:200,higherZ_index:9E4},CSSConstants:{TEXT_RTL:"-2.5px"}}})})();(function(){q.when("A","jQuery","QTipLibrary","QTipsConstants","ShoppingAidsGenericUtils","SAHotspot","AnchorBasedSAUtils","AnchorBasedPositioning","NestedShoppingAidHelper","SAHotspotConstants").execute(function(h,c,a,e,f,d,b,k,g,l){a=a.View.extend({collection:d.collection,anchor:"",popoverClass:e.popOverAnchors.popoverClass,searchSugesstions:e.popOverAnchors.searchSugesstions,searchFilterPage:e.popOverAnchors.searchFilterPage,
hotspotId:"#hotspot",shoppingAidsType:"hotspot",identifier:"",positionY:0,originalPositionX:0,originalPositionY:0,postHotspotRender:function(){if(this.collection.identifierList){var a=this.collection.identifierList;this.clearTimeouts();for(var c=0;c<a.length;c++)if(!document.hidden){var d=this.collection.at(a[c].id);d.set({shoppingAidsType:this.shoppingAidsType});this.originalPositionY=d.get("positionY");this.originalPositionX=d.get("positionX");this.anchor=b.processAnchor(d.get("hotspotAnchor"),
e.regex.anchorSpliterRegex);this.identifier=d.get("identifier");if(b.isElementVisible(this.anchor)){if(f.hasNoPopover(this.popoverClass,this.searchSugesstions,this.searchFilterPage)||b.isShoppingAidOverPopoverVisible(d.get("popoverAnchor"),d.get("hotspotAnchor")))this.renderTimeoutId=setTimeout(this.render.bind(this),0,d);break}}f.isDefined(this.renderTimeoutId)||(this.renderTimeoutId=setTimeout(this.postHotspotRender.bind(this),l.timer.defaultStartOffset))}},render:function(a){var c=this._createHotspotBaseElement(a);
f.isDefined(c)?(k.addAndPosition(c,a,this.anchor),this._attachClickListener(c,a),this._displayHotspot(a.get("renderPointX"),a.get("renderPointY")),a=b.getIndexByIdentifier(this.collection.identifierList,a.get("identifier")),-1!==a&&(this.renderCompleteTimeoutId=setTimeout(this.renderComplete.bind(this),l.timer.defaultRenderCallbackTime,a))):this.renderTimeoutId=setTimeout(this.postHotspotRender.bind(this),l.timer.defaultStartOffset)},dismissWithId:function(a,b,d){var g=c(this.hotspotId)[0];g&&g.getAttribute(e.view.saDOMNameAttribute)===
a||this.identifier===a&&f.isDefined(this.renderTimeoutId)?(this._stopHotspots(),b&&"function"===typeof b&&b()):d&&"function"===typeof d&&d(e.errorCodes.SA_NOT_DISPLAYED)},_displayHotspot:function(a,d){var g=c(this.hotspotId);this.positionY=d;f.isMarketplaceRTLEnabled()&&this._makeRTLCompatible();g.css({left:a+"px",top:d+"px",visibility:"visible"});b.isElementOrParentFixed(this.anchor)&&g.css({position:"fixed"});g.attr(e.view.saDOMNameAttribute,this.identifier)},renderComplete:function(a){var b=this.collection.identifierList[a].id,
c=this.collection.identifierList[a].schedulingType,d=this.shoppingAidsType;this.collection.identifierList.splice(a,1);f.isDefined(this.renderCompleteCallback)&&this.renderCompleteCallback({identifier:b,schedulingType:c,shoppingAidsType:d,hotspotAnchor:this.anchor})},_closeAndRenderNext:function(){h.throttle(function(){this.clearTimeouts();this._nextHotspot()}.bind(this),1E3).call(this)},_createHotspotBaseElement:function(a){return this._createElement(l.templates.hotspotTemplate,a)},_isHotspotPresent:function(){return document.getElementById("hotspot")},
_attachClickListener:function(a,b){c(a).click(function(){g.dispatchShoppingAidEvent(JSON.parse(b.get("nestedSAList")));d.view._closeAndRenderNext()})},_stopHotspots:function(){this.clearTimeouts();this._removeElement(this.hotspotId)},_nextHotspot:function(){f.isDefined(this.collection.identifierList)&&0<this.collection.identifierList.length?(this._removeElement(this.hotspotId),this.renderTimeoutId=setTimeout(this.postHotspotRender.bind(this),l.timer.defaultHotspotInterval)):this._stopHotspots()},
_makeRTLCompatible:function(){var a=c(".hotspot-text");"function"===typeof h.$.withoutRtl?h.$.withoutRtl(function(){a.css({right:l.CSSConstants.TEXT_RTL})}):document.getElementById("hotspot").getElementsByClassName("hotspot-text")[0].style.right=l.CSSConstants.TEXT_RTL},handleOverlay:function(){this._isHotspotPresent()&&this._pushHotspotToBackground()},_repositionHotspot:function(){if(b.isElementVisible(this.anchor)){var a=k.getAbsolutePositionToPlaceSA(this.anchor,this.originalPositionY,this.originalPositionX);
c(this.hotspotId).css({left:a[0]+"px",top:a[1]+"px",visibility:"visible"})}else this.dismissWithId(this.identifier)},handleOverlayDismiss:function(){this._isHotspotPresent()&&(this._bringAudiospotToForeground(),this._repositionHotspot())},_pushHotspotToBackground:function(){var a=c(this.hotspotId),d=this.positionY+b.getAUIScrollPageValue();a.css({"z-index":l.Z_indexConstants.lowerZ_index,top:d})},_bringAudiospotToForeground:function(){c(this.hotspotId).css({"z-index":l.Z_indexConstants.higherZ_index,
top:this.positionY})},clearTimeouts:function(){f.isDefined(this.renderTimeoutId)&&(clearTimeout(this.renderTimeoutId),delete this.renderTimeoutId);f.isDefined(this.renderCompleteTimeoutId)&&(clearTimeout(this.renderCompleteTimeoutId),delete this.renderCompleteTimeoutId)},setRenderCompleteCallback:function(a){this.renderCompleteCallback=a}});d.view=new a;return d})})();(function(){q.when("A","QTipLibrary","SAHighlighterConstants","ShoppingAidsGenericUtils","AnchorSACollection").register("SAHighlighter",
function(h,c,a,e,f){h={};h.model=new c.Model;h.collection=new f;h.collection.identifierList=[];h.collection.setValidSACallback(function(a){var b=a.get("highlighterAnchor"),c=a.get("maxDisplayCount");return e.isDefined(a)&&e.isDefined(c)&&e.isDefined(b)&&0<c}.bind(this));e.addStyleToHead(a.style.SA_HighlighterStyle);return h})})();(function(){q.register("SAHighlighterConstants",function(){return{timer:{defaultStartOffset:3E3,defaultHighlighterInterval:1E4,defaultRenderCallbackTime:800,defaultDismissCallbackTime:2E4},
templates:{SA_HighlighterTemplate:'\x3cdiv id\x3d"page-highlighter" class\x3d"page-highlighter-background"\x3e\x3c/div\x3e'},style:{SA_HighlighterStyle:"#page-highlighter{ position: absolute; overflow: initial;} .page-highlighter-background{ position: fixed; z-index: 90000; padding: 10px; width: 5px; height: 5px; background-color: transparent; border:  4px solid #007185 ; border-radius: 50%; position: absolute; animation: ring 1.5s linear infinite;} @keyframes ring { from { opacity: 1;} to { opacity: 0; transform: scale(3);}}"},
metrics:{PREFIX:"SA_PAGEHIGHLIGHTER_",DISPLAY:"DISPLAYED",POSTRENDER:"POST_RENDER",ONDEMAND_DISPLAY:"ONDEMAND_DISPLAYED",DISMISS:"DISMISSED",DISSMISS_ID:"DISMISSED_WITH_ID",CLICK:"CLICKED",VALID_RENDER:"VALID_RENDER"}}})})();(function(){q.when("A","jQuery","QTipLibrary","QTipsConstants","ShoppingAidsGenericUtils","SAHighlighter","AnchorBasedSAUtils","AnchorBasedPositioning","NestedShoppingAidHelper","SAHighlighterConstants","QTipsMetrics").execute(function(h,c,a,e,f,d,b,k,g,l,p){a=a.View.extend({collection:d.collection,
anchor:"",popoverClass:e.popOverAnchors.popoverClass,searchSugesstions:e.popOverAnchors.searchSugesstions,searchFilterPage:e.popOverAnchors.searchFilterPage,HighlighterId:"#page-highlighter",shoppingAidsType:"highlighter",identifier:"",postHighlighterRender:function(){if(this.collection.identifierList){var a=this.collection.identifierList;this.clearTimeouts();for(var c=0;c<a.length;c++)if(!document.hidden){var d=this.collection.at(a[c].id);d.set({shoppingAidsType:this.shoppingAidsType});this.anchor=
b.processAnchor(d.get("highlighterAnchor"),e.regex.anchorSpliterRegex);this.identifier=d.get("identifier");if(b.isElementVisible(this.anchor)){if(f.hasNoPopover(this.popoverClass,this.searchSugesstions,this.searchFilterPage)||b.isShoppingAidOverPopoverVisible(d.get("popoverAnchor"),d.get("HighlighterAnchor")))this.renderTimeoutId=setTimeout(this.render.bind(this),0,d);break}}f.isDefined(this.renderTimeoutId)||(this.renderTimeoutId=setTimeout(this.postHighlighterRender.bind(this),l.timer.defaultStartOffset),
p.incrementCounter(l.metrics.PREFIX+l.metrics.POSTRENDER,1,this.identifier))}},render:function(a){var c=this._createHighlighterBaseElement(a);f.isDefined(c)?(k.addAndPosition(c,a,this.anchor),this._attachClickListener(c,a),this._displayHighlighter(a.get("renderPointX"),a.get("renderPointY")),a=b.getIndexByIdentifier(this.collection.identifierList,a.get("identifier")),p.incrementCounter(l.metrics.PREFIX+l.metrics.VALID_RENDER,1,this.identifier),-1!==a&&(this.renderCompleteTimeoutId=setTimeout(this.renderComplete.bind(this),
l.timer.defaultRenderCallbackTime,a),this.defaultDismissalTimeoutId=setTimeout(this._closeAndRenderNext.bind(this),l.timer.defaultDismissCallbackTime,a))):this.renderTimeoutId=setTimeout(this.postHighlighterRender.bind(this),l.timer.defaultStartOffset)},_displayHighlighter:function(a,d){var f=c(this.HighlighterId);f.css({left:a+"px",top:d+"px",visibility:"visible"});b.isElementOrParentFixed(this.anchor)&&f.css({position:"fixed"});f.attr(e.view.saDOMNameAttribute,this.identifier);p.incrementCounter(l.metrics.PREFIX+
l.metrics.DISPLAY,1,this.identifier)},renderComplete:function(a){var b=this.collection.identifierList[a].id,c=this.collection.identifierList[a].schedulingType,d=this.shoppingAidsType;this.collection.identifierList.splice(a,1);f.isDefined(this.renderCompleteCallback)&&this.renderCompleteCallback({identifier:b,schedulingType:c,shoppingAidsType:d})},_closeAndRenderNext:function(){h.throttle(function(){this.clearTimeouts();this._nextHighlighter()}.bind(this),1E3).call(this);p.incrementCounter(l.metrics.PREFIX+
l.metrics.DISMISS,1,this.identifier)},_createHighlighterBaseElement:function(a){return this._createElement(l.templates.SA_HighlighterTemplate,a)},_attachClickListener:function(a,b){var e=this;c(a).click(function(){p.incrementCounter(l.metrics.PREFIX+l.metrics.CLICK,1,e.identifier);f.isDefined(b.get("nestedSAList"))&&g.dispatchShoppingAidEvent(JSON.parse(b.get("nestedSAList")));d.view._closeAndRenderNext()})},_stopHighlighters:function(){this.clearTimeouts();this._removeElement(this.HighlighterId)},
_nextHighlighter:function(){f.isDefined(this.collection.identifierList)&&0<this.collection.identifierList.length?(this._removeElement(this.HighlighterId),this.renderTimeoutId=setTimeout(this.postHighlighterRender.bind(this),l.timer.defaultHighlighterInterval)):this._stopHighlighters()},clearTimeouts:function(){f.isDefined(this.renderTimeoutId)&&(clearTimeout(this.renderTimeoutId),delete this.renderTimeoutId);f.isDefined(this.renderCompleteTimeoutId)&&(clearTimeout(this.renderCompleteTimeoutId),delete this.renderCompleteTimeoutId);
f.isDefined(this.defaultDismissalTimeoutId)&&(clearTimeout(this.defaultDismissalTimeoutId),delete this.defaultDismissalTimeoutId)},dismissWithId:function(a,b,d){var g=c(this.HighlighterId);g&&g.attr(e.view.saDOMNameAttribute)===a||a===this.identifier&&f.isDefined(this.renderTimeoutId)?(this._stopHighlighters(),b&&"function"===typeof b&&b()):d&&"function"===typeof d&&d(e.errorCodes.SA_NOT_DISPLAYED);p.incrementCounter(l.metrics.PREFIX+l.metrics.DISSMISS_ID,1,this.identifier)},setRenderCompleteCallback:function(a){this.renderCompleteCallback=
a},displayOnDemandHighlighter:function(a){this._stopHighlighters();d.collection.add(a);this.postHighlighterRender();p.incrementCounter(l.metrics.PREFIX+l.metrics.ONDEMAND_DISPLAY,1,this.identifier)}});d.view=new a;return d})})();(function(){q.when("A","QTipLibrary","SAAudiospotConstants","ShoppingAidsGenericUtils","AnchorSACollection").register("SAAudiospot",function(h,c,a,e,f){h={};h.model=new c.Model;h.collection=new f;h.collection.identifierList=[];h.collection.setValidSACallback(function(a){var b=
a.get("audiospotAnchor"),c=a.get("audioSource");return e.isDefined(a)&&e.isDefined(b)&&e.isDefined(c)}.bind(this));e.addStyleToHead(a.style.audiospotStyle);return h})})();(function(){q.register("SAAudiospotConstants",function(){return{timer:{defaultStartOffset:3E3,defaultAudioSpotInterval:1E4},templates:{audiospotTemplate:'\x3cdiv id\x3d"sa_audiospot"class\x3d"sa_audiospot-background"\x3e\x3cstyle\x3e.sa_audiospot-background{ border:1px solid transparent; border-radius: 50%;width: 30px;height: 30px; background-color: #fafafa; position:relative;display:block; box-shadow: 1px 1px 0 0 transparent;} .sa_audiospot-background:after{ content: none;}\x3c/style\x3e\x3csvg id\x3d"audio_playSVG" width\x3d"34" height\x3d"34" style\x3d"transform: rotate(90deg); position: absolute; background: transparent; stroke: #0B8699; display:none;top:-3px;left:-3px;"\x3e\x3ccircle id \x3d "sa_audiospot_progress_indicator_inner" cx\x3d"50%" cy\x3d"50%" r\x3d"14" style\x3d"fill: none; stroke-opacity: 0.3; stroke-width: 5; stroke-linecap: round;"\x3e\x3c/circle\x3e\x3ccircle id \x3d "sa_audiospot_progress_indicator" cx\x3d"50%" cy\x3d"50%" r\x3d"14" style\x3d"fill: none;  --initialStroke: 87.9646;  stroke-dasharray: var(--initialStroke); stroke-dashoffset: var(--initialStroke); stroke-width: 5; stroke-opacity: 1; stroke-linecap: round; transition: stroke-dashoffset 1ms ease;"\x3e\x3c/circle\x3e\x3c/svg\x3e\x3cdiv id\x3d"audio-play-icon" class\x3d"play-css"\x3e\x3cspan\x3e\x3cstyle\x3e.play-css { height: 18px; width: 18px; position: relative; overflow: hidden; display: inline-block;top:-5px;left:-5px;z-index:1 } .play-css span{ display: block; width: 5px; height: 5px; background: #fff; margin: 7px 0 0 1px; } .play-css span:after { content: \'\'; position: absolute; width: 0; height: 0; border-style: solid; border-color: transparent #fff transparent transparent; border-width: 6px 8px 6px 9px; left: -8px; top: 3px; } .play-css span:before { transform: rotate(45deg); border-radius: 0 30px 0 0; content: \'\'; position: absolute; width: 3px; height: 3px; border-style: double; border-color: #fff; border-width: 5px 5px 0 0; left: 11px; top: 5px; transition: all 0.2s ease-out; }\x3c/style\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv id\x3d"audio-pause-icon" class\x3d"pause-css"\x3e\x3cstyle\x3e.pause-css{border: 0; background: transparent; box-sizing: border-box; width: 0; height: 9px; border-color: transparent transparent transparent #0B8699; transition: 100ms all ease; border-style: double; border-width: 0px 0 0px 7px;position:relative;z-index:1;left:0.5px;display:none}\x3c/style\x3e\x3c/div\x3e\x3csvg id\x3d"audio_play_filler_circle" width\x3d"34" height\x3d"34" style\x3d"transform: rotate(90deg); position: absolute; background: transparent; fill: #0B8699;top:-3px;left:-3px"\x3e\x3ccircle id \x3d "filler_circle" cx\x3d"50%" cy\x3d"50%" r\x3d"16" style\x3d"fill:#0B8699;"\x3e\x3c/circle\x3e\x3c/svg\x3e\x3c/div\x3e'},
style:{audiospotStyle:"#sa_audiospot{ position: absolute; overflow: initial; }.sa_audiospot-background { position: fixed; z-index: 90000; padding: 10px; opacity: 1; border-radius: 3px; -webkit-box-shadow: 0 2px 5px 0 rgba(17,17,17,.25); -moz-box-shadow: 0 2px 5px 0 rgba(17,17,17,.25); box-shadow: 0 2px 5px 0 rgba(17,17,17,.25); -o-box-shadow: 0 2px 5px 0 rgba(17,17,17,.25); -moz-transform-style: preserve-3d; -o-transform-style: preserve-3d; -webkit-transform-style: preserve-3d; transform-style: preserve-3d; } .sa_audiospot-background:after { position: absolute; display: block; width: 0; content: ''; border-style: solid; -moz-transform-style: preserve-3d; -o-transform-style: preserve-3d; -webkit-transform-style: preserve-3d; transform-style: preserve-3d; } .slate-image-video-loader { background: #ffffff; border-radius: 50%; position: absolute; opacity: 0.7; } .slate-image-play-button { margin: auto; position: absolute; border-style: solid; border-color: transparent transparent transparent #ada6a6; }"},
constants:{lowerZindex:200,higherZindex:9E4},cssConstants:{playIconId:"#audio-play-icon",pauseIconId:"#audio-pause-icon",playSVG:"#audio_playSVG",progressBarId:"#sa_audiospot_progress_indicator",fillerCircleId:"#filler_circle"},audioStates:{PLAY_STATE:"PLAY_STATE",PAUSE_STATE:"PAUSE_STATE",COMPLETION_STATE:"END",INITIAL_STATE:"INITIAL"},metrics:{PREFIX:"SA_Audiospot_",PLAY:"played",PAUSE:"paused",REPLAY:"replayed",END:"ended",ERROR:"error",STALLED:"stalled",SUSPEND:"suspend",WAITING:"waiting",ABORT:"abort",
LOADED:"loadeddata"}}})})();(function(){q.when("A","jQuery","QTipLibrary","QTipsConstants","ShoppingAidsGenericUtils","SAAudiospot","AnchorBasedSAUtils","AnchorBasedPositioning","SAAudiospotConstants","AudioStateManager","QTipsMetrics","ShoppingAidsAudioUtils").execute(function(h,c,a,e,f,d,b,k,g,l,p,m){h=a.View.extend({collection:d.collection,anchor:"",popoverClass:e.popOverAnchors.popoverClass,searchSugesstions:e.popOverAnchors.searchSugesstions,searchFilterPage:e.popOverAnchors.searchFilterPage,
audiospotId:"#sa_audiospot",shoppingAidsType:"audiospot",identifier:"",positionY:0,originalPositionX:0,originalPositionY:0,postAudiospotRender:function(){if(this.collection.identifierList){var a=this.collection.identifierList;this.clearTimeouts();for(var c=0;c<a.length;c++)if(!document.hidden){var d=this.collection.at(a[c].id);d.set({shoppingAidsType:this.shoppingAidsType});this.originalPositionY=d.get("positionY");this.originalPositionX=d.get("positionX");this.anchor=b.processAnchor(d.get("audiospotAnchor"),
e.regex.anchorSpliterRegex);this.identifier=d.get("identifier");if(f.isDefined(this.anchor)&&b.isElementVisible(this.anchor)){if(f.hasNoPopover(this.popoverClass,this.searchSugesstions,this.searchFilterPage)||b.isShoppingAidOverPopoverVisible(d.get("popoverAnchor"),this.anchor))this.renderTimeoutId=setTimeout(this.render.bind(this),0,d);break}}f.isDefined(this.renderTimeoutId)||(this.renderTimeoutId=setTimeout(this.postAudiospotRender.bind(this),g.timer.defaultStartOffset))}},render:function(a){var c=
b.getIndexByIdentifier(this.collection.identifierList,this.identifier);if(f.isShoppingAidForWeblabTesting(this.identifier)&&-1!==c)this.renderComplete(c),p.incrementCounter(g.metrics.PREFIX+"logImpression_"+this.identifier);else{var d=this._createAudiospotBaseElement(a);f.isDefined(d)&&(k.addAndPosition(d,a,this.anchor),l.cacheElementData(),this._attachClickListener(d,a),this._displayAudiospot(a.get("renderPointX"),a.get("renderPointY")),this._handleVisibility(),-1!==c&&(this.renderCompleteTimeoutId=
setTimeout(this.renderComplete.bind(this),e.timer.defaultDismissalCallbackTime,c),p.incrementCounter(g.metrics.PREFIX+"logImpression_"+this.identifier)));p.incrementCounter(g.metrics.PREFIX+"undefined_audiospot_element_"+this.identifier)}},dismissWithId:function(a,b,d){var g=c(this.audiospotId)[0];g&&g.getAttribute(e.view.saDOMNameAttribute)===a||this.identifier===a&&f.isDefined(this.renderTimeoutId)?(this._dismissAudiospots(),b&&"function"===typeof b&&b()):d&&"function"===typeof d&&d(e.errorCodes.SA_NOT_DISPLAYED)},
_dismissAudiospots:function(){c(this.audiospotId)[0]&&l.setState(l.pauseState);this._removeElement(this.audiospotId);this.clearTimeouts();document.removeEventListener("visibilitychange",this._visibilityChangeHandler)},_displayAudiospot:function(a,d){var f=c(this.audiospotId);this.positionY=d;f.css({left:a+"px",top:d+"px",visibility:"visible"});b.isElementOrParentFixed(this.anchor)&&f.css({position:"fixed"});f.attr(e.view.saDOMNameAttribute,this.identifier);p.incrementCounter(g.metrics.PREFIX+"render_"+
this.identifier)},_isAudiospotPresent:function(){return document.getElementById("sa_audiospot")},pushAudiospotToBackground:function(){var a=c(this.audiospotId),d=this.positionY+b.getAUIScrollPageValue();a.css({"z-index":g.constants.lowerZindex,top:d})},bringAudiospotToForeground:function(){c(this.audiospotId).css({"z-index":g.constants.higherZindex,top:this.positionY})},renderComplete:function(a){var b=this.collection.identifierList[a].id,c=this.collection.identifierList[a].schedulingType,d=this.shoppingAidsType;
this.collection.identifierList.splice(a,1);f.isDefined(this.audiospotRenderCompleteCallback)&&this.audiospotRenderCompleteCallback({identifier:b,schedulingType:c,shoppingAidsType:d,audiospotAnchor:this.anchor})},_createAudiospotBaseElement:function(a){l.configureAudio(a);return this._createElement(g.templates.audiospotTemplate,a)},_attachClickListener:function(a){c(a).click(function(){d.view._updateState()})},_updateState:function(){l.getCurrentState()===l.initialState?l.setState(l.playState):l.getCurrentState()===
l.playState?l.setState(l.pauseState):l.getCurrentState()===l.pauseState?l.setState(l.playState):l.getCurrentState()===l.completeState&&l.setState(l.playState)},_handleVisibility:function(){document.addEventListener("visibilitychange",this._visibilityChangeHandler)},_visibilityChangeHandler:function(){document.hidden&&l.getCurrentState()===l.playState&&l.setState(l.pauseState)},handleOverlay:function(){this._isAudiospotPresent()&&(m.handleOverlay(l.getCurrentState.bind(l),l.setState.bind(l)),this.pushAudiospotToBackground())},
_repositionAudiospot:function(){if(b.isElementVisible(this.anchor)){var a=k.getAbsolutePositionToPlaceSA(this.anchor,this.originalPositionY,this.originalPositionX);c(this.audiospotId).css({left:a[0]+"px",top:a[1]+"px",visibility:"visible"})}else this.dismissWithId(this.identifier)},handleOverlayDismiss:function(){this._isAudiospotPresent()&&(this.bringAudiospotToForeground(),this._repositionAudiospot(),m.handleOverlayDismiss(l.getCurrentState.bind(l),l.setState.bind(l)))},clearTimeouts:function(){f.isDefined(this.renderTimeoutId)&&
(clearTimeout(this.renderTimeoutId),delete this.renderTimeoutId);f.isDefined(this.renderCompleteTimeoutId)&&(clearTimeout(this.renderCompleteTimeoutId),delete this.renderCompleteTimeoutId)},setAudiospotRenderCompleteCallback:function(a){this.audiospotRenderCompleteCallback=a}});d.view=new h;return d})})();(function(){q.when("A","SAAudiospotConstants","QTipsMetrics").register("AudioMetrics",function(h,c,a){var e=c.metrics.PREFIX;return{_addMetricEventListeners:function(f,d){f.addEventListener("error",
function(){a.incrementCounter(e+c.metrics.ERROR,1,d)});f.addEventListener("stalled",function(){a.incrementCounter(e+c.metrics.STALLED,1,d)});f.addEventListener("suspend",function(){a.incrementCounter(e+c.metrics.SUSPEND,1,d)});f.addEventListener("waiting",function(){a.incrementCounter(e+c.metrics.WAITING,1,d)});f.addEventListener("abort",function(){a.incrementCounter(e+c.metrics.ABORT,1,d)});f.addEventListener("loadeddata",function(){a.incrementCounter(e+c.metrics.LOADED,1,d)})}}})})();(function(){q.when("A",
"jQuery","QTipLibrary","QTipsConstants","AnchorBasedSAUtils","ShoppingAidsGenericUtils","NestedShoppingAidHelper","SAHotspot").register("AnchorBasedPositioning",function(h,c,a,e,f,d,b,k){h=a.View.extend({pageAnchor:"body",addAndPosition:function(a,b,c){this.setElement(this.pageAnchor,a);a=this.getAbsolutePositionToPlaceSA(c,b.get("positionY"),b.get("positionX"),b.get("startPositionX"));b.set({renderPointX:a[0]});b.set({renderPointY:a[1]})},getAbsolutePositionToPlaceSA:function(a,b,e,k){var g=c(a)[0].getBoundingClientRect(),
l=c(a).offset().top;f.isElementOrParentFixed(a)&&(l=g.top);a=g.left;d.isDefined(k)&&("middle"===k&&(a+=(g.left+g.right)/2),"right"===k&&(a=g.right),"left"===k&&(a=g.left));d.isDefined(b)&&(l-=b);d.isDefined(e)&&(a+=e);return[a,l]}});return h=new h})})();(function(){q.when("A","QTipLibrary","ShoppingAidsGenericUtils").register("AnchorSACollection",function(h,c,a){return c.Collection.extend({model:{},identifierList:[],add:function(c){if(a.isDefined(this.validSACallback)&&this.validSACallback(c)){var e=
{},d=c.get("identifier");e.id=d;e.sequenceNum=c.get("sequenceNum");e.schedulingType=c.get("schedulingType");this.identifierList.push(e);this.models[d]=c}},parse:function(c,f){if(a.isDefined(c)){var d=this._prepareModel.bind(this);c.forEach(function(a,e,f){c[e]=d(a)});return c}},setValidSACallback:function(a){this.validSACallback=a}})})})();(function(){q.when("A","AssistedShoppingDataParser","ShoppingAidsGenericUtils").register("AssistedShoppingDataManager",function(h,c,a){return{model:w,_currentPage:w,
initialiseCampaignData:function(e,f){this.model=c.parseASCampaignJson(e,f);this._currentPage=f;return a.isDefined(this.model)?!0:!1},getCurrentPage:function(){return this._currentPage},isCompletionPage:function(){return this.getCurrentPage()===this.getCompletionPage()},isFirstRender:function(){return this._getFieldFromModel("firstRender")},getIdentifier:function(){return this._getFieldFromModel("identifier")},getType:function(){return this._getFieldFromModel("type")},getState:function(){return this._getFieldFromModel("state")},
getCompletionPage:function(){return this._getFieldFromModel("completionPage")},getTTL:function(){return this._getFieldFromModel("ttl")},getPageTransitionEvents:function(){return this._getFieldFromModel("pageTransitionEvents")||this.getPageLevelSA().get("pageTransitionEvents")},getEnabledBottomSheets:function(){return this.getPageLevelSA().get("enabledBottomSheets")},getEnabledPopOvers:function(){return this.getPageLevelSA().get("enabledPopOvers")},getPageLevelSA:function(){return this._getFieldFromModel("pageLevelSA")},
getTriggers:function(){return this._getFieldFromModel("triggers")},updateState:function(a){try{return this.model.set({state:a}),!0}catch(f){return!1}},updateAudioURL:function(a,f){try{return c.identifierToModelMap[a].set({audioSrc:f}),!0}catch(d){return!1}},_getFieldFromModel:function(c){return a.isDefined(this.model)?this.model.get(c):null}}})})();(function(){q.when("A","jQuery","QTipLibrary","ShoppingAidsGenericUtils","QTipsConstants","AssistedShoppingModelBuilder","ShoppingAidsFilters","ContextAwareSubstitutor").register("AssistedShoppingDataParser",
function(h,c,a,e,f,d,b,k){return{identifierToModelMap:{},parseASCampaignJson:function(a,b){b=this._getPageLevelContext(a,b);if(!e.isDefined(b))return null;a=d.newBuilder().withIdentifier(a.identifier).withType(a.type).withState(a.state).withTTL(Number(a.ttl)).withCompletionPage(a.completionPage).withFirstRender(a.firstRender).withPageTransitionEvents(e.parseJSONStringIfValid(a.pageTransitionEvents)).withPageLevelSA(this._parsePageLevelSA(a.pageLevelSA,b.pageLevelSA)).withTriggers(this._parseShoppingAidsJSONCollection(b.triggers)).build();
this._registerModel(a);return a},_parseShoppingAidsJSONCollection:function(a){var b=[];if(e.isNonEmptyArray(a))for(var c=0;c<a.length;c++)b[c]=this.parseShoppingAidJSON(a[c]);return b},parseShoppingAidJSON:function(b){var c={};if(b&&this._preProcessShoppingAidsJSON(b)){for(var d in b)b.hasOwnProperty(d)&&(c[d]=this._formatSAJSONValue(d,b[d]));c=new a.Model(c);this._registerModel(c)}return c},_preProcessShoppingAidsJSON:function(a){if(e.isDefined(a.type)&&"FabAudioSpot"===a.type){var c=-1;return-1!==
(c=b.getContextTargetingIndex(a))&&k.substitute(a,c,a.type)}return!0},_parsePageLevelSA:function(a,b){a=c.extend(e.defaultJSONIfUndefined(a,{}),e.defaultJSONIfUndefined(b,{}));return this.parseShoppingAidJSON(a)},_getPageLevelContext:function(a,b){try{return a.pages[b]}catch(p){return null}},_formatSAJSONValue:function(a,b){return f.regex.numberRegex.test(b)?Number(b):"targetSA"===a?this.parseShoppingAidJSON(b):"supplementarySA"===a&&1!==b.indexOf(f.contextAwareSADelimiter)?this._parseShoppingAidsJSONCollection(b):
b},_registerModel:function(a){this.identifierToModelMap[a.get("identifier")]=a}}})})();(function(){q.when("A","QTipLibrary").register("AssistedShoppingModelBuilder",function(h,c){return{model:w,newBuilder:function(){this.model=new c.Model;return this},withIdentifier:function(a){this.model.set({identifier:a});return this},withState:function(a){this.model.set({state:a});return this},withType:function(a){this.model.set({type:a});return this},withTTL:function(a){this.model.set({ttl:a});return this},withCompletionPage:function(a){this.model.set({completionPage:a});
return this},withFirstRender:function(a){this.model.set({firstRender:a});return this},withPageLevelSA:function(a){this.model.set({pageLevelSA:a});return this},withTriggers:function(a){this.model.set({triggers:a});return this},withPageTransitionEvents:function(a){this.model.set({pageTransitionEvents:a});return this},build:function(){return this.model}}})})();(function(){q.register("SparkleConfig",function(){return{pagesWithSubnav:{gateway:1,detailpage:0,search:1,browse:0,deals:0,event:0,yourorder:0,
cart:1,foundIt:0,thankYou:0},shouldAddPaddingForPage:function(h){return h&&1===this.pagesWithSubnav[h]},elementPresentOnPage:"ElementPresentOnPage",elementNotPresentOnPage:"ElementNotPresentOnPage",elementIdInvalid:"ElementIdInvalid",subnavElementId:"glow_sub_nav_bar_view",andoridBottomPadding_SubnavPresent:"46px",iOSBottomPadding_WhenEndOfPage:"1px",iOSBottomPadding_SubnavPresent:15}})})();(function(){q.register("NudgeConfig",function(){return{pagesWithSubnav:{gateway:1,detailpage:0,search:1,browse:0,
deals:0,event:0,yourorder:0,cart:1,foundIt:0,thankYou:0},shouldAddPaddingForPage:function(h){return h&&1===this.pagesWithSubnav[h]},marketplacesWithTopnav:{"in":1},shouldAddTopnavPaddingForMarketplace:function(h){return h&&1===this.marketplacesWithTopnav[h]},elementPresentOnPage:"ElementPresentOnPage",elementNotPresentOnPage:"ElementNotPresentOnPage",elementIdInvalid:"ElementIdInvalid",subnavElementId:"glow_sub_nav_bar_view",iOSBottomPadding_WhenEndOfPage:1,iOSBottomPadding_SubnavPresent:9,iOSBottomPadding_TopnavPresent:68,
iOSMinimumBottomHeight:30,defaultBottomPadding:0,androidBottomPadding_SubnavPresent:44,androidBottomPadding_TopnavPresent:72,testNonDefaultPosition:90,scrollSpeedThreshold:.1,snapPositionThreshold:24}})})();(function(){q.when("A","SACommonConfig","ShoppingAidsGenericUtils","LocalStorageInterface").register("StatefulSADataStore",function(h,c,a,e){var f=[];h={init:function(){var d=e.getFromLocalStorage(c.statefulSAStorageKey);a.isNonEmptyArray(d)&&(f=d)},_storeInProgressSAs:function(){try{e.setInLocalStorage(c.statefulSAStorageKey,
JSON.stringify(f))}catch(d){}},getInProgressSAs:function(){return f.slice()},getInProgressSAByIdentifier:function(a){var b;f.forEach(function(c){a===c.identifier&&(b=c)});return b},setInProgressSAs:function(a){a&&Array.isArray(a)&&(f=a.slice(),this._storeInProgressSAs())},updateInProgressSA:function(a,b,c){f.forEach(function(d){a===d.identifier&&(d.state=b,d.status=c)});this._storeInProgressSAs()},isInProgressSA:function(a){return!f.every(function(b){return b.identifier!==a})},addInProgressSA:function(a){if(this.isInProgressSA(a.identifier))return!1;
a.firstImpressionTime=Date.now();f.push(a);this._storeInProgressSAs();return!0},removeInProgressSA:function(a){var b=-1;f.forEach(function(c,d){a===c.identifier&&(b=d)});return-1<b?(f.splice(b,1),this._storeInProgressSAs(),!0):!1},cleanUp:function(){f=[];e.removeFromLocalStorage(c.statefulSAStorageKey)}};h.init();return h})})();(function(){q.when("A","CacheValidator","ShoppingAidsGenericUtils","SAFeature","ShoppingAidsFilters","StatefulSADataStore").register("StatefulSAEligiblityHelper",function(h,
c,a,e,f,d){return{getEligibleInProgressSA:function(a){var b=d.getInProgressSAs();b=b.filter(this._isSAActive);d.setInProgressSAs(b);for(var c=0;c<b.length;c++)if(this._isMultiPageSAForCurrentPage(b[c],a)&&f.isShoppingAidEligible(b[c]))return b[c];return{}},_isSAActive:function(b){return a.isDefined(b.ttl)&&a.isDefined(b.firstImpressionTime)?a.minutesBetween(Date.now(),b.firstImpressionTime)<b.ttl:!1},_isMultiPageSAForCurrentPage:function(a,c){return a.pages&&a.pages[c]},cleanUpInProgressStore:function(){d.cleanUp()}}})})();
(function(){q.when("A","AssistedShoppingDataManager","LogImpressionManager","StatefulSADataStore","ShoppingAidsGenericUtils","SAFabAudiospot","SAFabAudiospotConstants","TriggerHandler","MultiPageSAConstants","SAMetricUtils","QTipsConstants","ShoppingAidsFilters","PageResolver","LocalStorageInterface","UIGuardRailFiltering").register("MultiPageSAOrchestrator",function(h,c,a,e,f,d,b,k,g,l,p,m,q,x,y){var n={schedulingType:w,multiPageSA:w,isExperienceCompleted:!1,display:function(a,b){this._isCurrentPagePresentInCampaign(a,
b)&&(this.schedulingType=a.schedulingType,this.multiPageSA=a,this.isExperienceCompleted=!1,this._handleFirstRenderImpression(a,b),this._mapUserStatusToState(a),this._saveInProgressSA(a),c.initialiseCampaignData(a,b)?(b=this._setupModel(c.getPageLevelSA()),d.render(b,this.onFabAudioSpotStateUpdate.bind(this),this._errorCallBack.bind(this)),this._logMetric(g.metrics.Render),this._setup(a)):this._logMetric(g.metrics.InvalidCampaign,a.identifier))},_handleFirstRenderImpression:function(b,c){if(f.isDefined(b.status)&&
b.status!==p.userEvent.complete)b.firstRender=!1;else{b.firstRender=!0;b.status=p.userEvent.yetToOptIn;var d=a.buildOptionalParameter().withSuccessCallback(this._successCallBack.bind(this)).withErrorCallback(this._errorCallBack.bind(this)).withUserEvent(p.userEvent.yetToOptIn).build();a.handle(b.identifier,b.schedulingType,"multi_page_shopping_aid",c,d);this._logMetric(g.metrics.FirstRender,b.identifier)}},_isCurrentPagePresentInCampaign:function(a,b){try{return f.isDefined(a.pages[b])}catch(z){return!1}},
_setupModel:function(a){var b=c.getState();f.isDefined(b)&&b!==g.state.YetToOptIn||a.set({introductoryAnimation:!0});if(b===g.state.Enabled||b===g.state.Disabled||c.getType()===g.type.AutoPlay)b=a.get("supplementarySA")||[],b=b.filter(function(a){return"tool_tip"!==a.get("type")}),a.set({supplementarySA:b});return a},_setup:function(a){c.getType()===g.type.AutoPlay&&!0===c.isFirstRender()&&setTimeout(this._playAudio,g.delays.AutoPlay);this._setupCompletionEvent(a);this._enableTriggers();k.registerPageTransitionEvents(c.getPageTransitionEvents(),
n.onPageChange.bind(n))},_setupCompletionEvent:function(a){var b=c.getCompletionPage();b=f.parseJSONStringIfValid(b);f.isDefined(b)?k.registerMultiPageCompletionEvent(b,n.onCompletionEventFired.bind(n)):this._logCompletion(a)},_enableTriggers:function(){var a=c.getTriggers();k.registerTriggers(a,n.onTriggerFired.bind(n));k.triggerPageLoadEvent()},_cleanUpResources:function(){k.deregisterTriggers();k.deregisterMultiPageCompletionEvent();d.dismiss()},_logCompletion:function(b,d){n.isCompletionCriteriaMet(d)&&
(n.isExperienceCompleted=!0,d=a.buildOptionalParameter().withSuccessCallback(this._successCallBack.bind(this)).withErrorCallback(this._errorCallBack.bind(this)).withUserEvent(p.userEvent.complete).build(),a.handle(b.identifier,b.schedulingType,"multi_page_shopping_aid",c.getCurrentPage(),d),d=a.buildOptionalParameter().withSuccessCallback(this._successCallBack.bind(this)).withErrorCallback(this._errorCallBack.bind(this)).withUserEvent(null).build(),a.handle(b.identifier,b.schedulingType,"multi_page_shopping_aid",
c.getCurrentPage(),d),e.removeInProgressSA(c.getIdentifier()),c.getState()!==g.state.YetToOptIn&&n._logMetric(g.metrics.Complete))},onCompletionEventFired:function(a){n._logCompletion(n.multiPageSA,a)},isCompletionCriteriaMet:function(a){return f.isDefined(a)?n.validateCompletionCriteria(a):c.isCompletionPage()},validateCompletionCriteria:function(a){return f.isDefined(a.data)&&f.isDefined(a.detail)&&f.isDefined(a.data.identifier)&&f.isDefined(a.detail.identifier)&&a.data.identifier===a.detail.identifier||
(!f.isDefined(a.data)||!f.isDefined(a.data.identifier))&&!f.isDefined(a.detail)},onFabAudioSpotStateUpdate:function(a,e){a===b.successCode.UPDATE_SUCCESS?(a=c.getState(),a===g.state.YetToOptIn&&e===b.state.complete?(n._updateStateAndStatus(g.state.Enabled,p.userEvent.optIn),k.triggerPageLoadEvent(),n._logMetric(g.metrics.OptIn)):a===g.state.Enabled&&e===b.state.pause?(n._updateStateAndStatus(g.state.Disabled,p.userEvent.optOut),n._logMetric(g.metrics.Disabled)):a===g.state.Disabled&&e===b.state.play&&
(n._updateStateAndStatus(g.state.Enabled,p.userEvent.optIn),n._logMetric(g.metrics.Enabled))):a===b.errorCode.UPDATE_FAILED&&e===b.errorCode.AUTO_PLAY_NOT_SUPPORTED&&(n._logMetric(g.metrics.AutoPlayFailed),d.updateState(b.state.autoPlayFailed,n._successCallBack.bind(n),n._errorCallBack.bind(n)))},_updateStateAndStatus:function(b,d){c.updateState(b);n.isExperienceCompleted||(e.updateInProgressSA(c.getIdentifier(),b,d),b=a.buildOptionalParameter().withSuccessCallback(this._successCallBack.bind(this)).withErrorCallback(this._errorCallBack.bind(this)).withUserEvent(d).build(),
a.handle(c.getIdentifier(),this.schedulingType,"multi_page_shopping_aid",c.getCurrentPage(),b))},onTriggerFired:function(a){if(c.getState()!==g.state.YetToOptIn){var e=a.get("targetSA").get("type"),f=a.get("targetSA").get("identifier");"FabAudioSpot"!==e||f===d.getIdentifier()&&d.getState()===b.state.play||(e=a.get("type"),n._pauseAudio(),d.updateModel(a.get("targetSA"),n._successCallBack.bind(n),n._errorCallBack.bind(n)),n._logMetric(g.metrics.TriggerFired,f),c.getState()===g.state.Enabled&&("OnFocus"===
e?n._isInputFieldEmpty(a.get("anchor"))&&n._playAudio():n._playAudio()))}},onPageChange:function(){n._cleanUpResources();setTimeout(function(){var a=q.pageAdapter();e.init();var b=e.getInProgressSAByIdentifier(c.getIdentifier());f.isDefined(b)&&m.isShoppingAidEligible(b)&&y.isUIGuardRailMet(b)&&n.display(b,a)},g.delays.ResourcesRegistration)},_playAudio:function(){d.updateState(b.state.play,n._successCallBack.bind(n),n._errorCallBack.bind(n))},_pauseAudio:function(){d.getState()===b.state.play&&d.updateState(b.state.pause,
n._successCallBack.bind(n),n._errorCallBack.bind(n))},_isInputFieldEmpty:function(a){a=h.$(a);return f.isDefined(a)&&f.isDefined(a.val())?0===a.val().trim().length:!1},_logMetric:function(a,b){b=b||c.getIdentifier();l.incrementCounterWithLOPPlatformAndCombination(g.metrics.Prefix+a,1,b)},_saveInProgressSA:function(a){e.isInProgressSA(a.identifier)||e.addInProgressSA(a)},_mapUserStatusToState:function(a){f.isDefined(a.status)&&a.status!==p.userEvent.yetToOptIn&&a.status!==p.userEvent.complete?a.status===
p.userEvent.optIn?a.state=g.state.Enabled:a.status===p.userEvent.optOut?a.state=g.state.Disabled:this._logMetric(g.metrics.UndefinedStatus):a.state=g.state.YetToOptIn},_successCallBack:function(a){},_errorCallBack:function(a){},isBrowserSupported:function(){return x.isLocalStorageExposed()&&r.Audio}};return n})})();(function(){q.register("MultiPageSAConstants",function(){return{delays:{AutoPlay:1E3,ResourcesRegistration:200},state:{YetToOptIn:"YetToOptIn",Enabled:"Enabled",Disabled:"Disabled"},type:{AutoPlay:"AutoPlay",
TapAndPlay:"TapAndPlay"},metrics:{Prefix:"MultiPageSA_",Render:"render",FirstRender:"first_render",OptIn:"opt_in",Disabled:"disabled",Enabled:"enabled",TriggerFired:"trigger_fired",Complete:"complete",InvalidCampaign:"invalid_campaign",AutoPlayFailed:"autoplay_failed",UndefinedStatus:"undefined_status"}}})})();(function(){q.when("A","jQuery","ShoppingAidsGenericUtils","SATriggerResolver").register("TriggerHandler",function(h,c,a,e){var f={OnFocus:"focus.shopping_aids",OnSelected:"change.shopping_aids",
OnClick:"click.shopping_aids",OnPageLoad:"SAPageLoad.shopping_aids",OnPartnerEvent:"partnerEvent.shopping_aids",OnAudioPlay:"PLAY_STATE.shopping_aids",OnAudioPause:"PAUSE_STATE.shopping_aids",OnAudioComplete:"COMPLETED.shopping_aids"},d={},b=[],k=[],g,l,p,m=["hfc-events:BILL_PAY_AUTHENTICATOR_CHANGE"],q,x=function(b){a.isDefined(c(this).attr("type"))&&"checkbox"===c(this).attr("type")?c(this).is(":checked")&&r(b.data):r(b.data)},r=function(b){if(a.isDefined(b)){if(b.trigger.get("targetSA").get("triggerDependentTargeting")){var c=
e.executeContextFilter(b.trigger.get("targetSA"));b.trigger.unset("targetSA");b.trigger.set({targetSA:c})}n();c=b.trigger.get("delay");var d=b.trigger.get("type");if(a.isDefined(c)||"OnPageLoad"===d)q=setTimeout(function(){b.onAidsTriggeredCallback(b.trigger);n()},c||1E3);else b.onAidsTriggeredCallback(b.trigger)}},n=function(){a.isDefined(q)&&(clearTimeout(q),q=w)},u=function(b){return!!(a.isDefined(b.get("targetSA"))&&a.isDefined(b.get("targetSA").get("identifier"))&&a.isDefined(b.get("type"))&&
f.hasOwnProperty(b.get("type")))},L=function(a){return-1===k.indexOf(a)},z={registerTriggers:function(c,d){a.isDefined(c)&&a.isDefined(d)&&"function"===typeof d&&c.filter(u).forEach(function(c){var e=c.get("type"),f=c.get("event");if(a.isDefined(f)){var g="OnPartnerEvent"===e?h.on(f,function(){var a=c.get("delay")||500;c.set({delay:a});r({trigger:c,onAidsTriggeredCallback:d});-1!==m.indexOf(f)&&h.off(g.event,g.callback)}):h.on(f,function(){setTimeout(function(){z._bindEvent(c,d)},100)});b.push(g)}else z._bindEvent(c,
d)})},_bindEvent:function(b,e){var g=b.get("targetSA").get("identifier"),k=b.get("type"),l=b.get("anchor")||document;g in d?(c(l).unbind(f[k]),c(l).bind(f[k],{trigger:b,onAidsTriggeredCallback:e},h.throttle(x,1E3))):a.isDefined(c(l))&&(d[g]={triggerElement:l,eventType:f[k]},c(l).bind(f[k],{trigger:b,onAidsTriggeredCallback:e},h.throttle(x,1E3)))},triggerPageLoadEvent:function(){var a=new CustomEvent("SAPageLoad",{bubbles:!0,cancelable:!1,detail:w});document.dispatchEvent(a)},deregisterTriggers:function(){for(var e in d)if(d.hasOwnProperty(e)&&
a.isDefined(d[e])){var f=d[e];c(f.triggerElement).unbind(f.eventType)}b.forEach(function(a){h.off(a.event,a.callback)});d={};b=[];n()},registerPageTransitionEvents:function(b,c){a.isDefined(b)&&a.isDefined(c)&&"function"===typeof c&&b.filter(L).forEach(function(a){h.on(a,function(){c();k.push(a)})})},registerMultiPageCompletionEvent:function(b,d){a.isDefined(b)&&a.isDefined(b.eventType)&&a.isDefined(d)&&"function"===typeof d&&(l=b.anchor||document,g=b.eventType,"OnPartnerEvent"===g?p=h.on(b.event,
d):c(l).bind(f[g],{identifier:b.identifier},d))},deregisterMultiPageCompletionEvent:function(){a.isDefined(l)&&a.isDefined(g)&&(c(l).unbind(f[g]),g=l=w);a.isDefined(p)&&(h.off(p.event,p.callback),p=w)}};return z})})();(function(){q.when("A","AssistedShoppingDataParser").register("SATriggerResolver",function(h,c){return{executeContextFilter:function(a){var e=a.get("triggerDependentTargeting");a.set({clientSideTargetting:e});a.unset("triggerDependentTargeting");a=h.parseJSON(a.toJson());return c.parseShoppingAidJSON(a)}}})})();
(function(){q.register("SAFabAudiospotConstants",function(){return{timer:{elongationTimer:3E3,supplementarySAThrottleTimer:50},template:{pulse:"\x3cstyle\x3e.sa_fabAudiospot-pulse-dynamic-background{ border-color : #fff;border-radius: 50%;width: 42px;height: 42px;background-color: #fff; position:absolute;display: none;top:7px;left:7px;text-align:center;transform: scale(1);animation: pulse 1.5s 0.2s infinite;} .sa_fabAudiospot-pulse-dynamic-background:after{ content: none;} @keyframes pulse {0% { transform: scale(1); } 70% { transform: scale(1.25); } 100% { transform: scale(1); }}\x3c/style\x3e",
innerCircle:"\x3cstyle\x3e.sa_fabAudiospot-pulse-static-background-inner{ border-color : #fff;border-radius: 50%;width: 34px;height: 34px;background-color: #fff; position:absolute;display: table-cell;top:11px;left:11px;text-align:center;transform: scale(1.2);opacity:0.15;}\x3c/style\x3e",staticPulse:"\x3cstyle\x3e.sa_fabAudiospot-pulse-static-background{ border-color : #fff;border-radius: 50%;width: 42px;height: 42px;background-color: #fff; position:absolute;display: table-cell;top:7px;left:7px;text-align:center;transform: scale(1.2);opacity:0.15} \x3c/style\x3e",
dynamicPulse:"\x3cstyle\x3e.sa_fabAudiospot-pulse-initial-background{ border-color : #fff;border-radius: 50%;width: 42px;height: 42px;background-color: #fff; position:absolute;display: none;top:7px;left:7px;text-align:center;transform: scale(1.2);opacity:0.25;animation: initialPulse 1.5s 0.2s infinite;} @keyframes initialPulse {0% { transform: scale(1); } 70% { transform: scale(1.25); } 100% { transform: scale(1); }} \x3c/style\x3e",animatingSpeaker:"\x3cstyle\x3e.sa_fabaudiospot-image { height: 54px; width: 54px; position: relative; overflow: hidden; display: none;margin-left: 7px;margin-top: 8px;z-index:100 } .sa_fabaudiospot-image span{ display: block; width: 14px; height: 14px; background: #fff; margin: 17px 0 0 3px; } .sa_fabaudiospot-image span:after { content: ''; position: absolute; width: 0; height: 0; border-style: solid; border-color: transparent #fff transparent transparent; border-width: 15px 20px 15px 21px; left: -15px; top: 9px; } .sa_fabaudiospot-image span:before { transform: rotate(45deg); border-radius: 0 26px 0 0; content: ''; position: absolute; width: 8px; height: 8px; border-style: double; border-color: #fff; border-width: 13px 13px 0 0; left: 29px; top: 14px; transition: all 0.2s ease-out;animation: pulse1 1.5s 0.2s infinite;}@keyframes pulse1 {0% { border-style: solid; width: 8px; height: 8px;border-width: 4px 4px 0 0;left: 25px; top: 18px; } 50% { border-style: double; } 100% { border-style: none; }}\x3c/style\x3e",
staticSpeaker:"\x3cstyle\x3e.sa_fabaudiospot-image-static { height: 39px; width: 39px; position: relative; overflow: hidden; display: inline-block;margin-left:10px;margin-top: 10px;z-index:100 } .sa_fabaudiospot-image-static span{ display: block; width: 10.5px; height: 10.5px; background: #fff; margin: 12.75px 0 0 2.25px; } .sa_fabaudiospot-image-static span:after { content: ''; position: absolute; width: 0; height: 0; border-style: solid; border-color: transparent #fff transparent transparent; border-width: 11.25px 15px 11.25px 15.75px; left: -11.25px; top: 6.75px; } .sa_fabaudiospot-image-static span:before { transform: rotate(45deg); border-radius: 0 19.5px 0 0; content: ''; position: absolute; width: 6px; height: 6px; border-style: double; border-color: #fff; border-width: 9px 9px 0 0; left: 21px; top: 10px; transition: all 0.2s ease-out;}\x3c/style\x3e"},
style:{FABaudiospotStyle:".sa_fabaudiospot-container{ background:#007185; position:fixed; bottom:50%; left:0px;  box-sizing:border-box; display:table; box-shadow:0px 2px 7px #F0F2F2; z-index:490; opacity:1;margin-right: 0px; border-top-left-radius: 32px; border-bottom-left-radius: 32px;transition: margin-left 0s cubic-bezier(0.65, 0, 0.076, 1); }.sa_fabaudiospot-content{display:flex;align-items: center;vertical-align: middle;} .sa_fabaudiospot-image-container{display:table-cell;vertical-align:top;width:56px;height:56px}.sa_fabaudiospot-text-container{display:flex;flex-direction: column;justify-content: center;padding-left:10px;padding-right: 120px; transition: all 0.45s cubic-bezier(0.65, 0, 0.076, 1);}.sa_fabaudiospot-text{display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;text-overflow:clip;white-space:nowrap;color:#fff}#sa_fabAudiospot-dynamic-pulse{overflow:auto}.sa_fabAudiospot-pulse-dynamic-background{position:relative;z-index:99;padding:10px;opacity:0.15;border-radius:3px;-webkit-box-shadow:0 2px 5px 0 rgba(17,17,17,.25);-moz-box-shadow:0 2px 5px 0 rgba(17,17,17,.25);box-shadow:0 2px 5px 0 rgba(17,17,17,.25);-o-box-shadow:0 2px 5px 0 rgba(17,17,17,.25);-moz-transform-style:preserve-3d;-o-transform-style:preserve-3d;-webkit-transform-style:preserve-3d;transform-style:preserve-3d}.sa_fabAudiospot-pulse-dynamic-background:after{position:absolute;display:block;width:0;content:'';border-style:solid;-moz-transform-style:preserve-3d;-o-transform-style:preserve-3d;-webkit-transform-style:preserve-3d;transform-style:preserve-3d} .sa_fabaudiospot-pause{border: 0; background: transparent; box-sizing: border-box; width: 0; height: 22px; border-color: transparent transparent transparent #fff; transition: 100ms all ease; border-style: double; border-width: 0px 0 0px 20px;position:relative;z-index:1;left:17px;top:17px;display:none;margin-right: 30px}"},
errorCode:{ALREADY_RENDERED:"Already_Rendered",UPDATE_FAILED:"Update_Failed",DISMISS_FAILED:"Dimiss_Failed",AUDIO_NOT_SUPPORTED:"Audio_not_supported",STATE_NOT_SUPPORTED:"State_not_supported",PARAMETER_MISSING:"Mandatory_param_missing",AUTO_PLAY_NOT_SUPPORTED:"Auto_play_not_supported"},successCode:{UPDATE_SUCCESS:"Update_Success",DISMISS_SUCCESS:"Dismiss_Success",RENDER_SUCCESS:"Render_Success",STATE_UPDATE_SUCCESS:"Update_State_Success",AUTO_PLAY_SUPPORTED:"Auto_play_supported"},constants:{expandedTextSplitter:"|",
defaultAudioPlayFeedbackText:"Audio On",defaultAudioPauseFeedbackText:"Audio Off",defaultAutoPlayFallbackText:"Tap for Help",fabAudiospotElongateMarginLeft:"0px",fabAudiospotFallbackContractMarginLeft:"-13px",fabAudiospotDefaultImageWidth:55,fabAudiospotDefaultTransitionDelay:"2s",fabAudiospotTextMarginConstant:25,fabAudiospotNegation:-1,fabAudiospotZIndex:490,fabAudiospotForegroundZIndex:9E3,fabAudiospotBackgroundZIndex:390},CSSConstants:{fabAudiospotContainerIdentifier:"sa_fabaudiospot",fabAudiospotContainerClass:"sa_fabaudiospot-container",
fabAudiospotContentClass:"sa_fabaudiospot-content",fabAudiospotImageContainerIdentifier:"sa_fabaudiospot-image",fabAudiospotImageContainerClass:"sa_fabaudiospot-image-container",fabAudiospotInitialPulseIdentifier:"sa_fabAudiospot-pulse-initial-dynamic",fabAudiospotInitialPulseClass:"sa_fabAudiospot-pulse-initial-background",fabAudiospotPulseIdentifier:"sa_fabAudiospot-dynamic-pulse",fabAudiospotPulseClass:"sa_fabAudiospot-pulse-dynamic-background",fabAudiospotStaticPulseClass:"sa_fabAudiospot-pulse-static-background",
fabAudiospotStaticPulseIdentifier:"sa_fabAudiospot-static-pulse",fabAudiospotInnerStaticPulseIdentifier:"sa_fabAudiospot-static-pulse-inner",fabAudiospotInnerStaticPulseClass:"sa_fabAudiospot-pulse-static-background-inner",fabAudiospotSpeakerClass:"sa_fabaudiospot-image",fabAudiospotSpeakerIdentifiers:"sa_fabaudiospot-image-speaker",fabAudiospotStaticSpeakerClass:"sa_fabaudiospot-image-static",fabAudiospotStaticSpeakerIdentifier:"sa_fabaudiospot-image-static-speaker",fabAudiospotPauseIconIdentifier:"sa_fabaudiospot-pause-icon",
fabAudiospotPauseIconClass:"sa_fabaudiospot-pause",fabAudiospotTextContainerClass:"sa_fabaudiospot-text-container",fabAudiospotTextClass:"sa_fabaudiospot-text",fabAudiospotTextIdentifier:"sa_fabaudiospot-text-id"},state:{play:"PLAY_STATE",pause:"PAUSE_STATE",complete:"COMPLETED",autoPlayFailed:"AUTOPLAY_FAILED"},metrics:{PREFIX:"SA_FABAUDIOSPOT_",PLAY:"PLAYED",PAUSE:"PAUSED",REPLAY:"REPLAYED",COMPLETE:"COMPLETED",ERROR:"ERROR",STALLED:"STALLED",SUSPEND:"SUSPENDED",WAITING:"WAITING",ABORT:"ABORT",
LOADED:"LOADED",USER_PAUSE:"USER_PAUSE",NON_USER_PAUSE:"NON_USER_PAUSE",USER_PLAY:"USER_PLAY",USER_REPLAY:"USER_REPLAY",ENABLED_BOTTOMSHEET:"ENABLED_BOTTOMSHEET",ENABLED_POPOVER:"ENABLED_POPOVER",DISABLED_OVERLAY:"DISABLED_OVERLAY"},overlay:{BOTTOM_SHEET:"bottomsheet",POP_OVER:"popover"}}})})();(function(){q.when("A","jQuery","SAFabAudiospotConstants","QTipLibrary","ShoppingAidsGenericUtils").register("SAFabAudiospotRenderer",function(h,c,a,e,f){h={addStyles:function(){f.addStyleToHead(a.style.FABaudiospotStyle)}};
e=e.View.extend({container:w,create:function(c){var b=document.createElement("div");b.id=a.CSSConstants.fabAudiospotContainerIdentifier;b.classList.add(a.CSSConstants.fabAudiospotContainerClass);var d=document.createElement("div");d.classList.add(a.CSSConstants.fabAudiospotContentClass);var e=document.createElement("div");e.id=a.CSSConstants.fabAudiospotImageContainerIdentifier;e.classList.add(a.CSSConstants.fabAudiospotImageContainerClass);var f=document.createElement("div");f.id=a.CSSConstants.fabAudiospotInitialPulseIdentifier;
f.classList.add(a.CSSConstants.fabAudiospotInitialPulseClass);f.innerHTML=a.template.dynamicPulse;var h=document.createElement("div");h.classList.add(a.CSSConstants.fabAudiospotPulseClass);h.id=a.CSSConstants.fabAudiospotPulseIdentifier;h.innerHTML=a.template.pulse;var m=document.createElement("div");m.classList.add(a.CSSConstants.fabAudiospotInnerStaticPulseClass);m.id=a.CSSConstants.fabAudiospotInnerStaticPulseIdentifier;m.innerHTML=a.template.innerCircle;var q=document.createElement("div");q.classList.add(a.CSSConstants.fabAudiospotStaticPulseClass);
q.id=a.CSSConstants.fabAudiospotStaticPulseIdentifier;q.innerHTML=a.template.staticPulse;var x=document.createElement("div");x.id=a.CSSConstants.fabAudiospotSpeakerIdentifier;x.classList.add(a.CSSConstants.fabAudiospotSpeakerClass);var r=document.createElement("span");r.innerHTML=a.template.animatingSpeaker;var n=document.createElement("div");n.id=a.CSSConstants.fabAudiospotStaticSpeakerIdentifier;n.classList.add(a.CSSConstants.fabAudiospotStaticSpeakerClass);var u=document.createElement("span");
u.innerHTML=a.template.staticSpeaker;var w=document.createElement("div");w.id=a.CSSConstants.fabAudiospotPauseIconIdentifier;w.classList.add(a.CSSConstants.fabAudiospotPauseIconClass);x.appendChild(r);n.appendChild(u);e.appendChild(h);e.appendChild(m);e.appendChild(q);e.appendChild(f);e.appendChild(n);e.appendChild(w);f=document.createElement("div");f.classList.add(a.CSSConstants.fabAudiospotTextContainerClass);h=document.createElement("p");h.id=a.CSSConstants.fabAudiospotTextIdentifier;h.classList.add(a.CSSConstants.fabAudiospotTextClass);
h.innerText=c;f.appendChild(h);d.appendChild(e);d.appendChild(f);b.appendChild(d);this.container=b}});h.createFabAudiospot=new e;h.addStyles();return h})})();(function(){q.when("A","jQuery","QTipLibrary","ShoppingAidsGenericUtils","FabAudiospotStateManager","SAFabAudiospotConstants","ShoppingAidsAudioUtils","NestedShoppingAidHelper","SAFabAudiospotUIManager","SAFabAudiospotRenderer","QTipsMetrics","QTips","AssistedShoppingDataManager").execute(function(h,c,a,e,f,d,b,k,g,l,p,m,q){h=a.View.extend({createFabAudiospot:l.createFabAudiospot,
model:w,render:function(a,c){if(this.createFabAudiospot.container)throw p.incrementCounter(d.metrics.PREFIX+this.model.identifier+d.errorCode.ALREADY_RENDERED),d.errorCode.ALREADY_RENDERED;this.model=a;this._validateModel(this.model);this._splitExpandedText();this.createFabAudiospot.create(this.model.get("audioPlayFeedbackText"));f.configureAudio(this.model,c);this._displayFabAudiospot();e.isDefined(this.model.get("introductoryAnimation"))&&this.model.get("introductoryAnimation")&&g.introductoryAnimation();
this._attachClickListener();b.handleVisibility(f.getCurrentState.bind(f),f.setState.bind(f));p.incrementCounter(d.metrics.PREFIX+this.model.identifier+d.successCode.RENDER_SUCCESS)},update:function(a){if(this._validateModel(a))this._updateIdentifier(a.get("identifier")),this._updateSupplementarySA(a.get("supplementarySA")),f.updateAudioSrc(a.get("audioSrc")),f.setElongateFabAudiospot(a.get("expandFabAudiospot")),p.incrementCounter(d.metrics.PREFIX+this.model.identifier+d.successCode.UPDATE_SUCCESS);
else throw p.incrementCounter(d.metrics.PREFIX+this.model.identifier+d.errorCode.UPDATE_FAILED),d.errorCode.UPDATE_FAILED;},getIdentifier:function(){return this.model.get("identifier")},isFabAudiospotPresent:function(){return e.isDefined(this.createFabAudiospot.container)},dismiss:function(){f.setState(f.pause,!1);b.removeVisibilityChangeListener();document.body.removeChild(this.createFabAudiospot.container);this.createFabAudiospot.container=w;this._dismissSupplementarySA();f.resetModuleVariables();
f.audio=null;p.incrementCounter(d.metrics.PREFIX+this.model.identifier+"_dismissed")},_displayFabAudiospot:function(){document.body.appendChild(this.createFabAudiospot.container);g.cacheElements();this._adjustPosition();this._renderSupplementarySA();g.enableTransition()},_attachClickListener:function(){c(this.createFabAudiospot.container).click(function(){f.getCurrentState()===f.pause?(f.setState(f.play,!0),g.elongateShortenAnimation()):f.getCurrentState()===f.play?(f.setState(f.pause,!0),g.elongateShortenAnimation()):
f.getCurrentState()===f.complete?f.setState(f.play,!0):f.getCurrentState()===f.autoPlayFailed&&f.setState(f.play,!0)})},_updateIdentifier:function(a){this.model.set({identifier:a});f.setIdentifier(a)},_updateSupplementarySA:function(a){this.model.set({supplementarySA:a});this._renderSupplementarySA()},_dismissSupplementarySA:function(){f.dismissAllRenderingSupplementarySA()},_splitExpandedText:function(){if(this.model.get("expandedText")){var a=this.model.get("expandedText"),b=a.split(d.constants.expandedTextSplitter)[0];
if((a=a.split(d.constants.expandedTextSplitter)[1])&&b){this.model.set({audioPlayFeedbackText:b});this.model.set({audioPauseFeedbackText:a});return}}this.model.set({audioPlayFeedbackText:d.constants.defaultAudioPlayFeedbackText});this.model.set({audioPauseFeedbackText:d.constants.defaultAudioPauseFeedbackText})},_adjustPosition:function(){e.isDefined(this.model.get("positionY"))&&(c("#sa_fabaudiospot")[0].style.bottom=this.model.get("positionY").toString()+"%");c("#sa_fabaudiospot")[0].style.left=
(screen.width-d.constants.fabAudiospotDefaultImageWidth).toString()+"px";c("#sa_fabaudiospot")[0].style.marginLeft=d.constants.fabAudiospotElongateMarginLeft},_renderSupplementarySA:function(){var a=[];if(this.model.get("supplementarySA"))for(var b=0;b<this.model.get("supplementarySA").length;b++)this.model.get("supplementarySA")[b].has("from")&&this.model.get("supplementarySA")[b].has("to")?a.push(this.model.get("supplementarySA")[b]):k.dispatchShoppingAidEvent(this.model.get("supplementarySA")[b]);
f.setTimeUpdateSupplementarySAList(a);a.length&&f.audioEventListenerForTimeUpdate();p.incrementCounter(d.metrics.PREFIX+this.model.identifier+"_supplementarySA_displayed")},_validateModel:function(a){if(!e.isDefined(a.get("identifier"))||!e.isDefined(a.get("audioSrc")))throw d.errorCode.PARAMETER_MISSING;return!0},handlerOverlay:function(a,e){this.isFabAudiospotPresent()&&(e===d.overlay.BOTTOM_SHEET&&this._isCurrentBottomSheetEnabled(a)||e===d.overlay.POP_OVER&&this._isCurrentPopOverEnabled(a)?(c("#sa_fabaudiospot")[0].style.zIndex=
d.constants.fabAudiospotForegroundZIndex,p.incrementCounter(d.metrics.PREFIX+this.model.identifier+"_"+(e===d.overlay.BOTTOM_SHEET?d.metrics.ENABLED_BOTTOMSHEET:d.metrics.ENABLED_POPOVER)+"_"+(e===d.overlay.BOTTOM_SHEET?a.sheet._name:a.popover._name))):(c("#sa_fabaudiospot")[0].style.zIndex=d.constants.fabAudiospotBackgroundZIndex,b.handleOverlay(f.getCurrentState.bind(f),f.setState.bind(f),this.getIdentifier()),p.incrementCounter(d.metrics.PREFIX+this.model.identifier+"_"+d.metrics.DISABLED_OVERLAY)))},
handlerOverlayDismiss:function(a,e){this.isFabAudiospotPresent()&&(e===d.overlay.BOTTOM_SHEET&&this._isCurrentBottomSheetEnabled(a)||e===d.overlay.POP_OVER&&this._isCurrentPopOverEnabled(a)||(b.handleOverlayDismiss(f.getCurrentState.bind(f),f.setState.bind(f),l.renderer.getIdentifier.bind(l.renderer)),this.userInteraction=!1),c("#sa_fabaudiospot")[0].style.zIndex=d.constants.fabAudiospotZIndex)},_isCurrentBottomSheetEnabled:function(a){return e.isDefined(a)&&e.isDefined(a.sheet._name)&&e.isDefined(q.getEnabledBottomSheets())&&
-1!==q.getEnabledBottomSheets().indexOf(a.sheet._name)},_isCurrentPopOverEnabled:function(a){return e.isDefined(a)&&e.isDefined(a.popover._name)&&e.isDefined(q.getEnabledPopOvers())&&-1!==q.getEnabledPopOvers().indexOf(a.popover._name)}});l.renderer=new h;return l})})();(function(){q.when("A","SAFabAudiospotRenderer","SAFabAudiospotConstants","QTipsConstants","FabAudiospotStateManager").register("SAFabAudiospot",function(h,c,a,e,f){return{render:function(a,b,e){try{c.renderer.render(a,b)}catch(g){e&&
"function"===typeof e&&e(g)}},updateModel:function(d,b,e){try{c.renderer.update(d),b&&"function"===typeof b&&b(a.successCode.UPDATE_SUCCESS)}catch(g){e&&"function"===typeof e&&e(g)}},getState:function(){return f.getCurrentState()},updateState:function(c,b,e){try{f.setState(c),b&&"function"===typeof b&&b(a.successCode.STATE_UPDATE_SUCCESS)}catch(g){e&&"function"===typeof e&&e(g)}},getIdentifier:function(){return c.renderer.getIdentifier()},dismiss:function(d,b){try{c.renderer.dismiss(),d&&"function"===
typeof d&&d(a.successCode.DISMISS_SUCCESS)}catch(k){b&&"function"===typeof b&&b(a.errorCode.DISMISS_FAILED)}},dismissWithId:function(a,b,f){c.renderer.isFabAudiospotPresent()&&this.getIdentifier()===a?this.dismiss(b,f):f&&"function"===typeof f&&f(e.errorCodes.SA_NOT_DISPLAYED)}}})})();(function(){q.when("A","jQuery","SAFabAudiospotConstants","ShoppingAidsAudioUtils","ShoppingAidsGenericUtils","SAFabAudiospotUIManager","NestedShoppingAidHelper","QTipsConstants","SAMetricUtils").register("FabAudiospotStateManager",
function(h,c,a,e,f,d,b,k,g){var l={play:a.state.play,pause:a.state.pause,complete:a.state.complete,autoPlayFailed:a.state.autoPlayFailed,audioPlayFeedbackText:"",audioPauseFeedbackText:"",audioFallbackText:"",stateUpdateCallback:w,elongateFabAudiospot:!1,identifier:w,replayed:!1,timeUpdateSupplementarySAList:[],timeUpdateSupplementarySAListIndex:0,isTimeUpdateEventListenerAdded:!1,currentlyRenderingSupplementarySAList:[],lastAudioTimeUpdateCall:0,configureAudio:function(b,c){if(e.isAudioSupported())l.audio=
new Audio,l.audio.src=b.get("audioSrc"),l.state=this.pause,this.audioPlayFeedbackText=b.get("audioPlayFeedbackText"),this.audioPauseFeedbackText=b.get("audioPauseFeedbackText"),this.stateUpdateCallback=c,this.elongateFabAudiospot=b.get("expandFabAudiospot"),this.identifier=b.get("identifier"),this.audioFallbackText=b.get("fallbackText"),this._audioEventListeners();else throw a.errorCode.AUDIO_NOT_SUPPORTED;},triggerEvent:function(a){a=new CustomEvent(a,{bubbles:!0,cancelable:!1,detail:{identifier:l.identifier}});
document.dispatchEvent(a)},_updateState:function(a){switch(l.state){case this.play:this._togglePlay(a);break;case this.pause:this._togglePause(this.pause,a);break;case this.complete:this._togglePause(this.complete);break;case this.autoPlayFailed:d.autoPlayFallbackCSS(this.audioFallbackText)}},_togglePlay:function(b){var c=l.audio.play();f.isDefined(c)&&c.then(function(){l.triggerEvent(l.play);d.updatePlayCSS(l.audioPlayFeedbackText);d.adjustView();l.replayed?(g.incrementCounterWithPlatform(a.metrics.PREFIX+
a.metrics.REPLAY,1,l.identifier),f.isDefined(b)&&!0===b&&g.incrementCounterWithPlatform(a.metrics.PREFIX+a.metrics.USER_REPLAY,1,l.identifier)):(g.incrementCounterWithPlatform(a.metrics.PREFIX+a.metrics.PLAY,1,l.identifier),f.isDefined(b)&&!0===b&&g.incrementCounterWithPlatform(a.metrics.PREFIX+a.metrics.USER_PLAY,1,l.identifier))}).catch(function(b){l.stateUpdateCallback(a.errorCode.UPDATE_FAILED,a.errorCode.AUTO_PLAY_NOT_SUPPORTED)})},_togglePause:function(b,c){if(b===this.pause){l.audio.pause();
l.triggerEvent(l.pause);var e=l.audio.currentTime;l.audio.currentTime=0;g.incrementCounterWithPlatform(a.metrics.PREFIX+a.metrics.PAUSE,e,this.identifier);f.isDefined(c)&&!0===c?g.incrementCounterWithPlatform(a.metrics.PREFIX+a.metrics.USER_PAUSE,1,this.identifier):g.incrementCounterWithPlatform(a.metrics.PREFIX+a.metrics.NON_USER_PAUSE,1,this.identifier)}d.updateAudioStoppedCSS(this.audioPauseFeedbackText,b);l.dismissAllRenderingSupplementarySA()},_audioEventListeners:function(){l.audio.addEventListener("ended",
function(){l.setState(l.complete,!0);l.triggerEvent(l.complete);l.replayed=!0;l.dismissAllRenderingSupplementarySA();g.incrementCounterWithPlatform(a.metrics.PREFIX+a.metrics.COMPLETE,1,l.identifier)});l.audio.addEventListener("stalled",function(){g.incrementCounterWithPlatform(a.metrics.PREFIX+a.metrics.STALLED,1,l.identifier)});l.audio.addEventListener("waiting",function(){g.incrementCounterWithPlatform(a.metrics.PREFIX+a.metrics.WAITING,1,l.identifier)})},_processSupplementarySA:function(){if(0<
l.audio.currentTime&&l.getCurrentState()===l.play){for(var a=l.audio.currentTime*k.secondToMillisecondConversion,c=0;c<l.currentlyRenderingSupplementarySAList.length;c++){var d=l.currentlyRenderingSupplementarySAList[c].get("to");f.isInRange(d,l.lastAudioTimeUpdateCall,a)&&(b.dispatchDismissShoppingAidEvent(l.currentlyRenderingSupplementarySAList[c].attributes),l.currentlyRenderingSupplementarySAList.splice(c,1),--c)}for(c=l.timeUpdateSupplementarySAListIndex;c<l.timeUpdateSupplementarySAList.length;c++)if(d=
l.timeUpdateSupplementarySAList[c].get("from"),f.isInRange(d,l.lastAudioTimeUpdateCall,a))l.currentlyRenderingSupplementarySAList.push(l.timeUpdateSupplementarySAList[c]),b.dispatchShoppingAidEvent(l.timeUpdateSupplementarySAList[c]),l.timeUpdateSupplementarySAListIndex=c+1;else break;l.lastAudioTimeUpdateCall=a}},audioEventListenerForTimeUpdate:function(){var b=a.timer.supplementarySAThrottleTimer;l.isTimeUpdateEventListenerAdded||(l.audio.addEventListener("timeupdate",h.throttle(this._processSupplementarySA,
b)),l.isTimeUpdateEventListenerAdded=!0)},setTimeUpdateSupplementarySAList:function(a){this.timeUpdateSupplementarySAList=a},dismissAllRenderingSupplementarySA:function(){for(var a=0;a<l.currentlyRenderingSupplementarySAList.length;a++)b.dispatchDismissShoppingAidEvent(l.currentlyRenderingSupplementarySAList[a].attributes);this._resetCurrentlyRenderingSupplementarySAList()},_resetCurrentlyRenderingSupplementarySAList:function(){l.currentlyRenderingSupplementarySAList=[];l.timeUpdateSupplementarySAListIndex=
0;l.lastAudioTimeUpdateCall=0},getCurrentState:function(){return l.state},updateAudioSrc:function(a){l.audio.src=a;this.replayed=!1},setState:function(b,c){f.isDefined(b)&&(l.state=b);this._updateState(c);this._expandFabAudiospot();f.isDefined(this.stateUpdateCallback)&&"function"===typeof this.stateUpdateCallback&&c&&this.stateUpdateCallback(a.successCode.UPDATE_SUCCESS,l.state)},setElongateFabAudiospot:function(a){this.elongateFabAudiospot=a},_expandFabAudiospot:function(){this.elongateFabAudiospot&&
(d.elongateShortenAnimation(),this.elongateFabAudiospot=!1)},setIdentifier:function(a){this.identifier=a},resetModuleVariables:function(){this.replayed=!1;this.timeUpdateSupplementarySAList=[];this.isTimeUpdateEventListenerAdded=!1}};return l})})();(function(){q.when("A","jQuery","SAFabAudiospotConstants","ShoppingAidsGenericUtils").register("SAFabAudiospotUIManager",function(h,c,a,e){var f={elementIdStore:[],cacheElements:function(){this.elementIdStore.fabAudiospot=c("#sa_fabaudiospot");this.elementIdStore.fabAudiospotText=
c("#sa_fabaudiospot-text-id");this.elementIdStore.fabAudiospotPause=c("#sa_fabaudiospot-pause-icon");this.elementIdStore.fabAudiospotSpeaker=c("#sa_fabaudiospot-image-static-speaker");this.elementIdStore.fabAudiospotDynamicPulse=c("#sa_fabAudiospot-dynamic-pulse");this.elementIdStore.fabAudiospotStaticPulse=c("#sa_fabAudiospot-static-pulse");this.elementIdStore.fabAudiospotInnerStaticPulse=c("#sa_fabAudiospot-static-pulse-inner");this.elementIdStore.fabAudiospotInitialPulse=c("#sa_fabAudiospot-pulse-initial-dynamic")},
updatePlayCSS:function(a){c(this.elementIdStore.fabAudiospotText)[0].innerText=a;c(this.elementIdStore.fabAudiospotPause).show();c(this.elementIdStore.fabAudiospotSpeaker).hide();c(this.elementIdStore.fabAudiospotDynamicPulse).show();c(this.elementIdStore.fabAudiospotStaticPulse).hide();c(this.elementIdStore.fabAudiospotInnerStaticPulse).hide();c(this.elementIdStore.fabAudiospotInitialPulse).hide()},updateAudioStoppedCSS:function(d,b){b===a.state.pause&&(c(this.elementIdStore.fabAudiospotText)[0].innerText=
d);c(this.elementIdStore.fabAudiospotPause).hide();c(this.elementIdStore.fabAudiospotSpeaker).show();c(this.elementIdStore.fabAudiospotDynamicPulse).hide();c(this.elementIdStore.fabAudiospotStaticPulse).show();c(this.elementIdStore.fabAudiospotInnerStaticPulse).show()},introductoryAnimation:function(){c(this.elementIdStore.fabAudiospotInitialPulse).show();c(this.elementIdStore.fabAudiospotStaticPulse).hide()},enableTransition:function(){c(this.elementIdStore.fabAudiospot)[0].style.transitionDuration=
a.constants.fabAudiospotDefaultTransitionDelay},elongateShortenAnimation:function(){c(this.elementIdStore.fabAudiospot)[0].style.marginLeft=f.getLeftMargin();setTimeout(function(){f.enableTransition();c(f.elementIdStore.fabAudiospot)[0].style.marginLeft=a.constants.fabAudiospotElongateMarginLeft},a.timer.elongationTimer)},autoPlayFallbackCSS:function(d){c(this.elementIdStore.fabAudiospotText)[0].innerText=a.constants.defaultAutoPlayFallbackText;d&&(c(this.elementIdStore.fabAudiospotText)[0].innerText=
d);this.elongateShortenAnimation()},getLeftMargin:function(){var d=c(this.elementIdStore.fabAudiospotText)[0].offsetWidth;return(a.constants.fabAudiospotNegation*(d+a.constants.fabAudiospotTextMarginConstant)).toString()+"px"},adjustView:function(){e.isDefined(c(this.elementIdStore.fabAudiospot)[0].style.marginLeft)&&c(this.elementIdStore.fabAudiospot)[0].style.marginLeft!==a.constants.fabAudiospotElongateMarginLeft&&(c(this.elementIdStore.fabAudiospot)[0].style.marginLeft=this.getLeftMargin())}};
return f})})();(function(){q.when("A","jQuery","ShoppingAidsGenericUtils").register("ShoppingAidsAudioUtils",function(h,c,a){return{lastKnownState:w,lastKnownIdentifier:w,defaultOverlayTime:1E3,handleVisibility:function(a,f){c(document).bind("visibilitychange.fab_audio_spot",function(){document.hidden?(this.lastKnownState=a(),f("PAUSE_STATE")):(f(this.lastKnownState),this.lastKnownState=w)})},removeVisibilityChangeListener:function(){c(document).unbind("visibilitychange.fab_audio_spot")},isAudioSupported:function(){return r&&
r.Audio},handleOverlay:function(a,c,d){this.lastKnownState=a();c("PAUSE_STATE");this.lastKnownIdentifier=d},handleOverlayDismiss:function(c,f,d){var b=this;setTimeout(function(){a.isDefined(d)&&a.isDefined(b.lastKnownIdentifier)&&b.lastKnownIdentifier!==d()?b.lastKnownIdentifier=w:"PAUSE_STATE"===c()&&f(b.lastKnownState);b.lastKnownState=w},b.defaultOverlayTime)}}})})();(function(){q.when("A","jQuery","a-sheet","SAAudiospot","SAFabAudiospotRenderer","SAHotspot","ShoppingAidsGenericUtils","SAFabAudiospotConstants",
"a-popover","AnchorBasedSAUtils","QTipsConstants","QTips").execute(function(h,c,a,e,f,d,b,k,g,l,p,m){var q=!1;h.on("a:sheet:beforeShow",function(a){b.isDefined(e.view)&&b.isDefined(f.renderer)&&b.isDefined(d.view)&&(e.view.handleOverlay(),f.renderer.handlerOverlay(a,k.overlay.BOTTOM_SHEET),d.view.handleOverlay())});h.on("a:sheet:afterHide",function(a){b.isDefined(e.view)&&b.isDefined(f.renderer)&&b.isDefined(d.view)&&(e.view.handleOverlayDismiss(),f.renderer.handlerOverlayDismiss(a,k.overlay.BOTTOM_SHEET),
d.view.handleOverlayDismiss())});h.on("a:popover:beforeShow",function(a){b.isDefined(e.view)&&b.isDefined(f.renderer)&&b.isDefined(d.view)&&(e.view.handleOverlay(),f.renderer.handlerOverlay(a,k.overlay.POP_OVER),d.view.handleOverlay())});h.on("a:popover:afterHide",function(a){b.isDefined(e.view)&&b.isDefined(f.renderer)&&b.isDefined(d.view)&&(e.view.handleOverlayDismiss(),f.renderer.handlerOverlayDismiss(a,k.overlay.POP_OVER),d.view.handleOverlayDismiss())});0<c(".nav-input.nav-progressive-attribute").length&&
(c(".nav-input.nav-progressive-attribute").bind("focus",function(){this.intervalId=setInterval(function(){b.isDefined(e.view)&&b.isDefined(d.view)&&b.isDefined(m.view)&&(b.hasNoPopover(p.popOverAnchors.popoverClass,p.popOverAnchors.searchSugesstions,p.popOverAnchors.searchFilterPage)||q?b.hasNoPopover(p.popOverAnchors.popoverClass,p.popOverAnchors.searchSugesstions,p.popOverAnchors.searchFilterPage)&&(d.view.handleOverlayDismiss(),e.view.handleOverlayDismiss(),q=!1):(e.view.handleOverlay(),d.view.handleOverlay(),
m.view.dismissAndRender(),q=!0))},p.timer.searchSuggestionPollTime)}),c(".nav-input.nav-progressive-attribute").bind("focusout",function(){b.isDefined(this.intervalId)&&(clearInterval(this.intervalId),delete this.intervalId,b.isDefined(e.view)&&b.isDefined(d.view)&&(d.view.handleOverlayDismiss(),e.view.handleOverlayDismiss(),q=!1))}))})})();(function(){q.when("A","ContextAwareFieldsFactory","QTipsConstants","QTipsMetrics","SAMetricConstants","ContextAwareFieldsProcessor","ShoppingAidsGenericUtils").register("ContextAwareSubstitutor",
function(h,c,a,e,f,d,b){return{substitute:function(a,b,d){if(a.clientSideTargetting||a.desiredWeblabTreatment)a.contextAwareIndex=b;else return!0;return!0!==this.substituteGenericContextAwareFields(a,b)?!1:(d=c.getContextAwareFields(d))?this.substituteIndexedValueInSAData(a,d,b):!0},substituteGenericContextAwareFields:function(a,b){var d=c.getContextAwareFields("Generic");return this.substituteIndexedValueInSAData(a,d,b)},substituteIndexedValueInSAData:function(b,c,d){for(var g=0;g<c.length;g++){var k=
c[g];if(!h.objectIsEmpty(b[k])){var l=b[k].split(a.contextAwareSADelimiter);if(1<l.length)if(d<l.length)b[k]=l[d].trim(),this.processSubstituteField(b,k),e.incrementCounter(f.SA_CONTEXT_AWARE_SUBSTITUTION+b.identifier+"_"+k+"_"+d);else return e.incrementCounter(f.SA_CONTEXT_AWARE_SUBSTITUTION+b.identifier+"_"+k+f.FAIL),!1}}return!0},processSubstituteField:function(a,c){-1!==d.fields.indexOf(c)&&(-1!==d.fieldsParsersMap.stringToObject.indexOf(c)&&"string"===typeof a[c]?a[c]=b.parseJSONStringIfValid(a[c]):
-1!==d.fieldsParsersMap.stringToNumber.indexOf(c)&&"string"===typeof a[c]&&(a[c]=Number(a[c])))}}})})();(function(){q.when("A","ContextAwareFields").register("ContextAwareFieldsFactory",function(h,c){return{getContextAwareFields:function(a){return"Sparkles"===a?c.sparklesContextAwareFields:"ToolTips"===a?c.toolTipsContextAwareFields:"FabAudioSpot"===a?c.fabAudioSpotContextAwareFields:"Generic"===a?c.genericContextAwareFields:null}}})})();(function(){q.register("ContextAwareFields",function(){return{genericContextAwareFields:["nestedSAList",
"clientSideTargetting","desiredWeblabTreatment"],toolTipsContextAwareFields:["elementValue","elementAnchor","elementType"],sparklesContextAwareFields:"linkText descText targetEndPoint icon displayIcon displayText descriptionText".split(" "),fabAudioSpotContextAwareFields:["audioSrc","supplementarySA","positionY"]}})})();(function(){q.register("SASupportedMarketplaceConfig",function(){return{supportedMarketplace:{ATVPDKIKX0DER:"us",A2EUQ1WTGCTBG2:"ca",A1AM78C64UM0Y8:"mx",A2Q3Y263D00KWC:"br",A1F83G8C2ARO7P:"uk",
A1PA6795UKMFR9:"de",A13V1IB3VIYZZH:"fr",A1RKKUPIHCS9HS:"es",APJ6JRA9NG5V4:"it",A21TJRUUN4KGV:"in",A33AVAJ2PDY3EV:"tr",A2VIGQ35RCS4UG:"ae",A17E79C6D8DWNP:"sa",A1805IZSGTT6HS:"nl",ARBP9OOSHTCHU:"eg",A2NODRKZP88ZB9:"se",A1C3SOZRARQ6R3:"pl",AMEN7PMS3EDWL:"be",AE08WJ6YKNBMC:"za",A28R8C7NBKEWEA:"ie",A1VC38T7YXB528:"jp",A39IBJ37TRP1C6:"au",A19VAU5U5O7RUS:"sg"}}})})();(function(){q.when("A","ShoppingAidsGenericUtils","PageResolver").register("SAMutationObserver",function(h,c,a){var e={_pageChangeObserver:w,
attachPageChangeObserver:function(e,d){c.isMutationObserverSupported()&&c.isDefined(d)&&c.isDefined(e)&&"function"===typeof e&&(this._pageChangeObserver=new r.MutationObserver(function(){var b=a.pageAdapter();c.isDefined(b)&&b!==d&&(d=b,e(b))}),this._handleVisibilityChange())},isPageChangeObserverAttached:function(){return c.isDefined(this._pageChangeObserver)},enablePageChangeObserver:function(){this.isPageChangeObserverAttached()&&this._pageChangeObserver.observe(document,{subtree:!0,childList:!0})},
disconnectPageChangeObserver:function(){this.isPageChangeObserverAttached()&&this._pageChangeObserver.disconnect()},cleanUpPageChangeObserver:function(){this._pageChangeObserver=w;h.$(document).unbind("visibilitychange.mutation_observer")},_handleVisibilityChange:function(){h.$(document).bind("visibilitychange.mutation_observer",function(){document.hidden?e.disconnectPageChangeObserver():e.enablePageChangeObserver()})}};return e})})();(function(){q.register("ContextAwareFieldsProcessor",function(){return{fields:["supplementarySA",
"positionY"],fieldsParsersMap:{stringToObject:["supplementarySA"],stringToNumber:["positionY"]}}})})();(function(){q.when("A","SARateLimitingUtils","SARateLimitingConfig","SAMetricConstants","QTipsMetrics","ShoppingAidsGenericUtils","LocalStorageInterface").register("SARateLimitingInstrumentationHandler",function(h,c,a,e,f,d,b){return{localStorageKey:a.rateLimitingInstrumentationKey,fetchWindowIntervals:a.fetchWindowIntervals,rateLimitingInstrumentation:function(a,e){var f=d.defaultJSONIfUndefined(b.getFromLocalStorage(this.localStorageKey),
{});a=c.updateFetchWindowConfig(a,f);this._logMetricsForRateLimiting(a,e);b.setInLocalStorage(this.localStorageKey,JSON.stringify(a))},_logMetricsForRateLimiting:function(b,c){for(var d=0;d<this.fetchWindowIntervals.length;d++){var g=this.fetchWindowIntervals[d];g=e.SA_FETCH_RATE_LIMITING_PREFIX.concat(g,"_",b[g][a.countKey]);c?f.incrementCounter(g+e.STATUS_1):f.incrementCounter(g+e.STATUS_0)}}}})})();(function(){q.when("A","ShoppingAidsGenericUtils","SARateLimitingConfig").register("SARateLimitingUtils",
function(h,c,a){return{fetchWindowIntervals:a.fetchWindowIntervals,windowStartTimeKey:a.windowStartTimeKey,countKey:a.countKey,updateFetchWindowConfig:function(a,c){for(var d={},b=0;b<this.fetchWindowIntervals.length;b++){var e=this.fetchWindowIntervals[b];d[e]=this._updateFetchWindowConfigForInterval(a,c[e],e)}return d},_updateFetchWindowConfigForInterval:function(a,c,d){var b={};this.isFetchWindowActive(a,c,d)?(b[this.windowStartTimeKey]=c[this.windowStartTimeKey],b[this.countKey]=c[this.countKey]+
1):(b[this.windowStartTimeKey]=a,b[this.countKey]=1);return b},isFetchWindowActive:function(a,f,d){return c.isDefined(f)&&c.isDefined(f[this.windowStartTimeKey])?a-f[this.windowStartTimeKey]<6E4*d:!1}}})})();(function(){q.register("SARateLimitingConfig",function(){return{rateLimitingInstrumentationKey:"sa_fetch_window_config",fetchWindowIntervals:[5,10,15,30,60],countKey:"count",windowStartTimeKey:"windowStartTime"}})})();(function(){q.when("QTipsMetrics","ShoppingAidsGenericUtils","SAConfig").register("SAMetricUtils",
function(h,c,a){return{currentLop:c.getCookie(a.cookies.language)||a.defaultLoP,platform:c.platformCheck(),incrementCounterWithLOP:function(a,c,d){h.incrementCounter(a,c,d);h.incrementCounter(a+"_"+this.currentLop,c,d)},incrementCounterWithPlatform:function(a,c,d){h.incrementCounter(a,c,d);h.incrementCounter(a+"_"+this.platform,c,d)},incrementCounterWithLOPAndPlatform:function(a,c,d){h.incrementCounter(a,c,d);h.incrementCounter(a+"_"+this.currentLop,c,d);h.incrementCounter(a+"_"+this.platform,c,d)},
incrementCounterWithLOPPlatformAndCombination:function(a,c,d){h.incrementCounter(a,c,d);h.incrementCounter(a+"_"+this.currentLop,c,d);h.incrementCounter(a+"_"+this.platform,c,d);h.incrementCounter(a+"_"+this.platform+"_"+this.currentLop,c,d)},incrementLOPCounter:function(a,c,d){h.incrementCounter(a+"_"+this.currentLop,c,d)},incrementPlatformCounter:function(a,c,d){h.incrementCounter(a+"_"+this.platform,c,d)},incrementLOPPlatformCombinationCounter:function(a,c,d){h.incrementCounter(a+"_"+this.platform+
"_"+this.currentLop,c,d)}}})})();(function(){q.when("ShoppingAidsFilters","PageResolver","QTipsMetrics","SAMetricConstants","SAMetricUtils","QTipsConstants").register("UIGuardRailFiltering",function(h,c,a,e,f,d){return{isUIGuardRailMet:function(b){a.incrementCounter(e.SA_CACHE_PREFIX+e.UI_GUARD_RAIL_FILTER+e.START);var d=c.pageAdapter();if(b.uiBasedGuardRail&&!h.excecuteClientSideTargetting(b.uiBasedGuardRail.trim()))return f.incrementCounterWithLOPPlatformAndCombination(e.UI_GUARD_RAIL_FILTER+e.FAIL,
1,b.identifier),a.incrementCounter(e.UI_GUARD_RAIL_FILTER+e.FAIL+"_"+d,b.identifier),!1;f.incrementCounterWithLOPPlatformAndCombination(e.UI_GUARD_RAIL_FILTER+e.PASS,1,b.identifier);a.incrementCounter(e.UI_GUARD_RAIL_FILTER+e.PASS+"_"+d,b.identifier);return!0}}})})();(function(){q.when("A","ShoppingAidsGenericUtils").register("HighPrioritySAListProvider",function(h,c){return{getHighPrioritySAList:function(a){var e=this._provideHighPrioritySA(a);return c.isDefined(e)?e:a},_provideHighPrioritySA:function(a){var e;
h.each(a,function(a,d){a=h.filter(a,function(a){return!c.isDefined(e)&&-1!==a.identifier.indexOf("GuidedTour")});c.isNonEmptyArray(a)&&(e={},e[d]=[a[0]])});return e}}})})();(function(){q.when("A","jQuery","ShoppingAidsGenericUtils","MwebAttributionHandler","NativeFeatureAttributionHandler","QTipsMetrics","FeatureAttributionConstants","SACommonConstants","SAFeature").register("SAPAttributionHandler",function(h,c,a,e,f,d,b,k,g){function l(a){for(var c in a)if(a.hasOwnProperty(c)){var e=a[c][b.lastLogImpressionTime];
e=Math.abs(Date.now()-e);e=Math.round(e/36E5);a[c][b.timeElapsed]=e;e>b.ATTRIBUTION_TIME_LIMIT_HR&&(delete a[c],d.incrementCounter(b.SAP_ATTRIBUTION_METRIC_PREFIX+c+"_Deleted"))}return a}function p(a){a[b.html]={};a[b.native]={};a[b.native][k.MSHOP_ANDROID]={};a[b.native][k.MSHOP_IPHONE]={};return a}var m={},q;return{featureAttributionBootUp:function(c,h){q=c;c=a.getFromLocalStorage(b.SAP_ATTRIBUTION_LOCALSTORAGE_KEY);a.isDefined(c)?m=a.parseJSONStringIfValid(c):(m=p(m),d.incrementCounter(b.SAP_ATTRIBUTION_METRIC_PREFIX+
"Local_Storage_Initialised"));a.isDefined(m[b.html])||(m[b.html]={},d.incrementCounter(b.SAP_ATTRIBUTION_METRIC_PREFIX+"Html_Anchors_Local_Storage_Initialised"));a.isDefined(m[b.native])||(m[b.native]={},m[b.native][k.MSHOP_ANDROID]={},m[b.native][k.MSHOP_IPHONE]={},d.incrementCounter(b.SAP_ATTRIBUTION_METRIC_PREFIX+"Native_Anchors_Local_Storage_Initialised"));if(a.isDefined(m[q])){if(a.isDefined(m[q][b.html])){for(var n in m[q][b.html])m[b.html][n]=m[q][b.html][n];delete m[q][b.html]}a.isDefined(m[q][b.native])&&
delete m[q][b.native];delete m[q]}m[b.html]=l(m[b.html]);m[b.native][k.MSHOP_ANDROID]=l(m[b.native][k.MSHOP_ANDROID]);m[b.native][k.MSHOP_IPHONE]=l(m[b.native][k.MSHOP_IPHONE]);h!==k.MSHOP_ANDROID&&h!==k.MSHOP_IPHONE||!g.androidFeatureAttribution||(n=m[b.native],a.isDefined(n)?f.initiate(n,h):p(m));h=m[b.html];a.isDefined(h)?e.initiate(h):p(m);a.setInLocalStorage(b.SAP_ATTRIBUTION_LOCALSTORAGE_KEY,JSON.stringify(m));d.incrementCounter(b.SAP_ATTRIBUTION_METRIC_PREFIX+"initialised")},enableFeatureAttribution:function(c){if(a.isDefined(c)&&
a.isDefined(c[b.featureAttributionAnchor])&&a.isDefined(c[b.maxDisplayCount])&&a.isDefined(c[b.maxDisplayCount])){var d={},f=c[b.identifier],g=c[b.elementDisplayType].toLowerCase();d[f]={};d[f][b.identifier]=f;d[f][b.lastLogImpressionTime]=Date.now();d[f][b.maxDisplayCount]=c[b.maxDisplayCount];d[f][b.timeElapsed]=0;d[f][b.eventListenerAnchor]=c[b.featureAttributionAnchor];g===b.html?(d[f][b.videoSource]=c[b.videoSource],d[f][b.toolTipUXChangeAllocatedTreatment]=c[b.toolTipUXChangeAllocatedTreatment],
e.unbindListener(m[b.html][f]),a.isDefined(d)?e.initiate(d):p(m),m[b.html][f]=d[f]):g===b.native&&(m[b.native][a.platformCheck()][f]=d[f]);a.setInLocalStorage(b.SAP_ATTRIBUTION_LOCALSTORAGE_KEY,JSON.stringify(m))}}}})})();(function(){q.when("A","jQuery","ShoppingAidsGenericUtils","SAAttributionMetricLogger","QTipsMetrics","FeatureAttributionConstants").register("MwebAttributionHandler",function(h,c,a,e,f,d){return{initiate:function(a){for(var b in a)if(a.hasOwnProperty(b)){var f=a[b].eventListenerAnchor,
h=a[b].maxDisplayCount,p=a[b].timeElapsed,m=a[b].videoSource,q=a[b].toolTipUXChangeAllocatedTreatment;0!==c(f).length&&c(f).bind(d.SA_ATTRIBUTION_CLICK_LISTENER,{identifier:b,impressionCount:h,timeElapsed:p,videoSource:m,toolTipUXChangeAllocatedTreatment:q},e.logAttributionMetrics)}},unbindListener:function(b){a.isDefined(b)&&(c(b.eventListenerAnchor).unbind(d.SA_ATTRIBUTION_CLICK_LISTENER),f.incrementCounter(d.SAP_MWEB_HANDLER_METRIC_PREFIX+"Listener_Unbounded"),f.incrementCounter(d.SAP_MWEB_HANDLER_METRIC_PREFIX+
"Listener_Unbounded_"+b.identifier+"_"+b.eventListenerAnchor))}}})})();(function(){q.when("A","QTipsMetrics","FeatureAttributionConstants","SACommonConstants","ShoppingAidsGenericUtils").register("NativeFeatureAttributionHandler",function(h,c,a,e,f){return{initiate:function(a,b){}}})})();(function(){q.when("A","QTipsMetrics","FeatureAttributionConstants","ShoppingAidsGenericUtils","QTipsConstants").register("SAAttributionMetricLogger",function(h,c,a,e,f){return{logAttributionMetrics:function(d){var b=
d.data.identifier,h=d.data.timeElapsed,g=a.SA_ATTRIBUTION_PREFIX+b+"_"+d.data.impressionCount+"_"+a.SA_HOUR_CONSTANT;b=a.SA_ATTRIBUTION_PREFIX+b+"_"+a.SA_HOUR_CONSTANT;h<=a.TWO_HOUR_BUCKET?(c.incrementCounter(g+a.TWO_HOUR_BUCKET),c.incrementCounter(g+a.FOUR_HOUR_BUCKET),c.incrementCounter(g+a.EIGHT_HOUR_BUCKET),c.incrementCounter(g+a.TWELVE_HOUR_BUCKET),c.incrementCounter(b+a.TWO_HOUR_BUCKET),c.incrementCounter(b+a.FOUR_HOUR_BUCKET),c.incrementCounter(b+a.EIGHT_HOUR_BUCKET)):h>a.TWO_HOUR_BUCKET&&
h<=a.FOUR_HOUR_BUCKET?(c.incrementCounter(g+a.FOUR_HOUR_BUCKET),c.incrementCounter(g+a.EIGHT_HOUR_BUCKET),c.incrementCounter(g+a.TWELVE_HOUR_BUCKET),c.incrementCounter(b+a.FOUR_HOUR_BUCKET),c.incrementCounter(b+a.EIGHT_HOUR_BUCKET)):h>a.FOUR_HOUR_BUCKET&&h<=a.EIGHT_HOUR_BUCKET?(c.incrementCounter(g+a.EIGHT_HOUR_BUCKET),c.incrementCounter(g+a.TWELVE_HOUR_BUCKET),c.incrementCounter(b+a.EIGHT_HOUR_BUCKET)):c.incrementCounter(g+a.TWELVE_HOUR_BUCKET);c.incrementCounter(b+a.TWELVE_HOUR_BUCKET);c.incrementCounter(a.SA_ATTRIBUTION_PREFIX+
d.data.impressionCount+"_"+d.data.identifier);c.incrementCounter(a.SA_ATTRIBUTION_PREFIX+d.data.identifier);d.data.videoSource===f.EmptyString&&d.data.toolTipUXChangeAllocatedTreatment!==f.EmptyString&&e.isPlatformSupportedForToolTipUxExperiment()&&c.incrementCounter(a.SA_ATTRIBUTION_PREFIX+"_"+a.TOOL_TIP_UX+"_"+d.data.toolTipUXChangeAllocatedTreatment)}}})})();(function(){q.register("FeatureAttributionConstants",function(){return{SA_ATTRIBUTION_CLICK_LISTENER:"click.SAAttribution",SAP_MWEB_HANDLER_METRIC_PREFIX:"SAAttribution_Mweb_Handler_",
SAP_ATTRIBUTION_LOCALSTORAGE_KEY:"SA_Attribution_Cache",SAP_ATTRIBUTION_METRIC_PREFIX:"SAAttribution_",SA_ATTRIBUTION_PREFIX:"SA_ATTRIBUTION_",TOOL_TIP_UX:"ToolTip_UX",SA_HOUR_CONSTANT:"Hour",TWO_HOUR_BUCKET:2,FOUR_HOUR_BUCKET:4,EIGHT_HOUR_BUCKET:8,TWELVE_HOUR_BUCKET:12,ATTRIBUTION_TIME_LIMIT_HR:12,native:"native",html:"html",identifier:"identifier",elementAnchor:"elementAnchor",eventListenerAnchor:"eventListenerAnchor",videoSource:"videoSource",toolTipUXChangeAllocatedTreatment:"toolTipUXChangeAllocatedTreatment",
lastLogImpressionTime:"lastLogImpressionTime",maxDisplayCount:"maxDisplayCount",elementDisplayType:"elementDisplayType",featureAttribution:"featureAttribution",featureAttributionAnchor:"featureAttributionAnchor",timeElapsed:"timeElapsed",SUCCESS_MESSAGE:"SA_FeatureAttributionSuccess",INVALID_DATA:"SA_InvalidFeatureAttributionData",NULL_VIEW:"NullView",FeatureAttribution:"FeatureAttribution"}})})();(function(){q.when("ShoppingAidsGenericUtils","LocaleConfig","QTipsMetrics").register("LoPResolver",
function(h,c,a){return{SA_LOP_PREFIX:"sa_lop_",LANG_META_TAG_LOP_METRIC:"lang_meta_tag_used",COOKIE_LOP_METRIC:"cookie_used",UNKNOWN_LOP_METRIC:"unknown_used",getCurrentLoP:function(){var c=this._formatLoP(this._retrieveLoPFromLangMetaTag());if(h.isDefined(c))return a.incrementCounter(this.SA_LOP_PREFIX+this.LANG_META_TAG_LOP_METRIC),c;c=this._formatLocaleToLoP(this._retrieveLocaleFromCookie());if(h.isDefined(c))return a.incrementCounter(this.SA_LOP_PREFIX+this.COOKIE_LOP_METRIC),c;a.incrementCounter(this.SA_LOP_PREFIX+
this.UNKNOWN_LOP_METRIC);return"unknown"},_retrieveLoPFromLangMetaTag:function(){try{var a=document.querySelector("html").getAttribute("lang");return h.isDefined(a)?a:null}catch(f){return null}},_retrieveLocaleFromCookie:function(){var a=h.getMarketplaceName();return h.getCookie(c.MarketplaceLocaleMap[a])},_formatLoP:function(a){if(!h.isDefined(a)||-1===a.indexOf("-"))return null;a=a.split("-");return a[0]+"-"+a[1].toUpperCase()},_formatLocaleToLoP:function(a){return h.isDefined(a)&&-1!==a.indexOf("_")?
a.replace("_","-"):null}}})})();(function(){q.register("LocaleConfig",function(){return{MarketplaceLocaleMap:{us:"lc-main",ca:"lc-acbca",mx:"lc-acbmx",br:"lc-acbbr",uk:"lc-acbuk",de:"lc-acbde",fr:"lc-acbfr",es:"lc-acbes",it:"lc-acbit","in":"lc-acbin",tr:"lc-acbtr",ae:"lc-acbae",sa:"lc-acbsa",nl:"lc-acbnl",eg:"lc-acbeg",se:"lc-acbse",pl:"lc-acbpl",be:"lc-acbbe",jp:"lc-acbjp",au:"lc-acbau",sg:"lc-acbsg"}}})})();(function(){q.register("SADesktopConfig",function(){return{pageEligibility:{Detail:{wdg:["ebooks_display_on_website",
"audible_display_on_website"]}}}})})();(function(){(function(){q.when("GAMEX_CONSTANTS","GameXSparkleUtils","QTipsMetrics","ShoppingAidsGenericUtils").register("GameXSparkleAsset",function(h,c,a,e){return{execute:function(){var f=Date.now(),d=function(b){var d=Date.now();a.incrementCounter(h.METRIC_PREFIX+h.SUCCESS_CALLBACK_METRIC);c.invokeSparkle(b);a.recordLatency(h.METRIC_PREFIX+"SparkleInvocationLatency",Date.now()-d)},b=function(b){a.incrementCounter(h.METRIC_PREFIX+h.ERROR_CALLBACK_METRIC)};
try{var k=Date.now(),g=JSON.parse(e.getFromLocalStorage(h.LOCAL_STORAGE_KEY));var l=c.sanitizeObject(g);a.recordLatency(h.METRIC_PREFIX+"LocalStorageReadLatency",Date.now()-k)}catch(m){a.incrementCounter(h.METRIC_PREFIX+h.LOCAL_STORAGE_DATA_READING_ERROR)}if(l&&c.isGameXDataValid(l))if(c.isGameXLocalStorageTTLValid(l)){try{var p=document.body&&document.body.innerText&&h&&h.ORDER_PLACED_TEXT&&document.body.innerText.includes(h.ORDER_PLACED_TEXT)}catch(m){p=!1}!0===p&&(c.buildActionTray(l,h.ACTION_PAGE_SPARKLE_TYPE,
l.actionPageDescriptionText,d,b),e.removeFromLocalStorage(h.LOCAL_STORAGE_KEY));k=Array.prototype.slice.call(document.getElementsByTagName("button")).filter(function(a){return a.textContent.trim()===h.ADD_TO_CART_BUTTON_TEXT});0<k.length&&k.forEach(function(a){a.addEventListener("click",function(){c.buildActionTray(l,h.ACTION_PAGE_SPARKLE_TYPE,l.actionPageDescriptionText,d,b);e.removeFromLocalStorage(h.LOCAL_STORAGE_KEY)})});k=e.getQueryParameterValue(h.REF_TAG_KEY);h.REF_TAG_VALUE===k?(k=Date.now(),
a.incrementCounter(h.METRIC_PREFIX+h.LANDING_PAGE_RENDER_METRIC),c.buildActionTray(l,h.LANDING_PAGE_SPARKLE_TYPE,l.actionType,d,b),a.recordLatency(h.METRIC_PREFIX+"LandingPageBuildTrayLatency",Date.now()-k)):(k=Date.now(),g=document.getElementById(c.getElementIdForAction(l.actionType)),a.incrementCounter(h.METRIC_PREFIX+h.ACTION_PAGE_RENDER_METRIC),a.recordLatency(h.METRIC_PREFIX+"ElementLookupLatency",Date.now()-k),g&&g.addEventListener("click",function(){var f=Date.now();c.buildActionTray(l,h.ACTION_PAGE_SPARKLE_TYPE,
l.actionPageDescriptionText,d,b);a.recordLatency(h.METRIC_PREFIX+"ActionPageBuildTrayLatency",Date.now()-f);e.removeFromLocalStorage(h.LOCAL_STORAGE_KEY)}));a.recordLatency(h.METRIC_PREFIX+"TotalExecutionLatency",Date.now()-f)}else e.removeFromLocalStorage(h.LOCAL_STORAGE_KEY);else a.incrementCounter(h.METRIC_PREFIX+h.INVALID_LOCAL_STORAGE_METRIC)}}})})();(function(){q.register("GAMEX_CONSTANTS",function(){return Object.freeze({LOCAL_STORAGE_KEY:"gamex-sparkle-data",LANDING_PAGE_SPARKLE_TYPE:2,ACTION_PAGE_SPARKLE_TYPE:4,
REF_TAG_VALUE:"GameXActionTray",REF_TAG_KEY:"ref",ACTION_ELEMENT_ID_MAPPER:Object.freeze({ADD_ITEM_TO_WISHLIST:"lists-heart-unfilled-heart-button",ADD_ITEM_TO_CART:"add-to-cart-button"}),METRIC_PREFIX:"GameXSparkleAsset-",SUCCESS_METRIC:"success",FAILURE_METRIC:"failed",TTL_EXPIRE_METRIC:"TTL-expired",SUCCESS_CALLBACK_METRIC:"Success-callback-received",ERROR_CALLBACK_METRIC:"Error-callback-received",LANDING_PAGE_RENDER_METRIC:"Rendering-landing-page-sparkle",ACTION_PAGE_RENDER_METRIC:"Rendering-action-page-sparkle",
INVALID_LOCAL_STORAGE_METRIC:"Invalid-local-storage",LOCAL_STORAGE_DATA_READING_ERROR:"Error-reading-local-storage-data",ADD_TO_CART_BUTTON_TEXT:"Add to cart",ORDER_PLACED_TEXT:"Order placed, thank you!",PAGE_TYPES:["detailaw","searchaw","detailwebview","landingaw","checkoutthankyouaw"]})})})();(function(){q.when("OnDemandShoppingAids","GAMEX_CONSTANTS","QTipsMetrics").register("GameXSparkleUtils",function(h,c,a){return{getElementIdForAction:function(a){return c.ACTION_ELEMENT_ID_MAPPER[a]||null},
buildActionTray:function(e,f,d,b,k){var g=Date.now();if(f===c.LANDING_PAGE_SPARKLE_TYPE){switch(d){case "ADD_ITEM_TO_CART":var l="Complete add item to cart to win rewards";break;case "SINGLE_PURCHASE_WITH_CONSTRAINT":l="Complete purchase to win rewards";break;default:l=e.landingPageDescriptionText}d=null}else l=e.displayText;h.staticSparkleBuilder().setIdentifier(e.identifier).setDisplayText(l).setDisplayIcon(e.displayIcon).setTargetEndpoint(e.targetEndpoint).setDescriptionText(d).setTypeOfStaticSparkle(f).setSuccessResponse(function(){a.incrementCounter(c.METRIC_PREFIX+
c.SUCCESS_METRIC)}).setFailureResponse(function(b){a.incrementCounter(c.METRIC_PREFIX+c.FAILURE_METRIC)}).buildSparkle(b,k);a.recordLatency(c.METRIC_PREFIX+"BuildActionTrayLatency",Date.now()-g)},isGameXDataValid:function(a){return!!(a.identifier&&a.displayText&&a.displayIcon&&a.targetEndpoint&&a.ttl)},isGameXLocalStorageTTLValid:function(e){if(e.ttl>Date.now())return!0;a.incrementCounter(c.METRIC_PREFIX+c.TTL_EXPIRE_METRIC);return!1},sanitizeString:function(a){var c=document.createElement("div");
c.textContent=a;return c.innerHTML},sanitizeObject:function(a){var c={};if("object"===typeof a&&null!==a)for(var d in a)if(a.hasOwnProperty(d)){var b=this.sanitizeString(d);var e="object"===typeof a[d]?this.sanitizeObject(a[d]):this.sanitizeString(a[d]);c[b]=e}return c},invokeSparkle:function(e){var f=Date.now();h.invoke(e,"sparkle/1.0.0");a.recordLatency(c.METRIC_PREFIX+"SparkleInvocationLatency",Date.now()-f)}}})})();(function(){q.when("GameXSparkleAsset","GAMEX_CONSTANTS").execute(function(h,c){if(r&&
r.ue_pty){var a=r.ue_pty.toLowerCase();c.PAGE_TYPES.includes(a)&&h.execute()}})})()})()});
/* ******** */
(function(e){var l=window.AmazonUIPageJS||window.P,k=l._namespace||l.attributeErrors,g=k?k("SABottomSheetLibrary",""):l;g.guardFatal?g.guardFatal(e)(g,window):g.execute(function(){e(g,window)})})(function(e,l,k){(function(){e.when("A").register("SA_BottomSheet",function(){return{}})})();(function(){e.register("SA_BottomSheetStyles",function(){return"\n    #saBottomSheet-bottom-sheet{\n      -webkit-transition:height 2s;\n      transition:height 2s;\n      overflow-y:auto;height:100%\n    }\n  "})})();
(function(){e.when("A","jQuery").register("SA_MemoryManager",function(){var g=function(){try{if(l.localStorage)return 1}catch(a){return l.ue.count("SA_MemoryManager_LocalStorageNotExposed",1),0}},e={bottomSheet:"SA_BottomSheetObj"},k=function(){return(new Date).setHours(0,0,0,0).toString()};return{shouldFetchShoppingAids:function(a,f,c,d){if(!g())return!1;a=localStorage.getItem(e[a]);if(null===a)return!0;a=JSON.parse(a);var b=a.lastShownDate;if(k()!==b)return!0;b=a.dayCount;return a.pageCounts[f]<
d&&b<c?!0:!1},writeShoppingAidsData:function(a,f,c){if(g()){var d=localStorage.getItem(e[a]),b={},h=Math.round((new Date).getTime()/36E5);null===d?(b.lastShownDate=k(),b.dayCount=1,d={},d[c]=1,b.pageCounts=d,c={},c.lastTimeStamp=h,c.count=1,h={},h[f]=c,b.elements=h):(b=JSON.parse(d),b.lastShownDate=k(),b.dayCount+=1,d=b.pageCounts,d[c]+=1,b.pageCounts=d,c=b.elements,c[f]?(c[f].count+=1,c[f].lastTimeStamp=h):(d={},d.lastTimeStamp=h,d.count=1,c[f]=d),b.elements=c);localStorage.setItem(e[a],JSON.stringify(b))}},
shouldShowShoppingAids:function(a,f,c,d){if(!g())return!1;a=localStorage.getItem(e[a]);if(null===a)return!0;a=JSON.parse(a).elements;if(!a[f])return!0;var b=a[f].lastTimeStamp,h=Math.round((new Date).getTime()/36E5);return b+c<=h&&a[f].count<d?!0:!1}}})})();(function(){e.register("vernacBSStyles",function(){return'.a-container{padding-bottom : 12px !important;}.a-spacing-base{margin-bottom : -2.5rem !important;}#saBottomSheet-bottom-sheet form{margin-bottom : 0 !important;}.a-box-inner{padding-bottom : 10px !important;padding-top : 10px !important;}.a-form-actions{padding-top : 8px}#icp-sl-t-text{margin-left : 10px !important;margin-right : 10px !important;margin-bottom : 7px !important; font-size : 1.2rem;}div[data-a-input-name\x3d"LOP"]{font-size : 1.3rem !important;}#icp-btn-close{margin-bottom : 0.5rem; margin-top : 0!important}#icp-btn-save{margin-bottom : 0.5rem; margin-top : 0!important}'})})()});
/* ******** */
(function(a){var c=window.AmazonUIPageJS||window.P,d=c._namespace||c.attributeErrors,b=d?d("SAPartnerAssets",""):c;b.guardFatal?b.guardFatal(a)(b,window):b.execute(function(){a(b,window)})})(function(a,c,d){(function(){a.when("A").register("SAPartnerUtils",function(){var b=c.ue;return{logCSMTag:function(a){b&&b.tag&&b.tag(a);c&&uex&&"function"===typeof uex&&uex("ld",a,{wb:1})},triggerCustomEvent:function(b,a,c,e,f){a=new CustomEvent(a,{bubbles:c||!0,cancelable:e||!1,detail:f||d});b.dispatchEvent(a)}}})})()});
/* ******** */
(function(l){var u=window.AmazonUIPageJS||window.P,e=u._namespace||u.attributeErrors,m=e?e("QTipsMobileWebAssets",""):u;m.guardFatal?m.guardFatal(l)(m,window):m.execute(function(){l(m,window)})})(function(l,u,e){(function(){l.when("A","StatefulSAEligiblityHelper","MultiPageSAOrchestrator","SA_BottomSheet","SA_MemoryManager","QTips","QTipsMetrics","QTipsConstants","ShoppingAidsSparkles","ShoppingAidsFilters","SAFeature","SAEndPointsConfig","ShoppingAidsFetcher","LogImpressionManager","ShoppingAidsGenericUtils",
"SAHotspot","SAAudiospot","SAHighlighter","PageResolver","LocalStorageInterface","LoPResolver","SAPAttributionHandler","AnchorBasedSAUtils").register("QTipsHandler",function(e,g,a,h,b,c,t,C,p,f,q,z,D,x,n,d,y,A,B,E,v,w,r){return{page:"",storageKey:"identifier",schedulingKey:"schedulingType",shoppingAidsType:"shoppingAidsType",contextAwareIndex:"contextAwareIndex",sourceName:"ShoppingAidsMWeb_",platform:n.platformCheck(),SupportedMarketplace:n.isSupportedMarketplace(),init:function(){var b=this;if("Unsupported"===
b.platform||!b.SupportedMarketplace)return t.incrementCounter(this.sourceName+"assetsNotSupported"),0;if("Desktop"===b.platform){if(!n.isDesktopPageRequestSupported())return t.incrementCounter("Desktop_IneligibleRequest_AssetsNotSupported"),0;t.incrementCounter("Desktop_EligibleRequest_AssetsLoaded")}else t.incrementCounter(this.sourceName+"assetsLoaded");if(!E.isLocalStorageExposed())return 0;c.utils.cleanUpCachingInstrumentation();c.utils.savePreviousLoP();c.utils.saveCurrentLoP();if(this.page=
B.pageAdapter()){w.featureAttributionBootUp(this.page,this.platform);var d=function(k){if(k){var d=!1;if(q.clientSideCaching&&a.isBrowserSupported()){var c=g.getEligibleInProgressSA(b.page);n.isObjectEmpty(c)?k.ShoppingAidsList&&n.isNonEmptyArray(k.ShoppingAidsList.MultiPageShoppingAids)&&(d=!0,a.display(k.ShoppingAidsList.MultiPageShoppingAids[0],b.page)):(d=!0,a.display(c,b.page))}else g.cleanUpInProgressStore();q.clientSideCaching||(k=f.start(k));k.ShoppingAidsList&&!d&&(d=k.ShoppingAidsList.ToolTips,
n.isNonEmptyArray(d)&&b._display(d),d=k.ShoppingAidsList.BottomSheets,n.isNonEmptyArray(d)&&(d.sort(function(a,b){return a.sequenceNum-b.sequenceNum}),h.collection.create(d),h.view.start(b.page,n.isMShop())),d=k.ShoppingAidsList.Sparkles,n.isNonEmptyArray(d)&&p.init({sparkles:d,page:b.page,platform:b.platform}),d=k.ShoppingAidsList.Audiospots,n.isNonEmptyArray(d)&&b._displayAudiospots(d),d=k.ShoppingAidsList.Hotspots,n.isNonEmptyArray(d)&&b._displayHotspots(d),k=k.ShoppingAidsList.Highlighters,n.isNonEmptyArray(k)&&
b._displayHighlighters(k))}b.fireReady()};q.clientSideCaching?D.fetchShoppingAids(b.page,d):(D.cleanUpSACache(),b.fetch(b.page,d))}else t.incrementCounter(this.sourceName+"pageTypeMismatch")},_getParameterByName:function(a,b){b||(b=u.location.href);a=a.replace(/[\[\]]/g,"\\$\x26");return(a=(new RegExp("[?\x26]"+a+"(\x3d([^\x26#]*)|\x26|#|$)")).exec(b))?a[2]?decodeURIComponent(a[2].replace(/\+/g," ")):"":null},fetch:function(a,b,f){var k=this.sourceName+"fetchShoppingAids_",d=document.referrer,g=/.*\.amazon\..*/g,
h="DIRECT";g&&g.test(d)&&(h="INDIRECT");e.ajax(z.fetchShoppingAidsEndPoint,{method:"GET",contentType:"application/json; charset\x3dutf-8",timeout:6E4,params:{page:a,url:B.getWindowLocationHref(),trafficType:h,previousLop:c.utils.getPreviousLoP(),currentLop:v.getCurrentLoP(),pageHitRequestID:n.getPageHitRequestID()},success:function(f){t.incrementCounter(k+a+"_success");b&&"function"===typeof b&&b(f)},error:function(b,d){"Request Timeout"===d?t.incrementCounter(k+a+"_request_timeout"):"NotFound"===
d&&t.incrementCounter(k+a+"_unknown_endpoint");t.incrementCounter(k+a+"_failed");f&&"function"===typeof f&&f(b)}})},displayOnDemandToolTip:function(a){c.collection.add(a);c.view.setDismissalCallback(this.logImpression.bind(this));c.view.setTerminationCallback(this.terminateQTip.bind(this));c.view.setPageType(this.page);c.utils.isDefined(c.view.setCountLogger)&&c.view.setCountLogger(this.logCounter.bind(this));c.view.dismissAndRender()},_display:function(a){c.collection.create(a);c.view.setDismissalCallback(this.logImpression.bind(this));
c.view.setTerminationCallback(this.terminateQTip.bind(this));c.view.setPageType(this.page);c.utils.isDefined(c.view.setCountLogger)&&c.view.setCountLogger(this.logCounter.bind(this));c.view.postQTipRender()},_displayAudiospots:function(a){u&&u.Audio&&(y.collection.create(a),y.view.setAudiospotRenderCompleteCallback(this.logImpression.bind(this)),y.view.postAudiospotRender())},_displayHotspots:function(a){d.collection.create(a);d.view.setRenderCompleteCallback(this.logImpression.bind(this));d.view.postHotspotRender()},
_displayHighlighters:function(a){A.collection.create(a);A.view.setRenderCompleteCallback(this.logImpression.bind(this));A.view.postHighlighterRender()},logCounter:function(a,b,f){t.incrementCounter(a+"_"+b,f)},_isEligibleForToolTipUxExperiment:function(a,b,f,d){return n.isDefined(a)&&"tool_tip"===a&&n.isDefined(b)&&"html"===b.toLowerCase()&&n.isDefined(f)&&""===f&&n.isDefined(d)&&""!==d&&n.isPlatformSupportedForToolTipUxExperiment()},logImpression:function(a){var b=this,f=a[this.storageKey],d=a.elementDisplayType,
c=a.videoSource,k=this.sourceName+f+"_"+this.page,g=this.sourceName+"logSA_",h=a[this.schedulingKey],v=a[this.contextAwareIndex],m=a.userEvent,w=a[this.shoppingAidsType]||"tool_tip",p=a.toolTipUXChangeAllocatedTreatment,l=r.getAidAnchorElement(a,w);null!==a.onDemand&&a.onDemand&&(a=a.successResponse,w="tool_tip:childSA",a&&"function"===typeof a&&a());if(q.clientSideCaching)v=b._isEligibleForToolTipUxExperiment(w,d,c,p)?x.buildOptionalParameter().withContextAwareIndex(v).withUserEvent(m).withShoppingAidsAnchorGroup(l).withToolTipUxAllocatedTreatmentValue(p).build():
x.buildOptionalParameter().withContextAwareIndex(v).withUserEvent(m).withShoppingAidsAnchorGroup(l).build(),x.handle(f,h,w,this.page,v);else{l=z.logImpressionEndPoint;f={pageType:this.page,shoppingAidsType:w,id:f,schedulingType:h};n.isDefined(v)&&(f.contextAwareIndex=v);if(n.isDefined(m))switch(f.userEvent=m,m){case C.userEvent.optOut:k+="_optOut";break;case C.userEvent.complete:k+="_complete"}e.ajax(l,{method:"GET",contentType:"application/json; charset\x3dutf-8",timeout:6E4,params:f,success:function(a){t.incrementCounter(k+
"_logged");b._isEligibleForToolTipUxExperiment(w,d,c,p)&&(a=C.ToolTipUXMetricForLogImpression+p,u.ue.trigger&&u.ue.trigger(C.ToolTipUXExperimentWeblab,p),t.incrementCounter(a))},error:function(a,b){"NotFound"===b&&t.incrementCounter(g+"unknown_endpoint");t.incrementCounter(k+"_failedToLog")}})}},terminateQTip:function(a){t.incrementCounter("terminate_"+a[this.storageKey])},fireReady:function(){l.register("shopping-aids-ready",function(){})}}});l.when("QTipsHandler","ready").execute(function(e){e.init()})})();
(function(){l.when("A","QTipsMetrics").register("OnDemandTooltipBuilder",function(m,g){return function(){return{setIdentifier:function(a){this.identifier=a;return this},setElementStartOffset:function(a){this.elementStartOffset=a;return this},setElementDisplayType:function(a){this.elementDisplayType=a;return this},setElementArrowPosition:function(a){this.elementArrowPosition=a;return this},setElementValue:function(a){this.elementValue=a;return this},setElementAnchor:function(a){this.elementAnchor=
a;return this},setSuccessResponse:function(a){this.success=a;return this},setFailureResponse:function(a){this.failure=a;return this},setDismissalType:function(a){this.dismissalType=a;return this},setElementCTA:function(a){this.elementCTA=a;return this},setElementDuration:function(a){this.elementDuration=a;return this},setElementBounceDuration:function(a){this.elementBounceDuration=a;return this},setVideoSource:function(a){this.videoSource=a;return this},setVideoWidth:function(a){this.videoWidth=a;
return this},setNestedSA:function(a){this.nestedSA=a;return this},setScrollToAnchor:function(a){this.scrollToAnchor=a;return this},setAnchorScrollOffset:function(a){this.anchorScrollOffset=a;return this},setOffsetX:function(a){this.offsetX=a;return this},setOffsetY:function(a){this.offsetY=a;return this},setElementIndex:function(a){this.elementIndex=a;return this},setElementBackgroundColor:function(a){this.elementBackgroundColor=a;return this},setElementTextColor:function(a){this.elementTextColor=
a;return this},setHighlighter:function(a){this.highlighter=a;return this},setElementBorderColor:function(a){this.elementBorderColor=a;return this},buildTooltip:function(a,h){var b={elementHeight:80,elementWidth:390,userState:"ANY",elementType:"TEXT",onDemand:!0,sequenceNum:1,elementStartOffset:0,elementDuration:12E3,elementBounceDuration:9E3,maxDisplayCount:1,elementBackgroundColor:"#FFA724",elementTextColor:"#000000",elementIndex:"",elementBorderColor:"#FFA724"};b.identifier=this.identifier;b.elementDisplayType=
this.elementDisplayType;b.elementArrowPosition=this.elementArrowPosition;b.elementValue=this.elementValue;b.elementAnchor=this.elementAnchor;b.successResponse=this.success;b.failureResponse=this.failure;this.elementStartOffset&&(b.elementStartOffset=this.elementStartOffset);this.dismissalType&&(b.dismissalType=this.dismissalType);this.elementDuration&&(b.elementDuration=this.elementDuration);this.elementBounceDuration&&(b.elementBounceDuration=this.elementBounceDuration);this.videoSource&&(b.videoSource=
this.videoSource);this.videoWidth&&(b.videoWidth=this.videoWidth);this.nestedSA&&(b.nestedSAList=this.nestedSA);this.elementCTA&&(b.elementCTA=this.elementCTA);this.scrollToAnchor&&(b.scrollToAnchor=this.scrollToAnchor);this.anchorScrollOffset&&(b.anchorScrollOffset=this.anchorScrollOffset);this.elementIndex&&(b.elementIndex=this.elementIndex);this.offsetX&&(b.offsetX=this.offsetX,b.xOffset=this.offsetX);this.offsetY&&(b.offsetY=this.offsetY,b.yOffset=this.offsetY);this.elementBackgroundColor&&(b.elementBackgroundColor=
this.elementBackgroundColor);this.elementTextColor&&(b.elementTextColor=this.elementTextColor);this.highlighter&&(b.highlighter=this.highlighter);this.elementBorderColor&&(b.elementBorderColor=this.elementBorderColor);try{if(b.identifier===e)throw"Mandatory parameter missing: identifier";if(b.elementDisplayType===e)throw"Mandatory parameter missing: elementDisplayType";if(b.elementArrowPosition===e)throw"Mandatory parameter missing: elementArrowPosition";if(b.elementValue===e)throw"Mandatory parameter missing: elementValue";
if(b.elementAnchor===e)throw"Mandatory parameter missing: elementAnchor";if(b.successResponse===e)throw"Mandatory parameter missing: successResponse";if(b.failureResponse===e)throw"Mandatory parameter missing: failureResponse";a&&"function"===typeof a&&(g.incrementCounter("TooltipBuilder:success"),a(b))}catch(c){h&&"function"===typeof h&&(g.incrementCounter("TooltipBuilder:failure"),h(c))}}}}})})();(function(){l.when("A","QTipsMetrics").register("OnDemandBottomSheetBuilder",function(m,g){return function(){return{setIdentifier:function(a){this.identifier=
a;return this},setInvokingEventType:function(a){this.invokingEventType=a;return this},setInvokingEventElement:function(a){this.invokingEventElement=a;return this},setContentUrl:function(a){this.contentUrl=a;return this},setStaticContent:function(a){this.staticContent=a;return this},setCloseType:function(a){this.closeType=a;return this},setCloseMessage:function(a){this.closeMessage=a;return this},setSchedulingType:function(a){this.schedulingType=a;return this},setBottomSheetHeight:function(a){this.bottomSheetHeight=
a;return this},setClientSideTargeting:function(a){this.clientSideTargeting=a;return this},setNestedSA:function(a){this.nestedSA=a;return this},setSuccessResponse:function(a){this.success=a;return this},setFailureResponse:function(a){this.failure=a;return this},buildBottomSheet:function(a,h){var b={onDemand:!0,sequenceNum:1,maxDisplayCount:1,impressionInterval:24,elementDisplayType:"HTML"};b.identifier=this.identifier;b.successResponse=this.success;b.failureResponse=this.failure;this.invokingEventType&&
(b.invokingEventType=this.invokingEventType);this.invokingEventElement&&(b.invokingEventElement=this.invokingEventElement);this.contentUrl&&(b.contentUrl=this.contentUrl);this.contentUrl===e&&this.staticContent&&(b.staticContent=this.staticContent);this.closeType&&(b.closeType=this.closeType);this.closeMessage&&(b.closeMessage=this.closeMessage);this.schedulingType&&(b.schedulingType=this.schedulingType);this.bottomSheetHeight&&(b.bottomSheetHeight=this.bottomSheetHeight);this.clientSideTargeting&&
(b.clientSideTargetting=this.clientSideTargeting);this.nestedSA&&(b.nestedSAList=this.nestedSA);try{if(b.identifier===e)throw"Mandatory parameter missing: identifier";if(b.contentUrl===e&&b.staticContent===e)throw"Mandatory parameter missing: content(static/URL)";if(b.successResponse===e)throw"Mandatory parameter missing: successResponse";if(b.failureResponse===e)throw"Mandatory parameter missing: failureResponse";a&&"function"===typeof a&&(g.incrementCounter("BottomSheetBuilder:success"),a(b))}catch(c){h&&
"function"===typeof h&&(g.incrementCounter("BottomSheetBuilder:failure"),h(c))}}}}})})();(function(){l.when("A","QTipsMetrics").register("OnDemandDynamicSparkleBuilder",function(m,g){return function(){return{setIdentifier:function(a){this.identifier=a;return this},setInvokingEventType:function(a){this.invokingEventType=a;return this},setInvokingEventElement:function(a){this.invokingEventElement=a;return this},setStateData:function(a){this.stateData=a;return this},setSuccessResponse:function(a){this.success=
a;return this},setFailureResponse:function(a){this.failure=a;return this},buildSparkle:function(a,h){var b={onDemand:!0,sparkleType:"dynamic",sequenceNum:1,maxDisplayCount:1,impressionInterval:24,clickInterval:24};b.identifier=this.identifier;b.stateData=this.stateData;b.successResponse=this.success;b.failureResponse=this.failure;this.invokingEventType&&(b.invokingEventType=this.invokingEventType);this.invokingEventElement&&(b.invokingEventElement=this.invokingEventElement);try{if(b.identifier===
e)throw"Mandatory parameter missing: identifier";if(b.stateData===e)throw"Mandatory parameter missing: stateData";try{JSON.parse(b.stateData)}catch(c){throw"Mandatory parameter missing: illegalStateData";}if(b.successResponse===e)throw"Mandatory parameter missing: successResponse";if(b.failureResponse===e)throw"Mandatory parameter missing: failureResponse";a&&"function"===typeof a&&(g.incrementCounter("DynamicSparkleBuilder:success"),a(b))}catch(c){h&&"function"===typeof h&&(g.incrementCounter("DynamicSparkleBuilder:failure"),
h(c))}}}}})})();(function(){l.when("A","QTipsMetrics").register("OnDemandStaticSparkleBuilder",function(m,g){return function(){return{setIdentifier:function(a){this.identifier=a;return this},setInvokingEventType:function(a){this.invokingEventType=a;return this},setInvokingEventElement:function(a){this.invokingEventElement=a;return this},setDisplayText:function(a){this.displayText=a;return this},setDisplayIcon:function(a){this.displayIcon=a;return this},setTargetEndpoint:function(a){this.targetEndpoint=
a;return this},setDescriptionText:function(a){this.descriptionText=a;return this},setTypeOfStaticSparkle:function(a){this.typeOfStaticSparkle=a;return this},setNestedSA:function(a){this.nestedSA=a;return this},setSuccessResponse:function(a){this.success=a;return this},setFailureResponse:function(a){this.failure=a;return this},buildSparkle:function(a,h){var b={onDemand:!0,sparkleType:"static",sequenceNum:1,maxDisplayCount:1,impressionInterval:24,clickInterval:24};b.identifier=this.identifier;b.successResponse=
this.success;b.failureResponse=this.failure;this.invokingEventType&&(b.invokingEventType=this.invokingEventType);this.invokingEventElement&&(b.invokingEventElement=this.invokingEventElement);this.displayText&&(b.displayText=this.displayText);this.displayIcon&&(b.displayIcon=this.displayIcon);this.targetEndpoint&&(b.targetEndpoint=this.targetEndpoint);this.descriptionText&&(b.descriptionText=this.descriptionText);this.schedulingType&&(b.schedulingType=this.schedulingType);this.typeOfStaticSparkle&&
(b.typeOfStaticSparkle=this.typeOfStaticSparkle);this.nestedSA&&(b.nestedSAList=this.nestedSA);try{if(b.identifier===e)throw"Mandatory parameter missing: identifier";if(b.successResponse===e)throw"Mandatory parameter missing: successResponse";if(b.failureResponse===e)throw"Mandatory parameter missing: failureResponse";a&&"function"===typeof a&&(g.incrementCounter("StaticSparkleBuilder:success"),a(b))}catch(c){h&&"function"===typeof h&&(g.incrementCounter("StaticSparkleBuilder:failure"),h(c))}}}}})})();
(function(){l.when("A","QTipsMetrics").register("OnDemandHighlighterBuilder",function(m,g){return function(){return{setIdentifier:function(a){this.identifier=a;return this},setHighlighterAnchor:function(a){this.highlighterAnchor=a;return this},setSuccessResponse:function(a){this.success=a;return this},setFailureResponse:function(a){this.failure=a;return this},setStartPositionX:function(a){this.startPositionX=a;return this},setPositionX:function(a){this.positionX=a;return this},setPositionY:function(a){this.positionY=
a;return this},setElementDisplayType:function(a){this.elementDisplayType=a;return this},buildHighlighter:function(a,h){var b={onDemand:!0,sequenceNum:1,elementStartOffset:0,maxDisplayCount:1,startPositionX:"left",positionX:0,positionY:0,elementDisplayType:"HTML"};b.identifier=this.identifier;b.highlighterAnchor=this.highlighterAnchor;b.successResponse=this.success;b.failureResponse=this.failure;this.startPositionX&&(b.startPositionX=this.startPositionX);this.positionX&&(b.positionX=this.positionX);
this.positionY&&(b.positionY=this.positionY);this.elementDisplayType&&(b.elementDisplayType=this.elementDisplayType);try{if(b.identifier===e)throw"Mandatory parameter missing: identifier";if(b.highlighterAnchor===e)throw"Mandatory parameter missing: highlighterAnchor";if(b.successResponse===e)throw"Mandatory parameter missing: successResponse";if(b.failureResponse===e)throw"Mandatory parameter missing: failureResponse";a&&"function"===typeof a&&(g.incrementCounter("HighlighterBuilder:success"),a(b))}catch(c){h&&
"function"===typeof h&&(g.incrementCounter("HighlighterBuilder:failure"),h(c))}}}}})})();(function(){l.when("A","QTipsHandler","QTips","SA_BottomSheet","ShoppingAidsSparkles","SAFabAudiospot","SAHotspot","SAAudiospot","QTipsConstants","OnDemandTooltipBuilder","OnDemandBottomSheetBuilder","OnDemandDynamicSparkleBuilder","OnDemandStaticSparkleBuilder","OnDemandShoppingAidsAllowlist","QTipLibrary","QTipsMetrics","SAHighlighter","OnDemandHighlighterBuilder","PageResolver").register("OnDemandShoppingAids",
function(e,g,a,h,b,c,l,u,p,f,q,z,D,x,n,d,y,A,B){var m=this;return{toolTipBuilder:f,bottomSheetBuilder:q,staticSparkleBuilder:D,dynamicSparkleBuilder:z,highlighterBuilder:A,invoke:function(f,c){if(m.inThrottledState)f.failureResponse(p.errorCodes.API_THROTTLED);else{var r=c.split("/");c=r[0];r=r[1];var k=f.identifier,q;(q=e.contains(x.allowListedIdentifiers,k))||(q=e.contains(k,x.allowedPrefixIdentifier)&&0===k.indexOf(x.allowedPrefixIdentifier)?!0:!1);if(q){switch(c){case "tooltip":d.incrementCounter("OnDemandShoppingAids:tooltip:"+
r);d.incrementCounter("OnDemandShoppingAids:tooltip");d.incrementCounter("OnDemandShoppingAids:"+r);"1.0.0"===r?(c=new n.Model,c.set(f),d.incrementCounter("OnDemandShoppingAids:tooltip:invoked:"+r),g.displayOnDemandToolTip(c)):(f.failureResponse(p.errorCodes.INVALID_VERSION),d.incrementCounter("OnDemandShoppingAids:tooltip:invalidVersion"));break;case "sparkle":d.incrementCounter("OnDemandShoppingAids:sparkle:"+r);d.incrementCounter("OnDemandShoppingAids:sparkle");d.incrementCounter("OnDemandShoppingAids:"+
r);"1.0.0"===r?b.invokeOnDemandSparkle({sparkles:f,page:B.pageAdapter(),platform:"mweb"}):(f.failureResponse(p.errorCodes.INVALID_VERSION),d.incrementCounter("OnDemandShoppingAids:sparkle:invalidVersion"));break;case "bottomsheet":d.incrementCounter("OnDemandShoppingAids:bottomsheet:"+r);d.incrementCounter("OnDemandShoppingAids:bottomsheet");d.incrementCounter("OnDemandShoppingAids:"+r);"1.0.0"===r?(c=new n.Model,c.set(f),h.collection.add(c),a.view.clearRender(),h.view.start(B.pageAdapter())):(f.failureResponse(p.errorCodes.INVALID_VERSION),
d.incrementCounter("OnDemandShoppingAids:bottomsheet:invalidVersion"));break;case "highlighter":d.incrementCounter("OnDemandShoppingAids:highlighter:"+r);d.incrementCounter("OnDemandShoppingAids:highlighter");d.incrementCounter("OnDemandShoppingAids:"+r);"1.0.0"===r?(c=new n.Model,c.set(f),d.incrementCounter("OnDemandShoppingAids:highlighter:invoked:"+r),y.view.displayOnDemandHighlighter(c)):(f.failureResponse(p.errorCodes.INVALID_VERSION),d.incrementCounter("OnDemandShoppingAids:highlighter:invalidVersion"));
break;default:d.incrementCounter("OnDemandShoppingAids:invalidShoppingAidType"),f.failureResponse(p.errorCodes.INVALID_SHOPPING_AID_TYPE)}d.incrementCounter(m.sourceName+"presentInAllowlist")}else f.failureResponse(p.errorCodes.AID_NOT_ALLOWLISTED),d.incrementCounter(m.sourceName+"rejectedFromAllowlist"),d.incrementCounter(m.sourceName+"rejectedFromAllowlist:"+f.identifier)}},dismiss:function(f,e,g,k){d.incrementCounter("OnDemandShoppingAids:dismiss:"+f);d.incrementCounter("OnDemandShoppingAids:dismiss:"+
e);switch(e){case "tool_tip":a.view.dismissWithId(f,g,k);break;case "bottomsheet":h.view.dismissWithId(f,g,k);break;case "sparkles":b.dismissWithId(f,g,k);break;case "hotspot":l.view.dismissWithId(f,g,k);break;case "audiospot":u.view.dismissWithId(f,g,k);break;case "fabaudiospot":c.dismissWithId(f,g,k);break;case "highlighter":y.view.dismissWithId(f,g,k);break;default:k&&"function"===typeof k&&k(p.errorCodes.INVALID_SHOPPING_AID_TYPE),d.incrementCounter("OnDemandShoppingAids:dismiss:invalidShoppingAidType")}}}})})();
(function(){l.when("A").register("OnDemandShoppingAidsAllowlist",function(e){return{allowedPrefixIdentifier:"nested_sa",allowListedIdentifiers:["devTestID","ShoppingAidsInternal","s-search-pinch-to-zoom-hotspot-video-tooltip-text-EU","GameXActionTray"]}})})();(function(){l.when("A","OnDemandShoppingAids","QTipsMetrics").register("NestedSARenderer",function(e,g,a){function h(f,g){var e=f.type,h=function(a){p.result=a},q=function(){a.incrementCounter("NestedSARenderer:"+g+e+"_error")};a.incrementCounter("NestedSARenderer:"+
g+e);"bottom_sheet"===e?b(f,h,q):"sparkle"===e?c(f,h,q):"tool_tip"===e?l(f,h,q):"highlighter"===e?m(f,h,q):a.incrementCounter("NestedSARenderer:unknown_shopping_aid")}function b(b,c,e){var f=b.identifier,h=b.closeType,q=b.staticContent,d=b.contentUrl,l=b.bottomSheetHeight;a.incrementCounter("NestedSARenderer:bottom_sheet_builder:invoked");g.bottomSheetBuilder().setIdentifier(f).setStaticContent(q).setContentUrl(d).setCloseType(h).setBottomSheetHeight(l).setNestedSA(b.nestedSAList).setSuccessResponse(function(){}).setFailureResponse(function(){}).buildBottomSheet(c,
e);g.invoke(p.result,"bottomsheet/1.0.0");a.incrementCounter("NestedSARenderer:on_demand_bottom_sheet:invoked")}function c(b,c,e){var f=b.identifier,h=b.displayText,q=b.displayIcon,d=b.targetEndpoint,l=b.descriptionText,m=b.typeOfStaticSparkle;a.incrementCounter("NestedSARenderer:sparkle_builder:invoked");g.staticSparkleBuilder().setIdentifier(f).setDisplayText(h).setDisplayIcon(q).setDescriptionText(l).setTypeOfStaticSparkle(m).setNestedSA(b.nestedSAList).setTargetEndpoint(d).setSuccessResponse(function(){}).setFailureResponse(function(){}).buildSparkle(c,
e);g.invoke(p.result,"sparkle/1.0.0");a.incrementCounter("NestedSARenderer:on_demand_sparkle:invoked")}function l(b,c,e){a.incrementCounter("NestedSARenderer:tooltip_builder:invoked");g.toolTipBuilder().setIdentifier(b.identifier).setElementAnchor(b.elementAnchor).setElementDisplayType(b.elementDisplayType).setElementArrowPosition(b.elementArrowPosition).setElementValue(b.elementValue).setElementStartOffset(b.elementStartOffset).setElementDuration(b.elementDuration).setElementBounceDuration(b.elementBounceDuration).setElementCTA(b.elementCTA).setDismissalType(b.dismissalType).setNestedSA(b.nestedSAList).setScrollToAnchor(b.scrollToAnchor).setAnchorScrollOffset(b.anchorScrollOffset).setVideoSource(b.videoSource).setVideoWidth(b.videoWidth).setSuccessResponse(function(){}).setFailureResponse(function(){}).setOffsetX(b.offsetX).setOffsetY(b.offsetY).setElementIndex(b.elementIndex).setElementBackgroundColor(b.elementBackgroundColor).setElementTextColor(b.elementTextColor).setHighlighter(b.highlighter).setElementBorderColor(b.elementBorderColor).buildTooltip(c,
e);g.invoke(p.result,"tooltip/1.0.0");a.incrementCounter("NestedSARenderer:on_demand_tooltip:invoked")}function m(b,c,e){a.incrementCounter("NestedSARenderer:highlighter_builder:invoked");g.highlighterBuilder().setIdentifier(b.identifier).setHighlighterAnchor(b.highlighterAnchor).setStartPositionX(b.startPositionX).setPositionX(b.positionX).setPositionY(b.positionY).setElementDisplayType(b.elementDisplayType).setSuccessResponse(function(){}).setFailureResponse(function(){}).buildHighlighter(c,e);
g.invoke(p.result,"highlighter/1.0.0");a.incrementCounter("NestedSARenderer:on_demand_highlighter:invoked")}var p=this;document.addEventListener("SA:InvokeOnDemandSA",function(b){a.incrementCounter("NestedSARenderer:shopping_aid_data_event");if((b=b.detail)&&0<b.length){var c=b[0];c.nestedSAList=JSON.stringify(b.splice(1));h(c,"nestedSA_invoke:")}else b?(b=JSON.parse(b.toJson()),h(b,"supplementarySA_invoke:")):a.incrementCounter("NestedSARenderer:shopping_aid_data_event:undefined_data_received")});
document.addEventListener("SA:OnDemandDismissSA",function(b){try{var c=b.detail;g.dismiss(c.identifier,c.type,c.successCallback,c.errorCallback)}catch(z){a.incrementCounter("NestedSARenderer:sa:dismiss:event:invalid_data_received")}})})})()});
/* ******** */
