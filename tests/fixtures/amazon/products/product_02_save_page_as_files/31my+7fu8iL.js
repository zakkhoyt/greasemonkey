(function(h){var e=window.AmazonUIPageJS||window.P,p=e._namespace||e.attributeErrors,d=p?p("DetailPageBulkBuyingAssets",""):e;d.guardFatal?d.guardFatal(h)(d,window):d.execute(function(){h(d,window)})})(function(h,e,p){h.now("abs_bulk_buying_update_manager").execute(function(d){d||h.when("A","jQuery","abs-price-formatter-helper","abs_bulk_buying_constants","abs_bulk_buying_metrics","dp-latency-marker").register("abs_bulk_buying_update_manager",function(d,f,e,a,l){function h(c,g,b){for(var q=0;q<c.length;q++){var d=
k(c[q],a.ELEMENT_TYPE.DIV,a.SUBTOTAL.BULK_BUYING_SUBTOTAL_SECTION),f=k(c[q],a.ELEMENT_TYPE.INPUT,a.SUBTOTAL.BULK_BUYING_SUBTOTAL_QUANTITY_ELEMENT_ID);if(d&&f&&x(f,b)){var r=d,d=c[q],m=b;if(1===parseInt(m))f.value=m,n(r);else{try{var u=k(d,a.ELEMENT_TYPE.INPUT,a.SUBTOTAL.BULK_BUYING_PRICE_PER_ITEM_ELEMENT_ID).value*m;e.initialize();var y=e.formatPrice(u);k(r,a.ELEMENT_TYPE.SPAN,a.SUBTOTAL.BULK_BUYING_SUBTOTAL_ELEMENT_ID).textContent=y;v(r)}catch(p){l.registerCounter(a.METRICS.TOTAL_UNITS_AND_SUBTOTAL_BUYBOX_EXCEPTION),
l.logError("ERROR","Error while displaying Subtotal and Savings for absTotalUnitAndSubtotal",p),n(r)}if(r=k(r,a.ELEMENT_TYPE.DIV,a.TOTAL_SAVINGS.BULK_BUYING_TOTAL_SAVINGS_SECTION)){var z=k(d,a.ELEMENT_TYPE.INPUT,a.TOTAL_SAVINGS.BULK_BUYING_SAVINGS_PER_ITEM_ELEMENT_ID).value*m;try{var A=e.formatPrice(z);k(d,a.ELEMENT_TYPE.SPAN,a.TOTAL_SAVINGS.BULK_BUYING_TOTAL_SAVINGS_ELEMENT_ID).textContent=A;v(r)}catch(p){n(r)}}f.value=m}}}q=k(g,a.ELEMENT_TYPE.INPUT,a.TOTAL_UNITS.BULK_BUYING_QUANTITY_ELEMENT_ID);
g=k(g,a.ELEMENT_TYPE.SPAN,a.TOTAL_UNITS.BULK_BUYING_TOTAL_UNITS_ELEMENT_ID)&&q?x(q,b):!1;g&&t(c,b)}function t(c,g){if(1===parseInt(g))m(c,g);else{var b=f(a.TOTAL_UNITS.BULK_BUYING_CSRF_TOKEN_ELEMENT_ID).attr("value"),d=f(a.TOTAL_UNITS.BULK_BUYING_AJAX_ENDPOINT_ELEMENT_ID).attr("value"),e=f(a.TOTAL_UNITS.BULK_BUYING_TOTAL_UNITS_LOCALE_ELEMENT_ID).attr("value"),h=f(a.METADATA.AAPI_SLATE_TOKEN_META_NAME).attr("content");b&&d&&e?(e=e.replace(/_/g,"-"),b={"Accept-Language":e,Accept:'application/vnd.com.amazon.api+json; type\x3d"product/v2"; expand\x3d"buyingOptions[].totalUnit(product.total-unit/v1)"',
"x-api-csrf-token":b},h?(b["x-amzn-encrypted-slate-token"]=h,l.registerCounter(a.METRICS.TOTAL_UNITS_AND_SUBTOTAL_BUYBOX_AAPI_AJAX_PRESENT)):l.registerCounter(a.METRICS.TOTAL_UNITS_AND_SUBTOTAL_BUYBOX_SLATE_TOKEN_ABSENT),f.ajax({url:d+g,type:"GET",headers:b,async:!0,xhrFields:{withCredentials:!0},success:function(b){l.registerCounter(a.METRICS.TOTAL_UNITS_AND_SUBTOTAL_BUYBOX_AAPI_AJAX_SUCCESS);if(0<b.entity.buyingOptions.length&&b.entity.buyingOptions[0].totalUnit){if(b=b.entity.buyingOptions[0].totalUnit){if(b.metadata&&
b.metadata[a.METADATA.AAPI_METADATA_EXPERIMENTS])try{p(b.metadata[a.METADATA.AAPI_METADATA_EXPERIMENTS])}catch(g){l.registerCounter(a.METRICS.TOTAL_UNIT_AND_SUBTOTAL_TRIGGERING_EXCEPTION),l.logError("ERROR","Error while triggering weblabs For absTotalUnitAndSubtotal",g)}for(var d=0;d<c.length;d++){var e=k(c[d],a.ELEMENT_TYPE.SPAN,a.TOTAL_UNITS.BULK_BUYING_TOTAL_UNITS_ELEMENT_ID),f=k(c[d],a.ELEMENT_TYPE.SPAN,a.TOTAL_UNITS.BULK_BUYING_UNIT_COUNT_ELEMENT_ID),m=k(c[d],a.ELEMENT_TYPE.DIV,a.SUBTOTAL.BULK_BUYING_SUBTOTAL_SECTION);
if(e&&f&&m)try{b.entity&&b.entity.displayString?(e.textContent=b.entity.displayString,v(e),l.registerCounter(a.METRICS.TOTAL_UNITS_AND_SUBTOTAL_BUYBOX_INFO_SHOWN),b.entity.unitCount&&b.entity.unitCount.displayString&&(f.textContent=b.entity.unitCount.displayString,v(f))):(n(e),n(f),n(m))}catch(g){l.registerCounter(a.METRICS.TOTAL_UNITS_AND_SUBTOTAL_BUYBOX_EXCEPTION),l.logError("ERROR","Error while displaying Total Units for absTotalUnitAndSubtotal",g),n(e),n(f),n(m)}}}}else u(c)},error:function(a){u(c)},
complete:function(b){for(b=0;b<c.length;b++){var d=k(c[b],a.ELEMENT_TYPE.INPUT,a.TOTAL_UNITS.BULK_BUYING_QUANTITY_ELEMENT_ID);d&&(d.value=g)}}})):u(c)}}function m(c,g){for(var b=0;b<c.length;b++){var d=k(c[b],a.ELEMENT_TYPE.SPAN,a.TOTAL_UNITS.BULK_BUYING_TOTAL_UNITS_ELEMENT_ID),e=k(c[b],a.ELEMENT_TYPE.SPAN,a.TOTAL_UNITS.BULK_BUYING_UNIT_COUNT_ELEMENT_ID),f=k(c[b],a.ELEMENT_TYPE.INPUT,a.TOTAL_UNITS.BULK_BUYING_QUANTITY_ELEMENT_ID);f&&(f.value=g);n(d);n(e)}}function x(a,g){return parseInt(a.value)===
parseInt(g)?!1:!0}function u(c){l.registerCounter(a.METRICS.TOTAL_UNITS_AND_SUBTOTAL_BUYBOX_AAPI_AJAX_ERROR);for(var g=0;g<c.length;g++){var b=k(c[g],a.ELEMENT_TYPE.SPAN,a.TOTAL_UNITS.BULK_BUYING_TOTAL_UNITS_ELEMENT_ID),d=k(c[g],a.ELEMENT_TYPE.SPAN,a.TOTAL_UNITS.BULK_BUYING_UNIT_COUNT_ELEMENT_ID),e=k(c[g],a.ELEMENT_TYPE.DIV,a.SUBTOTAL.BULK_BUYING_SUBTOTAL_SECTION);n(b);n(d);n(e)}}function v(a){a&&a.classList.remove("aok-hidden")}function n(a){a&&a.classList.add("aok-hidden")}function p(c){("string"===
typeof c||c instanceof String)&&c.split(",").forEach(function(c){c=c.split(":",2);c[0]!==a.EXPERIMENTAL_WEBLABS.DESKTOP&&c[0]!==a.EXPERIMENTAL_WEBLABS.MOBILE||l.triggerWeblab(c[0],c[1])})}function k(a,d,b){return a.querySelector(d+"[id\x3d"+b+"]")}function w(c){for(var d="",b=0;b<c.length;b++)d+=a.ELEMENT_TYPE.DIV+'[id^\x3d"'+c[b]+'_"], '+a.ELEMENT_TYPE.DIV+'[id\x3d"'+c[b]+'"]',b<c.length-1&&(d+=", ");return d}f("#selectQuantity [name\x3d'quantity'], #mobileQuantityDropDown").live("change",function(c){var d=
f(this).val();c=c.target;var b=c.closest(a.ELEMENT_TYPE.DIV+"[id^\x3d"+a.BUY_BOX.BUY_BOX_ELEMENT_ID+"]");if(b){var e;e=w(a.BUY_BOX.LIST_OF_BUY_BOXES_COVERED_TOGETHER);(e=b.querySelectorAll(e))&&0!==e.length?(b=w(a.BUY_BOX.LIST_OF_BUY_BOXES_COVERED_TOGETHER),(c=c.closest(b))&&h(e,c,d)):h(Array.of(b),b,d)}});f("#mobileQuantitySelection [name\x3d'cspQuantity'],#mobileQuantitySelection [name\x3d'items[0.base][quantity]']").live("change",function(c){var d=f(this).val();c=c.target;var b;b=w([a.BUY_BOX.NEGOTIATED_PRICING_ROW_ELEMENT_ID]);
(b=c.closest(b))||(b=c.closest(a.ELEMENT_TYPE.DIV+"[id^\x3d"+a.BUY_BOX.BUY_BOX_ELEMENT_ID+"]"));h(Array.of(b),b,d)})})});"use strict";h.when("dp-latency-marker").register("abs_bulk_buying_constants",function(){return{TOTAL_UNITS:{BULK_BUYING_TOTAL_UNITS_ELEMENT_ID:"bulk-buying-total-units",BULK_BUYING_UNIT_COUNT_ELEMENT_ID:"bulk-buying-unit-count",BULK_BUYING_QUANTITY_ELEMENT_ID:"bulk-buying-total-units-quantity",BULK_BUYING_CSRF_TOKEN_ELEMENT_ID:"#bulk-buying-csrf-token",BULK_BUYING_AJAX_ENDPOINT_ELEMENT_ID:"#bulk-buying-ajax-endpoint",
BULK_BUYING_TOTAL_UNITS_LOCALE_ELEMENT_ID:"#bulk-buying-total-units-locale"},SUBTOTAL:{BULK_BUYING_SUBTOTAL_ELEMENT_ID:"bulk-buying-subtotal",BULK_BUYING_SUBTOTAL_QUANTITY_ELEMENT_ID:"bulk-buying-subtotal-quantity",BULK_BUYING_PRICE_PER_ITEM_ELEMENT_ID:"bulk-buying-price-per-item",BULK_BUYING_COUNTRY_CODE_ELEMENT_ID:"#bulk-buying-subtotal-country-code",BULK_BUYING_LOCALE_ELEMENT_ID:"#bulk-buying-subtotal-locale",BULK_BUYING_COP_ELEMENT_ID:"#bulk-buying-subtotal-cop",BULK_BUYING_SUBTOTAL_SECTION:"bulk-buying-subtotal-section",
BULK_BUYING_PRICE_FORMAT_PARAMS_PAGE_STATE:"bulk-buying-subtotal-price-format-params"},TOTAL_SAVINGS:{BULK_BUYING_TOTAL_SAVINGS_ELEMENT_ID:"bulk-buying-total-savings",BULK_BUYING_SAVINGS_PER_ITEM_ELEMENT_ID:"bulk-buying-savings-per-item",BULK_BUYING_TOTAL_SAVINGS_SECTION:"bulk-buying-total-savings-section"},METADATA:{AAPI_METADATA_EXPERIMENTS:"x-api-exp-data",AAPI_SLATE_TOKEN_META_NAME:'meta[name\x3d"encrypted-slate-token"]'},METRICS:{TOTAL_UNIT_AND_SUBTOTAL_TRIGGERING_EXCEPTION:"AbDpxAbsTotalUnitandSubtotalTriggeringException",
TOTAL_UNITS_AND_SUBTOTAL_BUYBOX_INFO_SHOWN:"AbDpxAbsTotalUnitsAndSubtotalBuyBoxInfoShown",TOTAL_UNITS_AND_SUBTOTAL_BUYBOX_EXCEPTION:"AbDpxAbsTotalUnitsAndSubtotalBuyBoxException",TOTAL_UNITS_AND_SUBTOTAL_BUYBOX_SLATE_TOKEN_ABSENT:"AbDpxAbsTotalUnitsAndSubtotalBuyBoxSlateTokenAbsent",TOTAL_UNITS_AND_SUBTOTAL_BUYBOX_AAPI_AJAX_PRESENT:"AbDpxAbsTotalUnitsAndSubtotalBuyBoxSlateTokenPresent",TOTAL_UNITS_AND_SUBTOTAL_BUYBOX_AAPI_AJAX_SUCCESS:"AbDpxAbsTotalUnitsAndSubtotalBuyBoxAAPIAJAXSuccess",TOTAL_UNITS_AND_SUBTOTAL_BUYBOX_AAPI_AJAX_ERROR:"AbDpxAbsTotalUnitsAndSubtotalBuyBoxAAPIAJAXError"},
BUY_BOX:{BUY_BOX_ELEMENT_ID:"buybox",NEW_ACCORDION_ROW_ELEMENT_ID:"newAccordionRow",B2BRD_ACCORDION_ROW_ELEMENT_ID:"b2brdAccordionRow",NEGOTIATED_PRICING_ROW_ELEMENT_ID:"cspAccordionRow",LIST_OF_BUY_BOXES_COVERED_TOGETHER:["newAccordionRow","b2brdAccordionRow"]},EXPERIMENTAL_WEBLABS:{DESKTOP:"AB_DPX_MULTI_UNIT_BUYBOX_776203",MOBILE:"AB_DPX_MULTI_UNIT_BUYBOX_MOBILE_1163747"},ELEMENT_TYPE:{DIV:"div",SPAN:"span",INPUT:"input"}}});"use strict";h.when("A","jQuery","abs_bulk_buying_constants","abPricingFfqp_amazonAPIPriceFormatter",
"ready","dp-latency-marker").register("abs-price-formatter-helper",function(d,e,f,h){var a=!1,l,p,t;return{initialize:function(){if(!a){e(f.SUBTOTAL.BULK_BUYING_COUNTRY_CODE_ELEMENT_ID).attr("value");p=e(f.SUBTOTAL.BULK_BUYING_LOCALE_ELEMENT_ID).attr("value");t=e(f.SUBTOTAL.BULK_BUYING_COP_ELEMENT_ID).attr("value");var m=d.state(f.SUBTOTAL.BULK_BUYING_PRICE_FORMAT_PARAMS_PAGE_STATE);m&&"object"===typeof m&&t&&(m.currencyOfPreference=t,l=new h(m))}a=!0},formatPrice:function(a){if(l){var e={amount:a,
currencyCode:t};l.formatPrices(e);return e.displayString}var f=p,e=t,f=f.replace(/_/g,"-");a=parseFloat(a);if(isNaN(a))throw Error("Amount is not a valid number");f="es-US"===f?"en-US":f;a="object"===typeof Intl&&d.$.isFunction(Intl.NumberFormat)?a.toLocaleString(f,{minimumFractionDigits:2,maximumFractionDigits:2}):a.toFixed(2);return e+a}}});"use strict";h.when("dp-latency-marker").register("abs_bulk_buying_metrics",function(){return{registerCounter:function(d){e.ue&&e.ue.count&&e.ue.count(d,(e.ue.count(d)||
0)+1)},triggerWeblab:function(d,h){e.ue&&e.ue.trigger&&e.ue.trigger(d,h)},logError:function(d,h,f){e.ueLogError&&e.ueLogError(f,{logLevel:d,attribution:"absTotalUnitandUnitCountBuyBox",message:h})}}})});